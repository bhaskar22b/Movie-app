(self.modernJsonp=self.modernJsonp||[]).push([["1554"],{562400:function(e,o,t){t.d(o,{Z:()=>s});function s(e,o,t){let s,i,a,n=!!t?.leading,l=t?.trailing!==!1,r=t?.maxWait?Math.max(t.maxWait,o):void 0,c=null,d=0;function _(o){let t=s;return s=void 0,d=o,t&&(i=e(...t)),i}function h(e){let t=e-(a??0),s=e-d;return void 0===a||t>=o||t<0||void 0!==r&&s>=r}function u(){let e=Date.now();h(e)?(c=null,l&&s)?_(e):s=void 0:c=setTimeout(u,function(e){let t=e-(a??0),s=e-d,i=o-t;return void 0!==r?Math.min(i,r-s):i}(e))}function g(){null!==c&&clearTimeout(c),c=setTimeout(u,o)}function m(...e){let t=Date.now(),l=h(t);if(s=e,a=t,l){if(null===c)return d=t,c=setTimeout(u,o),n?_(t):i;else if(void 0!==r)return g(),_(t)}return null===c&&g(),i}return m.flush=function(){if(null!==c&&s){let e=Date.now();return clearTimeout(c),c=null,_(e)}return i},m.cancel=function(){null!==c&&clearTimeout(c),d=0,s=void 0,a=void 0,c=null},m}},797502:function(e,o,t){t.d(o,{Kz:()=>s,ZP:()=>a,mM:()=>i});let s=`
input[type="password"]::-ms-reveal  {
    display: none;
}
`,i={margin:"0 auto 22px",width:"270px"},a=`
.Tooltip_message:before, .Tooltip_message:after {
  border-style: solid;
  content: '';
  display: block;
  margin-top: -8px;
  position: absolute;
  right: 100%;
  top: 17px;
  width: 0;
}
.Tooltip_message:before {
  border-color: transparent rgba(0,0,0,0.48);
  border-width: 8px 10px 8px 0;
}
.Tooltip_message:after {
  border-color: transparent #fff;
  border-width: 8px 10px 8px 0;
  margin-right: -1px;
}
.Tooltip_mobileMessage:before, .Tooltip_message:after {
  border-style: solid;
  display: block;
  margin-top: -8px;
  position: absolute;
  right: 100%;
  top: 17px;
  width: 0;
}
.Tooltip_mobileMessage:before {
  border-color: transparent rgba(0,0,0,0.48);
  border-width: 8px 10px 8px 0;
}
.Tooltip_mobileMessage:after {
  border-color: transparent #fff;
  border-width: 8px 10px 8px 0;
  margin-right: -1px;
}
.Tooltip_wrapper {
  position: absolute;
  left: calc(100% + 12px);
  z-index: 1;
}
.Tooltip_mobileWrapper {
  margin-top: 7px;
  z-index: 1;
}

.TermsOfService__light a {
  color: rgba(255,255,255,0.9);
}
`},600138:function(e,o,t){t.d(o,{Z:()=>a});var s=t(533104),i=t(341687);function a(e,o,t=""){if(!(o&&o.search))return"";let{message:n}=(0,i.Z)(o.search),l=(0,i.Z)(o.search).username||t,r="true"===(0,i.Z)(o.search).multiple_accounts;return(0,s.Z)({i18n:e,message:n,multipleAccounts:r,username:l})}},533104:function(e,o,t){t.d(o,{Z:()=>r});var s=t(391995),i=t(216975),a=t(253542),n=t(785893);function l(e,o,t){return(0,n.jsx)(s.xe,{align:t||"center",children:(0,i.nk)(e,{username:(0,n.jsx)(s.xe,{inline:!0,weight:"bold",children:o})})})}function r({i18n:e,message:o,multipleAccounts:t,username:s=""}){switch(o){case a.R:return e._('Your account has been deleted. We\'re sad to see you go', 'unauthLoginPage.accountDeletedToast.message', 'Confirmation message after a user has successfully deleted their account');case a.j2:if(t)return l(e._('An email has been sent with final steps to delete your account, {{username}} and its linked accounts', 'accountDeletedEmailToast.message.multipleAccounts', 'Confirmation message after a user has successfully requested multiple accounts deletion'),s);return l(e._('An email has been sent with final steps to delete your account, {{username}}', 'accountDeletedEmailToast.message.singleAccount', 'Confirmation message after a user has successfully requested a single account deletion'),s);case a.Di:return l(t?e._('The account, {{username}}, and its associated linked accounts have been deactivated', 'unauthLoginPage.deactivatedToast.message.multipleAccounts', 'Confirmation message after a user has successfully deactivated multiple accounts'):e._('The account, {{username}}, has been deactivated', 'unauthLoginPage.deactivatedToast.message.singleAccount', 'Confirmation message after a user has successfully deactivated a single account'),s);case a.aU:return l(e._('Success! You\'ve unlinked this business account. You are currently in {{username}}.', 'authHomeFeedPage.unlinkAccountToast.message', 'Confirmation message after a user has successfully unlinked business account'),s,"start");case a.pN:return l(e._('You\'ve switched into and are currently in the account {{username}}', 'accountSettings.switchAccountToAccountChanges', 'Confirmation message after a user has successfully switched accounts and got redirected to Account Changes'),s,"start");case a.iu:return e._('Your account is now a personal account', 'unauthLoginPage.unlinkAccountToast.personal.message', 'Confirmation message after a user has successfully converted the lba to a personal account');case a.E2:return e._('Your account is now a business account', 'unauthLoginPage.unlinkAccountToast.business.message', 'Confirmation message after a user has successfully converted the lba to a business account');case a.Eh:return e._('Your Linked Business Account was deleted', 'unauthLoginPage.unlinkAccountToast.business.message', 'Confirmation message after a user has successfully deleted their linked business account');default:return""}}},160125:function(e,o,t){t.d(o,{GH:()=>l,Jb:()=>c,fi:()=>d,we:()=>r});var s=t(681698);t(47755);var i=t(877904),a=t(951608),n=t(935833);let l="274266067164",r=(e,o)=>(o&&(0,n.dy)({event:"load_script_start",provider:"facebook"}),(0,i.Z)((0,a.Z)(e),"FACEBOOK").then(()=>{o&&(0,n.dy)({event:"load_script_success",provider:"facebook"}),"undefined"!=typeof window&&window.FB?(o&&(0,n.dy)({event:"initialize_library",provider:"facebook"}),window.FB.init({appId:l,status:!0,xfbml:!0,version:"v2.7"})):o?(0,n.dy)({event:"global_object_not_found",provider:"facebook"}):(0,n.My)("pcons.non_autologin.fb.global_object_not_found")})),c=()=>new Promise(e=>{"undefined"!=typeof window&&window.FB&&window.FB.getLoginStatus(e)}),d=async(e,o)=>{await r(e,!1);let t=await c(),i=o?"dweb":"mweb";if("connected"===t.status){(0,n.My)(`${i}.login_data_from_fb_token.connected`);let{userID:e,accessToken:o}=t.authResponse;try{let t=await (0,s.Z)({url:"/v3/facebook/login_data/",data:{facebook_id:e,facebook_token:o}});if(t?.resource_response?.data){let{connected_to_gplus:e,connected_to_google:o,has_password:s}=t.resource_response.data,a=e||o;return(0,n.My)(`${i}.login_data_from_fb_token.success`),{isGoogleConnected:a,hasPassword:s,isFBAuthOnly:!a&&!s}}(0,n.My)(`${i}.login_data_from_fb_token.no_data`)}catch{(0,n.My)(`${i}.login_data_from_fb_token.error`)}}return null}},951608:function(e,o,t){t.d(o,{Z:()=>s});let s=e=>`//connect.facebook.net/${(e=>{let o=e.replace(/-/g,"_");if(o.startsWith("es"))return"es_LA";if(o.startsWith("ar"))return"ar_AR";switch(o){case"de":return"de_DE";case"fr":return"fr_FR";case"it":return"it_IT";case"ja":return"ja_JP";case"nl":return"nl_NL";case"tr":return"tr_TR";case"en_AU":return"en_US";default:return o}})(e)}/sdk.js`},272319:function(e,o,t){t.r(o),t.d(o,{default:()=>g});var s=t(686659),i=t(667294),a=t(391995),n=t(230201),l=t(24246),r=t(216975),c=t(935833),d=t(893957),_=t(878243),h=t(785893);let u={textAlign:"start"};function g(){(0,i.useEffect)(()=>{(0,s.Z)("QRCodeLoginAppErrorBanner","/app/www/login/duplo/QRCodeLoginAppErrorBanner.tsx")},[]);let e=(0,l.Z)(),{logContextEvent:o}=(0,n.u)(),t=(0,r.XB)({text:e._('<strong id=\'1\'>Get the app</strong> to log in with QR code', 'mweb.qr_code_login_app_error.banner.text', 'Text for QR code login app error banner'),jsxReplacements:{1:({innerHtmlStrings:e})=>(0,h.jsx)(a.xe,{inline:!0,underline:!0,children:e})}});return(0,d.Z)(()=>{(0,c.My)("mweb.qr_code_login_app_error.banner.view"),o({event_type:13,component:15429})}),(0,h.jsx)(a.xu,{children:(0,h.jsx)(_.Z,{app_upsell_type:"qr-code-login-app-error-banner",componentType:15430,children:({handleOpenApp:s})=>(0,h.jsx)(a.iP,{onTap:()=>{(0,c.My)("mweb.qr_code_login_app_error.banner.tap"),o({event_type:102,component:15429}),s()},children:(0,h.jsxs)(a.xu,{alignItems:"center",color:"infoWeak",direction:"row",display:"flex",paddingX:4,paddingY:4,rounding:400,children:[(0,h.jsx)(a.xu,{marginEnd:4,children:(0,h.jsx)(a.JO,{accessibilityLabel:e._('Pinterest', 'proPartnerHeader.partnerBadge.pinterestIcon', 'Pinterest icon'),color:"info",icon:"pinterest",size:20})}),(0,h.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:u},children:(0,h.jsx)(a.xe,{inline:!0,children:t})})]})})})})}},836422:function(e,o,t){t.d(o,{Z:()=>ex});var s=t(686659),i=t(667294),a=t(581722),n=t(312048),l=t(391995),r=t(987704),c=t(4533),d=t(104999),_=t(562400),h=t(230201),u=t(160125),g=t(774838),m=t(739405),p=t(24246),f=t(247387),x=t(935833),b=t(893957),w=t(785893);let P={textAlign:"start"};function k(){(0,i.useEffect)(()=>{(0,s.Z)("FacebookRecoverAccountBanner","/app/packages/desktopLoginModal/FacebookRecoverAccountBanner.tsx")},[]);let e=(0,p.Z)(),o=(0,m.HG)(),{isRetrievingLoginData:t,isGoogleConnected:a,hasPassword:n,isFBAuthOnly:r}=function({disableFetch:e=!1}){let{locale:o}=(0,g.B)(),t=(0,m.HG)(),[s,a]=(0,i.useState)(!1),[n,l]=(0,i.useState)(!1),[r,c]=(0,i.useState)(!1),[d,_]=(0,i.useState)(!1),[h,p]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{let s=async()=>{let e=await (0,u.fi)(o,t);e?(a(e.isGoogleConnected),l(e.hasPassword),c(e.isFBAuthOnly)):_(!0),p(!1)};e?p(!1):s()},[o,t,e]),d||e?{isRetrievingLoginData:h}:{isGoogleConnected:s,hasPassword:n,isFBAuthOnly:r,isRetrievingLoginData:h}}({}),{logContextEvent:c}=(0,h.u)(),[d,_]=(0,i.useState)("default"),k=o?"dweb":"mweb";return(0,b.Z)(()=>{c({event_type:15393,element:10881}),(0,x.My)("pcons.login_page.fb_recover_account_banner.view")}),(0,i.useEffect)(()=>{if(t)return;let e="default";a?e="google":n?e="email":r&&(e="fbOnly"),_(e),(0,x.My)(`${k}.fb_recover_account_banner.view.${e}`)},[t,k,a,n,r]),(0,w.jsx)(l.xu,{marginTop:o?4:void 0,padding:o?4:void 0,children:(0,w.jsx)(l.Tg,{href:`${f.lfe}?lookup=true`,onTap:({dangerouslyDisableOnNavigation:e})=>{(0,x.My)(`${k}.fb_recover_account_banner.click.${d}`),o&&e(),c({event_type:15392,element:10881})},children:(0,w.jsxs)(l.xu,{alignItems:"center",color:"infoWeak",direction:"row",display:"flex",paddingX:4,paddingY:4,rounding:400,children:[(0,w.jsx)(l.xu,{marginEnd:4,children:(0,w.jsx)(l.JO,{accessibilityLabel:e._('info icon on the facebook recover account banner', 'facebook_recover_account_banner.icon', 'Icon for facebook recover account banner'),color:"info",icon:"circle-information",size:20})}),(({authOption:e,i18n:o,isRetrievingLoginData:t})=>{let s=o._('Facebook login is no longer available. Log in with an option below or ', 'facebook_recover_account_banner.text_1', 'Text for facebook recover account banner 1'),i=o._('tap to recover your account', 'facebook_recover_account_banner.text_2', 'Text for facebook recover account banner 2');return t?(0,w.jsx)(l.xu,{alignItems:"center",direction:"column",display:"flex",marginEnd:10,width:"100%",children:(0,w.jsx)(l.xH,{color:"default",show:!0,size:"sm"})}):(t||("google"===e?s=o._('Facebook login is no longer available. Log in with Google or ', 'facebook_recover_account_banner_google.text', 'Text for facebook recover account banner suggesting Google connection'):"email"===e?s=o._('Facebook login is no longer available. Log in with email or ', 'facebook_recover_account_banner_email.text', 'Text for facebook recover account banner suggesting Email login'):"fbOnly"===e&&(s=o._('Facebook login is no longer available. ', 'facebook_recover_account_banner_facebook.text_1', 'Text for facebook recover account banner Facebook only login 1'),i=o._('Tap to get back into your account', 'facebook_recover_account_banner_facebook.text_2', 'Text for facebook recover account banner Facebook only login 2'))),(0,w.jsxs)(l.xu,{dangerouslySetInlineStyle:{__style:P},children:[(0,w.jsx)(l.xe,{inline:!0,children:s}),(0,w.jsx)(l.xe,{inline:!0,weight:"bold",children:i})]}))})({authOption:d,i18n:e,isRetrievingLoginData:t})]})})})}function v(){(0,i.useEffect)(()=>{(0,s.Z)("FacebookDeprecationTextLink","/app/packages/duplo/FacebookDeprecationTextLink.tsx")},[]);let e=(0,p.Z)(),{logContextEvent:o}=(0,h.u)();return(0,b.Z)(()=>{(0,x.My)("mweb.fb_deprecation_text_link.view"),o({event_type:15393,element:18307})}),(0,w.jsx)(l.xu,{marginTop:3,children:(0,w.jsxs)(l.xe,{align:"center",size:"200",children:[e._('Facebook login is no longer available ', 'facebook_deprecation_text_link.text_1', 'First part of Facebook deprecation message below login button'),(0,w.jsx)(l.Tg,{href:`${f.lfe}?lookup=true`,onTap:()=>{(0,x.My)("mweb.fb_deprecation_text_link.click"),o({event_type:15392,element:18307})},children:(0,w.jsx)(l.xe,{inline:!0,size:"200",underline:!0,weight:"bold",children:e._('Update login method', 'facebook_deprecation_text_link.text_2', 'Link text for updating login method after Facebook deprecation')})})]})})}var y=t(47755),A=t(319226),j=t(924591),z=t(216975),S=t(253542),E=t(600138),L=t(424868),T=t(413220),C=t(444382),F=t(904278),I=t(501010),B=t(615695),M=t(34550),Z=t(481889),O=t(577356),U=t(341687),R=t(986523),D=t(496883),H=t(550759),W=t(846277),N=t(797502),V=t(953037),G=t(59111),q=t(736328),Y=t(113188);function $(e,o,t){var s;return(o="symbol"==typeof(s=function(e,o){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var s=t.call(e,o||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(o,"string"))?s:s+"")in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}class K extends i.PureComponent{constructor(...e){super(...e),$(this,"state",{emailFieldElement:null,shouldShowEmailSuggestion:!1}),$(this,"handleChangeEmail",({value:e})=>{let{handleChangeEmail:o}=this.props;if(this.state.shouldShowEmailSuggestion)this.setState({shouldShowEmailSuggestion:!1});else if(e.endsWith("@")){let e=this.emailInputRef;this.setState({shouldShowEmailSuggestion:!0,emailFieldElement:e})}o&&o({value:e})}),$(this,"handlePasswordFocus",()=>{(0,x.NC)("focus_password")}),$(this,"handleEmailSuggestionClick",e=>{let{trackInteraction:o}=this.props;o&&o({action:"click",item:"email-suggestions",within:"login-page"}),this.setState({shouldShowEmailSuggestion:!1}),this.handleChangeEmail({value:e})}),$(this,"passwordReset",e=>{(0,x.NC)("click_forget_password"),this.props.handlePasswordReset&&this.props.handlePasswordReset(e)}),$(this,"handleLoginClick",()=>{(0,x.EX)({event:"start",provider:"email"}),(0,x.NC)("press_login_continue"),this.props.onLoginClick&&this.props.onLoginClick()}),$(this,"handleSignupClick",()=>{let{onSignUpClick:e}=this.props;e&&e()})}componentDidMount(){this.handleChangeEmail({value:this.props.email})}render(){let{email:e,handleChangePassword:o,hideEmailField:t,hideLoginBtn:s,hidePasswordField:a,i18n:n,passwordValidationError:r,emailValidationError:c,emailLoginOnlyForRecoverAccount:d,validateEmailOnBlur:_,validatePasswordOnBlur:h,isSIWAError:u,isValid:g,isSsoFlow:m,onSubmit:p,password:f,requestContext:x,shouldShowSignUpButton:b,showEmailAsText:P,onForgetPasswordForFacebookRecover:k}=this.props,{emailFieldElement:v,shouldShowEmailSuggestion:y}=this.state,A=u&&r,j=n._('Log in', 'Label for log in button', 'Label for log in button'),z=!a;return m&&(j=n._('Continue with SSO', 'login.sso.continue_button.text', 'Label for continue with SSO button'),z=!1),(0,w.jsx)(l.xu,{marginBottom:3,marginTop:3,children:(0,w.jsxs)("form",{autoCapitalize:"none",autoCorrect:"off",onSubmit:p,children:[!t&&P&&(0,w.jsx)(l.xu,{marginBottom:5,children:(0,w.jsx)(l.xv,{align:"center",children:e})}),!t&&!P&&(0,w.jsxs)(i.Fragment,{children:[y?(0,w.jsx)(Y.Z,{email:e,emailFieldElement:v,handleEmailSuggestionClick:this.handleEmailSuggestionClick,showUsername:!0}):null,(0,w.jsx)(l.xu,{marginTop:1,children:(0,w.jsx)(l.nv,{ref:e=>{this.emailInputRef=e},errorMessage:c,id:"email",onBlur:_,onChange:this.handleChangeEmail,placeholder:n._('Email', 'Prompt for user to enter in email on the mobile web login page', 'Prompt for user to enter in email on the mobile web login page'),size:"lg",type:"email",value:e})})]}),z?(0,w.jsxs)(l.xu,{children:[(0,w.jsxs)(l.xu,{marginTop:2,position:"relative",children:[x.userAgent.browserName?.includes("Edge")&&(0,w.jsx)(G.Z,{unsafeCSS:N.Kz}),(0,w.jsx)(l.nv,{autoComplete:"on",errorMessage:r,id:"password",onBlur:h,onChange:o,onFocus:this.handlePasswordFocus,placeholder:n._('Password', 'Prompt for user to enter in password on the mobile web login page', 'Prompt for user to enter in password on the mobile web login page'),size:"lg",type:"password",value:f})]}),d?(0,w.jsx)(l.xu,{"data-test-id":"reset-password",marginTop:2,children:(0,w.jsx)(l.iP,{onTap:()=>{k?.(this.props.email)},children:(0,w.jsx)(l.xv,{inline:!0,size:"100",weight:"bold",children:n._('Forgot your password', 'pass_word_reset_page.fb_multi_auth_login.send_forgot_password_email', 'Link for fb multi-auth user to reset their email if they are eligible for email password sign-in')})})}):(0,w.jsx)(l.xu,{"data-test-id":"reset-password",marginTop:2,children:(0,w.jsx)(l.xv,{inline:!0,size:"100",weight:"bold",children:(0,w.jsx)(l.rU,{display:"inlineBlock",href:"/password/reset",onClick:({event:e})=>this.passwordReset(e),tapStyle:"none",underline:"hover",children:A?n._('Reset your password', 'Heading displayed when email is entered on the password reset page', 'Heading displayed when email is entered on the password reset page'):n._('Forgot your password?', 'Link to the password reset page', 'Link to the password reset page')})})})]}):null,b&&(0,w.jsx)(l.xu,{marginTop:3,children:(0,w.jsx)(l.zx,{color:"primary",fullWidth:!0,onClick:this.handleSignupClick,text:n._('Sign up with this email', 'Label for sign up button', 'Label for sign up button'),type:"submit"})}),!s&&(0,w.jsx)(l.xu,{"data-test-id":"log-in-button",marginTop:4,children:(0,w.jsx)(V.Z,{color:"primary",disabled:!g||b,fullWidth:!0,onClick:this.handleLoginClick,size:"md",text:j,type:"submit"},!g||b?"disabled":"enabled")})]})})}}let X=function(e){let o=(0,p.Z)(),t=(0,m.ml)(),s=(0,q.Z)(),i=(0,d.Z)(),a=(0,g.B)();return(0,w.jsx)(K,{...e,i18n:o,isPhoneDevice:t,logContextEvent:i,requestContext:a,trackInteraction:s})};var J=t(465784),Q=t(157765);function ee({onDismiss:e}){(0,i.useEffect)(()=>{(0,s.Z)("LoginAssistanceGoogleModal","/app/www/login/duplo/LoginAssistanceGoogleModal.tsx")},[]);let o=(0,p.Z)();(0,i.useEffect)(()=>{(0,x.My)("unauth.mweb.login_assistance_google_modal.view")},[]);let t=o._('Having trouble logging in?', 'mweb.accountRecovery.loginAssistance.googleModal.heading', 'Modal heading for users who failed to login through password and are connected through Google');return(0,w.jsxs)(J.ZP,{accessibilityModalLabel:t,heading:(0,w.jsxs)(l.xu,{children:[(0,w.jsx)(l.xu,{left:!0,marginStart:6,marginTop:-10,position:"absolute",children:(0,w.jsx)(l.hU,{accessibilityLabel:o._('Dismiss modal button', 'dismiss button accessibilityLabel', 'accessibilityLabel.dismiss.link_modal'),bgColor:"transparent",icon:"close",onClick:()=>{e()},size:"sm"})}),(0,w.jsx)(l.xu,{display:"flex",justifyContent:"center",marginBottom:4,marginTop:10,children:(0,w.jsx)(l.JO,{accessibilityLabel:o._('Pinterest logo', 'Accessibility label for Pinterest icon', 'Accessibility label for Pinterest icon'),color:"primary",icon:"pinterest",size:32})}),(0,w.jsx)(l.qd,{accessibilityLevel:1,align:"center",size:"400",children:t})]}),isOpen:!0,onDismiss:e,children:[(0,w.jsx)(l.xu,{marginBottom:4,marginTop:4,paddingX:12,children:(0,w.jsx)(l.xv,{align:"center",children:o._('Looks like your account is connected to Google. Log in with Google to get back into your account.', 'mweb.accountRecovery.loginAssistance.googleModal.text', 'Modal text for users who failed to login through password and are connected through Google')})}),(0,w.jsx)(l.xu,{marginBottom:8,paddingX:14,children:(0,w.jsx)(Q.Z,{container:ee.name,google:!0})})]})}var eo=t(592094),et=t(272319),es=t(686733),ei=t(236269),ea=t(244021),en=t(363815),el=t(254889);function er({email:e,emailValidationError:o,handleChangeEmail:t,handleShowMagicLinkForm:a,isValid:r,loginOptions:c,validateEmailOnBlur:d,renderLoginButtons:_,showToast:h,signupOptions:u}){(0,i.useEffect)(()=>{(0,s.Z)("LoginFormMagicLink","/app/www/pages/duplo/LoginFormMagicLink.tsx")},[]);let g=(0,p.Z)(),m=(0,n.s0)(),f=(0,n.TH)(),[b,P]=(0,i.useState)("EMAIL_INPUT"),{checkEmailBounce:k}=(0,ea.Z)(e,"magic_link_email_send"),[v,A]=(0,i.useState)(""),[S,E]=(0,i.useState)(!1),T=g._('Sorry, this doesn\'t look like a valid email', 'mweb.mobile_login_form.magic_link_email_input.invalid_email_error', 'Error message while inputting email for magic link login'),C=async()=>{try{(0,x.My)("mweb.mobile_login_form.magic_link_email_send.request"),await (0,y.Z)({url:"/v3/users/magic_link/",method:"POST",data:{email:e}}),P("CHECK_EMAIL"),(0,x.My)("mweb.mobile_login_form.magic_link_email_send.success")}catch(t){let o=(0,ei.Z)(t,"api_error_code");(0,x.My)(`mweb.mobile_login_form.magic_link_email_send.error.${o}`),o===L.iZ?(h(({hideToast:e})=>(0,w.jsx)(j.Z,{duration:5e3,onHide:e,text:g._('This email isn\u2019t associated with a Pinterest account. Please sign up or try again', 'error.mobile_login_form_magic_link.no_user', 'Error message shown when a user tries to login and their account is not found')})),m("/signup/step1/",{state:{email:e,next:(0,U.Z)(f.search).next}})):o===L.m8?(h(({hideToast:e})=>(0,w.jsx)(j.Z,{duration:5e3,onHide:e,text:g._('Magic link isn\u2019t supported for accounts using two-factor authentication. Try another login method', 'error.mobile_login_form_magic_link.mfa_not_supported', 'Error message for magic link email login request because two-factor authentication is not supported')})),a(!1)):A((0,ei.Z)(t,"message")??g._('Something went wrong on our end, please try again', 'error.mobile_login_form_magic_link.generic', 'Generic error for magic link email login request'))}},F=async()=>{(0,x.My)("mweb.mobile_login_form.magic_link.continue_click"),(e&&(0,en.ZP)(e)||(A(T),E(!0),(0,x.My)("mweb.mobile_login_form.magic_link_email_input.regex_error"),0))&&(C(),k(()=>{h(({hideToast:e})=>(0,w.jsx)(j.Z,{duration:5e3,onHide:e,text:g._('Your email may have bounced. Please try another login method.', 'error.mobile_login_form_magic_link.email_bounced', 'Error for when the email may have bounced')}))}))};return(0,w.jsxs)(l.xu,{children:[(0,w.jsx)(el.default,{disableRedirect:!0,onTouch:()=>{"EMAIL_INPUT"===b?a(!1):"CHECK_EMAIL"===b?P("EMAIL_INPUT"):"CONTINUE_WITH_PASSWORD"===b&&P("CHECK_EMAIL")}}),(0,w.jsx)(l.xu,{marginBottom:6,children:(0,w.jsx)(l.kC,{alignItems:"center",justifyContent:"center",children:(0,w.jsx)(l.qd,{accessibilityLevel:1,overflow:"normal",size:"500",children:"CHECK_EMAIL"===b?g._('Check your email', 'loginFormMagicLink.checkEmail.heading', 'Heading for magic link check email step'):g._('Log in to Pinterest', 'loginFormMagicLink.emailInput.heading', 'Heading for magic link email input or password step')})})}),(0,w.jsx)(l.xu,{paddingX:4,children:(()=>{switch(b){case"EMAIL_INPUT":return(0,w.jsxs)(l.xu,{marginTop:3,children:[(0,w.jsx)(l.nv,{errorMessage:v||o,id:"email",onBlur:d,onChange:({value:e})=>{t({value:e}),A(""),E(!1)},placeholder:g._('Email', 'loginFormMagicLink.emailInput.placeholder', 'Placeholder text for email input on magic link login'),size:"lg",type:"email",value:e}),(0,w.jsx)(l.xu,{marginBottom:4,marginTop:4,children:(0,w.jsx)(l.zx,{color:"primary",disabled:S||!r,fullWidth:!0,onClick:F,size:"md",text:g._('Continue', 'loginFormMagicLink.emailInput.submitButton', 'Button text to submit email and proceed to check email step')})}),_({isDividerOnTop:!0,showMagicLink:!1})]});case"CHECK_EMAIL":return(0,w.jsxs)(l.xu,{marginBottom:3,children:[(0,w.jsx)(l.xu,{marginBottom:2,marginEnd:5,marginStart:5,children:(0,w.jsx)(l.xv,{align:"center",size:"200",children:(0,z.nk)(g._('Use the login link we sent to {{ email }} to log in', 'loginFormMagicLink.checkEmail.message', 'Message asking user to check their email for the login link. email: the email address where the login link was sent'),{email:e})})}),_({isDividerOnTop:!0,showMagicLink:!1,customLoginOption:(0,w.jsx)(l.xu,{marginBottom:2,children:(0,w.jsx)(es.Z,{onClick:()=>P("CONTINUE_WITH_PASSWORD")})})})]});case"CONTINUE_WITH_PASSWORD":return(0,w.jsx)(l.xu,{marginTop:3,children:c});default:return null}})()}),u]})}var ec=t(680391);let ed=function({href:e,state:o,onClick:t,children:s}){let{state:i}=(0,n.TH)(),a=(0,ec.Z)({href:{pathname:e,state:{...i,...o}}});return(0,w.jsx)(l.rU,{href:e,onClick:({event:e,dangerouslyDisableOnNavigation:o})=>{o(),t(),a({event:e})},children:s})};var e_=t(440890),eh=t(157498),eu=t(938772),eg=t(108199);function em(e,o,t){var s;return(o="symbol"==typeof(s=function(e,o){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var s=t.call(e,o||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(o,"string"))?s:s+"")in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}let ep=e=>(0,U.Z)(e.search).next||e.state&&e.state.next||"/";class ef extends i.PureComponent{constructor(...e){let o;super(...e),em(this,"state",{apiErrorCode:0,email:(o=this.props.location).state&&o.state.email||"",isLoading:!1,isValid:!1,isSsoFlow:!1,password:"",recaptchaV3Token:"default",emailValidationError:"",passwordValidationError:"",optOutFromPersonalizedForm:!1,shouldShowSignUpButton:!1,hasKeychainErrorShown:!0,showLoginRateLimitedModal:!1,showLoginAssistanceGoogleModal:!1,isSsoEmail:!1,exchangeCodeToTokenUrl:"",existingUserSso:!1,existingUserIsSso:!1,ssoAuthorizationUri:"",showInfoBanner:!1,infoBannerMessage:"",showQRAppErrorBanner:!1,showMagicLinkForm:!1}),em(this,"clearPersonalizedLoginFromEmail",e=>{let{navigate:o,location:t}=this.props;if(t.state&&t.state.userInfo){let{userInfo:s,...i}=t.state;o(e?"/":"/login",{replace:!0,state:i})}}),em(this,"onLoginClick",()=>{this.trackButtonTap(30),this.props.emailLoginOnlyForRecoverAccount&&this.props.logContextEvent({event_type:15392,component:15214,element:30})}),em(this,"onSignUpClick",()=>{let{navigate:e,location:o,isAppFactoryOAuth:t,attributionLabel:s,trackConversionUpsell:i}=this.props;this.trackButtonTap(31),i({eventType:14688,component:14215,upsellReason:s,incrementUpsellReasonCounter:!1}),e("/signup/step1/",{state:{email:this.state.email,password:this.state.password,isSignUpFromLoginError:!0,...o.state,isAppFactoryOAuth:t,attributionLabel:s}})}),em(this,"trackButtonTap",e=>{let{isAuthenticated:o,isLimitedLoginUser:t,logContextEvent:s,trackConversionUpsell:i}=this.props;s({view_type:9,element:e,event_type:102,aux_data:{...o?{login_state:t?T.Z.LIMITED:T.Z.DEFAULT}:{}}}),i({eventType:14689,element:e})}),em(this,"handleNotYouClick",()=>{this.clearPersonalizedLoginFromEmail(),this.trackButtonTap(10879),this.setState({email:"",optOutFromPersonalizedForm:!0}),(0,x.NC)("click_change_signin_account")}),em(this,"handleNoAccountClick",()=>{let{attributionLabel:e,trackConversionUpsell:o}=this.props;this.clearPersonalizedLoginFromEmail(!0),this.trackButtonTap(10880),o({eventType:14688,component:14215,upsellReason:e,incrementUpsellReasonCounter:!1,viewType:10,viewParameter:47}),(0,x.NC)("click_toggle_signup")}),em(this,"handlePasswordReset",()=>{let{navigate:e,logContextEvent:o,attributionLabel:t}=this.props,{email:s}=this.state;this.trackButtonTap(10881);let i=(0,D.a3)(s,this.emailValidators());s&&!i&&(o({event_type:51,view_type:9,view_parameter:63}),(0,y.Z)({url:"/v3/users/forgot_password/",method:"POST",data:{username_or_email:s,type:"reset"}}).then(()=>{e("/password/reset/sent/",{replace:!0,state:{destinationEmail:s,fromLogin:!0,attributionLabel:t}}),this.setState({apiErrorCode:0})}))}),em(this,"validateEmail",async({showTooltip:e})=>{let{email:o}=this.state,t=(0,D.a3)(o,this.emailValidators()),s=!t&&!this.state.passwordValidationError;s&&this.checkIfUserIsSso({isEmailPasswordValid:s}),e||s?this.setState({emailValidationError:t,isValid:s}):this.setState({isValid:s})}),em(this,"checkIfUserIsSso",async({hasInitialEmail:e,isEmailPasswordValid:o})=>{let{email:t}=this.state,{verifySsoUser:s}=this.props,i=o??this.state.isValid,{isSso:a,existingUser:n,existingUserIsSso:l,authorizationUri:r,exchangeCodeToTokenUrl:c}=await s(t),d=!!(a&&(!n||l));this.setState({exchangeCodeToTokenUrl:c??"",isSsoEmail:a,isSsoFlow:d,existingUserSso:!!n,existingUserIsSso:!!l,ssoAuthorizationUri:r??"",isValid:!!d&&!!e||i})}),em(this,"debouncedCheckIfSsoUser",(0,_.Z)(async()=>{let{email:e}=this.state;(0,D.a3)(e,this.emailValidators())||this.checkIfUserIsSso({hasInitialEmail:!1})},300)),em(this,"validatePassword",e=>{let{password:o}=this.state,t=(0,D.a3)(o,[(0,D.aH)({message:this.props.i18n._('The password you entered is incorrect.', 'Password validation error', 'Password validation error')})]),s=!t&&!this.state.emailValidationError;e||s?this.setState({passwordValidationError:t,isValid:s}):this.setState({isValid:s})}),em(this,"validateEmailOnBlur",()=>{setTimeout(()=>{this.validateEmail({showTooltip:!0})},0)}),em(this,"validatePasswordOnBlur",()=>{let{password:e}=this.state;e&&setTimeout(()=>{this.validatePassword(!0)},0)}),em(this,"emailValidators",()=>[(0,D.GT)({message:this.props.i18n._('Not a valid email.', 'Email field validation error message', 'Email field validation error message')}),(0,D.aH)({message:this.props.i18n._('You missed a spot! Don\'t forget to add your email.', 'Email validation error', 'Email validation error')})]),em(this,"getSoftBannedErrorMsg",()=>{let{i18n:e}=this.props;return(0,w.jsx)(l.xv,{color:"error",size:"200",children:(0,z.nk)(e._('We noticed some strange activity on your account. {{ resetPasswordLink }} or log in with Facebook or Google to get back into your account.', 'duplo.loginForm.softBanned.errorMessage', 'Error message when user is soft banned, resetPasswordLink: link to reset password flow with text \'Reset your password\''),{resetPasswordLink:(0,w.jsx)(l.xu,{display:"inlineBlock",children:(0,w.jsx)(l.iP,{onTap:this.handlePasswordReset,children:(0,w.jsx)(l.xv,{inline:!0,underline:!0,children:e._('Reset your password', 'duplo.loginForm.SoftBanned.passwordReset', 'Link text for password reset')},"err_reset_link")})})})},"err_text")}),em(this,"handleChangeEmail",({value:e})=>{this.setState({email:e,shouldShowSignUpButton:!1,hasKeychainErrorShown:!0,isSsoEmail:!1,isSsoFlow:!1,showInfoBanner:!1},()=>{this.validateEmail({}),this.debouncedCheckIfSsoUser()})}),em(this,"handleChangePassword",({value:e})=>this.setState({password:e,hasKeychainErrorShown:!0},this.validatePassword)),em(this,"handleLoginFailure",e=>{if(e.isArkoseChallengeRequired)return void this.setState({isLoading:!1});let{showToast:o,i18n:t,checkExperiment:s}=this.props,{email:i}=this.state,a=e.api_error_code===L.yV||e.api_error_code===L.$j,n={},l=e.api_error_code===L.oP||e.message?{passwordValidationError:e.message}:{};if(a)l={passwordValidationError:this.getSoftBannedErrorMsg()};else if(e.api_error_code===L.q1){(0,x.My)("unauth.mweb.login_form.error.invalid_password_google_user");let e=s("mweb_unauth_assist_google_connected_users",{dangerouslySkipActivation:!0}).group.includes("banner");e&&(n={showInfoBanner:!0,infoBannerMessage:t._('Looks like your account is connected to Google. Use Google button to log in', 'mweb.unauth.loginForm.badPassword.googleConnected.bannerMessage', 'A banner message that directs the user to login using the Google sign-in button')}),l={passwordValidationError:t._('The password you entered is incorrect.', 'mweb.unauth.loginForm.badPassword.googleConnected.passwordError', 'An error message under the password input field warning the user that they inputted a bad password'),showLoginAssistanceGoogleModal:!e}}else e.api_error_code===L.nY&&e.message?(o(({hideToast:o})=>(0,w.jsx)(j.Z,{onHide:o,text:e.message||""})),l={}):e.api_error_code===L.hU?l=i?{emailValidationError:e.message,shouldShowSignUpButton:!0}:{emailValidationError:e.message}:null!==e.api_error_code&&void 0!==e.api_error_code&&L.ik.includes(e.api_error_code)&&(l={emailValidationError:"",showLoginRateLimitedModal:!0});this.setState({isLoading:!1,apiErrorCode:e.api_error_code||0,...l,...n}),(0,B.rY)(e=>this.setState({recaptchaV3Token:e}),()=>{},B.xW)}),em(this,"handleLogin",e=>{let{fingerprintData:o}=this.props;o&&!o.current.submitTriggeredTime&&(o.current.submitTriggeredTime=performance.now()),e&&e.preventDefault();let{navigate:t,location:s,login:i,showToast:a,isAuthenticated:n,isLimitedLoginUser:l,isSwitchAccount:r,noImmediateRedirect:c,attributionLabel:d}=this.props,{email:_,password:h,recaptchaV3Token:u}=this.state,{authenticateWithSso:g}=this.props,{isSsoEmail:m,exchangeCodeToTokenUrl:p,existingUserSso:f,existingUserIsSso:b,ssoAuthorizationUri:P}=this.state;if(m){if(!f)return void this.props.navigate("/signup/step1/",{state:{email:this.state.email,isSignUpFromLoginError:!1,...s.state,attributionLabel:d}});else if(b){this.trackButtonTap(14367),g({callbacks:{success:e=>{let{authCode:o,state:a}=e;_&&o&&(this.setState({isLoading:!0}),i({sso_user_email:_,sso_auth_code:o,sso_state:a},t,ep(s),{isSwitchAccount:r,recaptchaV3Token:u,noImmediateRedirect:c,component:ef.name,container:this.props.container},{event_type:7534,view_type:9,view_parameter:63,aux_data:{...n?{login_state:l?T.Z.LIMITED:T.Z.DEFAULT}:{},signup_login_method:C.Z.SSO,upsell_reason:d}}).catch(e=>{(0,x.My)("unauth.mweb.login.sso.login.error",{code:e.api_error_code,message:e.message}),this.handleLoginFailure(e)}))},error:e=>{(0,x.My)("unauth.mweb.login.sso.autheticateWithSso.error",{code:e.api_error_code,message:e.message}),this.setState({isLoading:!1}),e.message&&a(({hideToast:o})=>(0,w.jsx)(j.Z,{onHide:o,text:e.message||""}))}},exchangeCodeToTokenUrl:p,isLogin:!0,modalUrl:P??""});return}}i({username_or_email:_,password:h},t,ep(s),{isSwitchAccount:r,recaptchaV3Token:u,noImmediateRedirect:c,fingerprintData:o,component:ef.name,container:this.props.container},{event_type:7534,view_type:9,view_parameter:63,aux_data:{...n?{login_state:l?T.Z.LIMITED:T.Z.DEFAULT}:{},signup_login_method:C.Z.EMAIL,upsell_reason:d}}).catch(e=>this.handleLoginFailure(e)),this.setState({isLoading:!0})}),em(this,"handleShowMagicLinkForm",e=>{this.setState({showMagicLinkForm:e??!0})}),em(this,"renderPersonalizedLogin",(e,o)=>{let{isAppFactoryOAuth:t,location:s,noImmediateRedirect:a,attributionLabel:n,emailLoginOnlyForRecoverAccount:r,onForgetPasswordForFacebookRecover:c,lookedupEmail:d}=this.props,{emailValidationError:_,passwordValidationError:h,isSsoFlow:u,isValid:g,password:m,shouldShowSignUpButton:p}=this.state,{connectedToFacebook:f,connectedToGoogle:x,email:b,firstName:P,hasPassword:k,avatarSrc:v}={connectedToFacebook:e.connected_to_facebook,connectedToGoogle:e.connected_to_google||!!e.gplus_url,email:e.email,firstName:e.first_name,hasPassword:e.has_password,avatarSrc:e.image_medium_url||e.medium_image_url||""},y=!!s.state&&!!s.state.userInfo,j=!k&&!f&&!x,S=k||j,E=x||j,L=S&&(f||j||E)&&!u,T=P?(0,z.nk)(this.props.i18n._('Welcome back, {{name}}!', 'Heading on personalized login page, followed by user\'s name', 'Heading on personalized login page, followed by user\'s name'),{name:P}):this.props.i18n._('Welcome back!', 'Welcome message on user login page', 'Welcome message on user login page'),C=()=>S&&(0,w.jsx)(X,{email:(b??"")||(d??""),emailLoginOnlyForRecoverAccount:r,emailValidationError:_,handleChangeEmail:this.handleChangeEmail,handleChangePassword:this.handleChangePassword,handlePasswordReset:this.handlePasswordReset,hideEmailField:!1,isSsoFlow:u,isValid:g,onForgetPasswordForFacebookRecover:c,onLoginClick:this.onLoginClick,onSignUpClick:this.onSignUpClick,onSubmit:this.handleLogin,password:m,passwordValidationError:h,shouldShowSignUpButton:p,showEmailAsText:!0,validateEmailOnBlur:this.validateEmailOnBlur,validatePasswordOnBlur:this.validatePasswordOnBlur}),F=()=>(0,w.jsx)(Q.Z,{attributionLabel:n,container:ef.name,google:E,line:j,magicLink:o,next:ep(s),noImmediateRedirect:a,onMagicLinkTap:()=>this.handleShowMagicLinkForm(!0),phoneNumber:!0});return(0,w.jsxs)(i.Fragment,{children:[y&&(0,w.jsx)(el.default,{}),(0,w.jsxs)(i.Fragment,{children:[(0,w.jsxs)(l.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",marginBottom:S?-3:5,marginTop:5,children:[(0,w.jsx)(l.kC,{alignItems:"stretch",justifyContent:"center",children:(0,w.jsx)(l.qd,{accessibilityLevel:1,overflow:"normal",size:"400",children:T})}),(0,w.jsx)(l.xu,{marginBottom:3,marginTop:3,children:(0,w.jsx)(A.qE,{name:P||"",size:"lg",src:v})}),!S&&(0,w.jsx)(l.xu,{children:(0,w.jsx)(l.xv,{align:"center",children:b})})]}),(0,w.jsxs)(l.xu,{marginBottom:6,marginEnd:"auto",marginStart:"auto",marginTop:3,maxWidth:400,children:[C(),L&&(0,w.jsx)(l.xu,{marginBottom:3,marginTop:3,children:(0,w.jsx)(l.xv,{align:"center",size:"100",weight:"bold",children:this.props.i18n._('OR', 'Separator for email login button and social login button', 'Separator for email login button and social login button')})}),!u&&F()]})]}),(0,w.jsxs)(l.xu,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"center",marginTop:2,children:[(0,w.jsxs)(l.xu,{alignItems:"start","data-test-id":"login-switch-account",direction:"row",display:"flex",justifyContent:"center",wrap:!0,children:[(0,w.jsx)(l.xu,{marginEnd:1,children:(0,w.jsx)(l.xv,{align:"center",inline:!0,children:this.props.i18n._('Not you?', 'Short message on the bottom of the login modal that prompts a user to log in to a different account', 'Short message on the bottom of the login modal that prompts a user to log in to a different account')})}),(0,w.jsx)(l.xv,{color:"default",inline:!0,weight:"bold",children:(0,w.jsx)(ed,{href:`/login/${s.search||""}`,onClick:this.handleNotYouClick,children:this.props.i18n._('Log in with a different account', 'Short message on the bottom of the login modal that prompts a user to log in to a different account', 'Short message on the bottom of the login modal that prompts a user to log in to a different account')})})]}),(0,w.jsxs)(l.xu,{display:"flex",justifyContent:"center",marginTop:4,children:[(0,w.jsx)(l.xu,{"data-test-id":"signup-modal-personalized",marginEnd:1,children:(0,w.jsx)(l.xv,{children:this.props.i18n._('No Account?', 'Prompt for signing up', 'Prompt for signing up')})}),(0,w.jsx)(l.xv,{color:"default",weight:"bold",children:(0,w.jsx)(ed,{href:"/signup/step1/",onClick:this.handleNoAccountClick,state:{...s.state,isAppFactoryOAuth:t,attributionLabel:n},children:this.props.i18n._('Sign up', 'Prompt for signing up', 'Prompt for signing up')})})]})]})]})}),em(this,"renderLoginButtons",({isDividerOnTop:e,showMagicLink:o,customLoginOption:t})=>{if(this.state.isSsoFlow)return null;let{isAppFactoryOAuth:s,isBeforeHydration:i,location:a,noImmediateRedirect:n,attributionLabel:r,i18n:d}=this.props,_=(0,M.M0)().getItem(c.TB),h=(0,w.jsx)(Q.Z,{apple:!i&&!!_||s,attributionLabel:r,container:ef.name,google:!0,line:!0,magicLink:o,next:ep(a),noImmediateRedirect:n,onMagicLinkTap:()=>this.handleShowMagicLinkForm(!0),phoneNumber:!0}),u=(0,w.jsx)(l.xu,{marginBottom:2*!!e,marginTop:2*!e,children:(0,w.jsx)(l.xv,{align:"center",size:"200",weight:"bold",children:d._('OR', 'Separator for email login button and social login button', 'Separator for email login button and social login button')})});return e?(0,w.jsxs)(l.xu,{children:[u,t,h]}):(0,w.jsxs)(l.xu,{children:[t,h,u]})}),em(this,"renderInfoBanner",()=>{let{infoBannerMessage:e}=this.state,{i18n:o}=this.props;return(0,w.jsxs)(l.xu,{alignItems:"center",color:"infoWeak",direction:"row",display:"flex",paddingX:4,paddingY:4,rounding:400,children:[(0,w.jsx)(l.xu,{marginEnd:4,children:(0,w.jsx)(l.JO,{accessibilityLabel:o._('Info icon on the login form info banner', 'mweb.unauth.loginForm.infoBanner.icon', 'Info icon on the login form info banner'),color:"info",icon:"circle-information",size:20})}),(0,w.jsx)(l.xv,{inline:!0,children:e})]})})}componentDidMount(){let{navigate:e,location:o,showToast:t}=this.props;if(o.state&&o.state.shouldShowAccountExistsToast&&(t(({hideToast:e})=>(0,w.jsx)(j.Z,{onHide:e,text:this.props.i18n._('Looks like you already have a Pinterest account. Please log in.', 'Toast showing that a user already has a Pinterest account and can login normally', 'Toast showing that a user already has a Pinterest account and can login normally')})),o.state)){let{shouldShowAccountExistsToast:t,...s}=o.state;e("/login/",{replace:!0,state:s})}(0,U.Z)(o.search).message===S.R&&t(({hideToast:e})=>(0,w.jsx)(j.Z,{duration:S.Jl,onHide:e,text:(0,E.Z)(this.props.i18n,o)}));let s=()=>{(0,B.rY)(e=>this.setState({recaptchaV3Token:e}),()=>{},B.xW)};if(s(),setInterval(s,B.yc),o.state&&o.state.keychainiOSAutologinError){let e=o.state.keychainiOSAutologinError,t=e.code,s=t===L.hU?{emailValidationError:e.message}:{passwordValidationError:e.message};this.setState({apiErrorCode:t,hasKeychainErrorShown:!1,...s})}o.state?.userInfo?.email&&this.checkIfUserIsSso({hasInitialEmail:!0})}static getDerivedStateFromProps(e,o){let{isAuthenticated:t,isLimitedLoginUser:s,location:i,loggedOutUserInfo:a,viewingUser:n,navigate:l}=e;return(0,U.Z)(i.search).show_qr_app_error?(l("/login/",{replace:!0}),{showQRAppErrorBanner:!0}):i.state&&i.state.userInfo?{email:i.state.userInfo.email}:t||!a||o.optOutFromPersonalizedForm?s&&n&&!o.optOutFromPersonalizedForm?{email:n.email}:null:{email:a.email}}render(){let{isLimitedLoginUser:e,location:o,loggedOutUserInfo:t,isAppFactoryOAuth:s,viewingUser:a,showPLPBanner:n,plpBannerPin:r,i18n:c,showKeychainError:d,attributionLabel:_,checkExperiment:h,emailLoginOnlyForRecoverAccount:u,onForgetPasswordForFacebookRecover:g,lookedupEmail:m,isLoadingFingerprintContext:p,showToast:f}=this.props,x=h("mweb_unauth_magic_link_login").anyEnabled,b=o.state&&o.state.shouldShowLoginBelow||x||!1,{apiErrorCode:P,email:y,emailValidationError:A,passwordValidationError:j,isLoading:z,isSsoFlow:S,isValid:E,optOutFromPersonalizedForm:T,password:C,shouldShowSignUpButton:F,hasKeychainErrorShown:I,showLoginRateLimitedModal:B,showLoginAssistanceGoogleModal:M,showInfoBanner:Z,infoBannerMessage:O,showQRAppErrorBanner:R,showMagicLinkForm:D}=this.state,W=e?a:t;o.state&&o.state.userInfo&&(W=o.state.userInfo);let N=h("mweb_unauth_deprecation_fb_banner_iteration").anyEnabled,V=P>0&&P===L.nf,G=e=>(0,w.jsxs)(i.Fragment,{children:[!b&&!u&&this.renderLoginButtons({isDividerOnTop:b,showMagicLink:e}),(0,w.jsx)(X,{email:y||(m??""),emailLoginOnlyForRecoverAccount:u??!1,emailValidationError:A,handleChangeEmail:this.handleChangeEmail,handleChangePassword:this.handleChangePassword,handlePasswordReset:this.handlePasswordReset,isSIWAError:V,isSsoFlow:S,isValid:E,onForgetPasswordForFacebookRecover:g,onLoginClick:this.onLoginClick,onSignUpClick:this.onSignUpClick,onSubmit:this.handleLogin,password:C,passwordValidationError:j,shouldShowSignUpButton:F,validateEmailOnBlur:this.validateEmailOnBlur,validatePasswordOnBlur:this.validatePasswordOnBlur}),b&&!u&&this.renderLoginButtons({isDividerOnTop:b,showMagicLink:e})]}),q=(0,w.jsxs)(l.xu,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"center",marginTop:2,children:[(0,w.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"center",children:[(0,w.jsx)(l.xu,{"data-test-id":"signup-link",marginEnd:1,children:(0,w.jsx)(l.xv,{children:c._('No Account?', 'Prompt for signing up', 'Prompt for signing up')})}),(0,w.jsx)(l.xv,{color:"default",weight:"bold",children:(0,w.jsx)(ed,{href:"/signup/step1/",onClick:this.handleNoAccountClick,state:{email:y,isAppFactoryOAuth:s,next:(0,U.Z)(o.search).next,attributionLabel:_},children:c._('Sign up', 'Prompt for signing up', 'Prompt for signing up')})})]}),!s&&(0,w.jsx)(eu.Z,{})]});if(D)return(0,w.jsx)(er,{email:y,emailValidationError:A,handleChangeEmail:this.handleChangeEmail,handleShowMagicLinkForm:this.handleShowMagicLinkForm,isValid:E,loginOptions:G(!1),renderLoginButtons:this.renderLoginButtons,showToast:f,signupOptions:q,validateEmailOnBlur:this.validateEmailOnBlur});let Y=(0,w.jsxs)(i.Fragment,{children:[(N||x)&&!D&&!u&&(0,w.jsx)(l.xu,{marginBottom:6,marginTop:6,children:(0,w.jsx)(l.kC,{alignItems:"stretch",justifyContent:"center",children:(0,w.jsx)(l.qd,{accessibilityLevel:1,overflow:"normal",size:"500",children:c._('Log in to Pinterest', 'loginForm.header.title', 'Main heading displayed at the top of the login page when Facebook deprecation banner is shown')})})}),(0,w.jsxs)(l.xu,{"data-test-id":"duplo-login-form",marginBottom:6,marginEnd:"auto",marginStart:"auto",marginTop:3,maxWidth:400,children:[G(x),N&&!u&&(0,w.jsx)(v,{})]}),!u&&q]});return d?(0,w.jsxs)(i.Fragment,{children:[(0,w.jsxs)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(230, 0, 35, 0.08)",transition:"transform 400ms ease-in-out",transform:I?"translateY(-120%)":"translateY(0%)"}},display:"flex",height:52,justifyContent:"center",children:[(0,w.jsx)(l.qb,{accessibilityLabel:c._('Workflow status problem accessibility label', 'mweb.unauth.keychain_autologin.login_page.error_message.icon', 'Accessibility label for error message icon'),type:"problem"}),(0,w.jsx)(l.xu,{marginStart:2,children:(0,w.jsx)(l.xv,{color:"default",children:c._('Oops! We couldn\'t log you in', 'mweb.unauth.keychain_autologin.login_page.error_message', 'Error message to let user know there was an issue logging them in')})})]}),(0,w.jsxs)(l.xu,{paddingX:4*!!n,children:[W&&!T?this.renderPersonalizedLogin(W,x):Y,(z||p)&&(0,w.jsx)(H.Z,{})]})]}):(0,w.jsxs)(i.Fragment,{children:[B&&(0,w.jsx)(eo.Z,{onDismiss:()=>this.setState({showLoginRateLimitedModal:!1})}),M&&(0,w.jsx)(ee,{onDismiss:()=>this.setState({showLoginAssistanceGoogleModal:!1})}),!u&&!N&&(0,w.jsx)(k,{}),R&&(0,w.jsx)(et.default,{}),Z&&O&&this.renderInfoBanner(),n&&r&&(0,w.jsx)(eg.Z,{pin:r}),(0,w.jsxs)(l.xu,{paddingX:4*!!n,children:[W&&!T?this.renderPersonalizedLogin(W,x):Y,(z||p)&&(0,w.jsx)(H.Z,{})]})]})}}function ex(e){(0,i.useEffect)(()=>{(0,s.Z)("LoginForm","/app/www/pages/duplo/LoginForm.tsx")},[]);let o=(0,p.Z)(),t=(0,n.s0)(),l=(0,n.TH)(),c=(0,a.I0)(),_=(0,e_.f)(),{showToast:h}=(0,O.dI)(),{isAuthenticated:u,loggedOutUserInfo:m}=(0,a.v9)(e=>e.session),f=(0,eh.LO)(),x=(0,d.Z)(),P=(0,R.Z)(),{trackConversionUpsell:k}=(0,Z.Z)(),v=(0,g.B)(),{authenticateWithSso:y,verifySsoUser:A}=(0,F.ZP)(),{checkExperiment:j}=(0,I.Z)(),{fingerprintData:z,setupFingerprintSdks:S,isLoadingFingerprintContext:E}=(0,r.f)()??{isLoadingFingerprintContext:!1};return(0,b.Z)(()=>{S?.()}),(0,w.jsx)(ef,{...e,attributionLabel:l.state?.attributionLabel,authenticateWithSso:y,checkExperiment:j,dispatch:c,fingerprintData:z,i18n:o,isAuthenticated:u,isBeforeHydration:P,isLimitedLoginUser:(0,W.xT)(f),isLoadingFingerprintContext:E,location:l,logContextEvent:x,loggedOutUserInfo:m,login:_,navigate:t,requestContext:v,showToast:h,trackConversionUpsell:k,verifySsoUser:A,viewingUser:f})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/1554-007cb3cb29b71e0d.mjs.map