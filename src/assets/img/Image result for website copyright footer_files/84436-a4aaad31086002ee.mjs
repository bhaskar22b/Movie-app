(self.modernJsonp=self.modernJsonp||[]).push([["84436"],{248894:function(e,a,t){var n;t.r(a),t.d(a,{default:()=>l});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardAttribution_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[n={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="610a35d46510240eb58e262c1909310c";let l=i},981838:function(e,a,t){var n,i,l;t.r(a),t.d(a,{default:()=>s});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardBody_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"lastRepinDate",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[l={alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,concreteType:"ParsedIngredientMetadata",kind:"LinkedField",name:"ingredients",plural:!0,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"amt",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null},{args:null,kind:"FragmentSpread",name:"RecipeMetadata_recipe"}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null}],storageKey:null},n,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},l,{args:null,kind:"FragmentSpread",name:"usePinImageUrls_pin"},{args:null,kind:"FragmentSpread",name:"useNormalizePinData_pin"},{args:null,kind:"FragmentSpread",name:"BestPinCardAttribution_pin"}],type:"Pin",abstractKey:null};r.hash="81db65fd15680cc0281b801ed4a8cb94";let s=r},258138:function(e,a,t){t.r(a),t.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"Descriptors_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null}],type:"Pin",abstractKey:null};n.hash="9d15639e8d9dd61426917dc218fbb3a6";let i=n},85729:function(e,a,t){t.r(a),t.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightSpotlightDots_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};n.hash="3a8409077905af94eb39568e4a5a57fc";let i=n},781323:function(e,a,t){t.r(a),t.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"OneBar_oneBarModules",selections:[{alias:"entityId",args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"OneBarModule_oneBarModules"}],type:"OneBarModule",abstractKey:null};n.hash="45cea1099e24f55ebce4abebdb411447";let i=n},426344:function(e,a,t){var n;t.r(a),t.d(a,{default:()=>l});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RecipeMetadata_recipe",selections:[{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"bestRating",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTimes",kind:"LinkedField",name:"cookTimes",plural:!1,selections:[{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"cook",plural:!1,selections:n=[{alias:null,args:null,kind:"ScalarField",name:"m",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"prep",plural:!1,selections:n,storageKey:null}],storageKey:null}],type:"RecipeMetadata",abstractKey:null};i.hash="12f77507a9fdec344b44b7e659fa5ac1";let l=i},447963:function(e,a,t){t.r(a),t.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsImageContent_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{args:null,kind:"FragmentSpread",name:"Descriptors_pin"},{args:null,kind:"FragmentSpread",name:"VisualSearchCropper_pin"}],type:"Pin",abstractKey:null};n.hash="727c8ab2c1c256e3b4478a36890f92d6";let i=n},579174:function(e,a,t){var n,i,l,r,s,o,d,u;t.r(a),t.d(a,{default:()=>p});let c=(n=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],i=[{kind:"Variable",name:"pin",variableName:"pinId"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r=[{kind:"Literal",name:"spec",value:"564x"}],u=[s={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"RelatedProductsPageQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l,{args:null,kind:"FragmentSpread",name:"RelatedProductsPage_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"RelatedProductsPageQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:"image",args:r,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[s,o,d],storageKey:'images(spec:"564x")'},{alias:"images_564x",args:r,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:u,storageKey:'images(spec:"564x")'},{alias:"images_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:u,storageKey:'images(spec:"736x")'},{alias:"images_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:u,storageKey:'images(spec:"orig")'},{alias:"images_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:u,storageKey:'images(spec:"474x")'},{alias:"images_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:u,storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"b5501bff91fa6a8188c709de27c033e70ef44c5d628e224dff32440e67cc1aed",metadata:{},name:"RelatedProductsPageQuery",operationKind:"query",text:null}});c.hash="0f7b98a1f02dbf8528df0452aa26efd4";let p=c},271128:function(e,a,t){t.r(a),t.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsPage_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchPageWithPinData_pin"}],type:"Pin",abstractKey:null};n.hash="91d05676e413b7b47653c2f8fa609093";let i=n},895622:function(e,a,t){t.r(a),t.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsUnifiedFeed_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchMasonryGrid_pin"}],type:"Pin",abstractKey:null};n.hash="20c2c7f4ff982fb93a9608faa14f3ed2";let i=n},60899:function(e,a,t){t.r(a),t.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnauthCropperContainer_pin",selections:[{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"FlashlightSpotlightDots_pin"}],type:"Pin",abstractKey:null};n.hash="939d46d8644385a7918ed8179ce77a4c";let i=n},854734:function(e,a,t){var n,i,l,r,s,o,d,u,c,p,g,h,m,y,f,x,_,v,k,S,w,b,P,F,j,C,T,I;t.r(a),t.d(a,{default:()=>M});let Z=(n={defaultValue:!1,kind:"LocalArgument",name:"isCloseupRelatedModulesFeedQuery"},i={defaultValue:null,kind:"LocalArgument",name:"pinId"},l=[{kind:"Variable",name:"pin",variableName:"pinId"}],r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},d=[{kind:"Literal",name:"spec",value:"564x"}],g=[{kind:"Literal",name:"spec",value:"736x"}],h=[p={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],m=[{kind:"Literal",name:"spec",value:"474x"}],y=[{kind:"Literal",name:"spec",value:"236x"}],f={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},_=[{alias:null,args:null,kind:"ScalarField",name:"m",storageKey:null}],k={alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:v=[r],storageKey:null},S={alias:"images_236x",args:y,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:v,storageKey:'additionalImagesPerSpec(spec:"236x")'},w={alias:"images_474x",args:m,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:v,storageKey:'additionalImagesPerSpec(spec:"474x")'},b={alias:"images_564x",args:d,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:v,storageKey:'additionalImagesPerSpec(spec:"564x")'},P={alias:"images_736x",args:g,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:v,storageKey:'additionalImagesPerSpec(spec:"736x")'},F={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},I=[c],{fragment:{argumentDefinitions:[n,i],kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:l,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"UnauthDesktopFlashlightPageFetchData_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[i,n],kind:"Operation",name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:l,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},s,{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},o],storageKey:null},{alias:"images_564x",args:d,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[u,c,p],storageKey:'images(spec:"564x")'},{alias:"images_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[u,c,p,r],storageKey:'images(spec:"orig")'},{alias:"images_736x",args:g,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:h,storageKey:'images(spec:"736x")'},{alias:"images_474x",args:m,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:h,storageKey:'images(spec:"474x")'},{alias:"images_236x",args:y,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:h,storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"lastRepinDate",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},s,o,{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[f,{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[x,{alias:null,args:null,concreteType:"ParsedIngredientMetadata",kind:"LinkedField",name:"ingredients",plural:!0,selections:[f,{alias:null,args:null,kind:"ScalarField",name:"amt",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null},{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"bestRating",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTimes",kind:"LinkedField",name:"cookTimes",plural:!1,selections:[{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"cook",plural:!1,selections:_,storageKey:null},{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"prep",plural:!1,selections:_,storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[r,f,k],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[f,k,{alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"itemSetId",storageKey:null},S,w,b,P],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[F,j,C],storageKey:null},o,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null},C,r],storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null}],storageKey:null},T,{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},x,{alias:"images_60x60",args:[{kind:"Literal",name:"spec",value:"60x60"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:I,storageKey:'images(spec:"60x60")'},{alias:"images_136x136",args:[{kind:"Literal",name:"spec",value:"136x136"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:I,storageKey:'images(spec:"136x136")'},{alias:"images_170x",args:[{kind:"Literal",name:"spec",value:"170x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:I,storageKey:'images(spec:"170x")'},{alias:"images_600x315",args:[{kind:"Literal",name:"spec",value:"600x315"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:I,storageKey:'images(spec:"600x315")'},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[T,f,{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},c,C],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[T,j,{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null},F,C],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isOosProduct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStaleProduct",storageKey:null},{condition:"isCloseupRelatedModulesFeedQuery",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"signature",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ShippingInfo",kind:"LinkedField",name:"shippingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"freeShippingPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"freeShippingValue",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"DimensionMetadata",kind:"LinkedField",name:"dimensionMetadata",plural:!0,selections:[f,{alias:null,args:null,kind:"ScalarField",name:"values",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:v,storageKey:null}],storageKey:null},S,w,b,P],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductMetadataV2",kind:"LinkedField",name:"productPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"ItemMetadata",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"additionalImagesLength",storageKey:null}],storageKey:null},C],storageKey:null}]},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:v,storageKey:null},C],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shoppingFlags",storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null},C],storageKey:null},C],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"fb550a7903e1c94dab6ed839ac53e7e4c46758b281730d89dc05a524e3e0ae23",metadata:{},name:"UnauthDesktopFlashlightPageFetchDataPinQuery",operationKind:"query",text:null}});Z.hash="76ab21d7bfe8df8a1418aea805bb41fa";let M=Z},887492:function(e,a,t){t.r(a),t.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPageFetchData_pin",selections:[{args:null,kind:"FragmentSpread",name:"UnauthDesktopFlashlightPage_pin"}],type:"Pin",abstractKey:null};n.hash="01839fc3bcd9cdaf206873364167d157";let i=n},136209:function(e,a,t){var n;t.r(a),t.d(a,{default:()=>l});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPage_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null}],storageKey:null},{alias:"images_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n=[{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"images_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"orig")'},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"BestPinCardBody_pin"},{args:null,kind:"FragmentSpread",name:"UnauthCropperContainer_pin"}],type:"Pin",abstractKey:null};i.hash="0193da1983487c7c302a6a09a3f34b0a";let l=i},292297:function(e,a,t){t.r(a),t.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchCarousel_story",selections:[{alias:null,args:null,concreteType:"StoryAction",kind:"LinkedField",name:"action",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"contentIds",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"objects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:"storyId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{args:null,kind:"FragmentSpread",name:"CSSCarouselModule_story"}],type:"Story",abstractKey:null};n.hash="b1061aefab46af37d4c9716916386af2";let i=n},441370:function(e,a,t){t.r(a),t.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchContainer_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsImageContent_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsUnifiedFeed_pin"}],type:"Pin",abstractKey:null};n.hash="3a9a747c3135f426fe0cf32ca9147a5d";let i=n},911486:function(e,a,t){t.r(a),t.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchCropper_pin",selections:[{alias:"image",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"564x")'},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"useSamSegmentation_pin"}],type:"Pin",abstractKey:null};n.hash="fbf2d3b93402a9dd783073db316c0f92";let i=n},97004:function(e,a,t){t.r(a),t.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchImageContainer_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:"image",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"564x")'},{args:null,kind:"FragmentSpread",name:"VisualSearchCropper_pin"},{args:null,kind:"FragmentSpread",name:"Descriptors_pin"}],type:"Pin",abstractKey:null};n.hash="8250aa2ed9c603023c2f2a226d0b9fbb";let i=n},716635:function(e,a,t){t.r(a),t.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchLayout_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchImageContainer_pin"}],type:"Pin",abstractKey:null};n.hash="3c3f391c3bf9eec79c18ed9a3fe63800";let i=n},261717:function(e,a,t){t.r(a),t.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchPageWithPinData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:"image",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"564x")'},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"VisualSearchContainer_pin"},{args:null,kind:"FragmentSpread",name:"VisualSearchLayout_pin"}],type:"Pin",abstractKey:null};n.hash="ece11b62e2de551b92d24a2389316249";let i=n},33653:function(e,a,t){var n;t.r(a),t.d(a,{default:()=>l});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetNormalizedPinImage_pin",selections:[{alias:"images_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"images_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"736x")'},{alias:"images_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"orig")'},{alias:"images_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"474x")'},{alias:"images_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"236x")'}],type:"Pin",abstractKey:null};i.hash="8b6ce790922ff8b900b4ae18b06b7c11";let l=i},719962:function(e,a,t){var n;t.r(a),t.d(a,{default:()=>l});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useNormalizePinData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:"images_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:n=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:n,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null}],type:"Pin",abstractKey:null};i.hash="830edb300e7c7867cd6df7ec2716d975";let l=i},423540:function(e,a,t){t.r(a),t.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useSamSegmentation_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};n.hash="50c726067ab8af873ed4afded90b7bed";let i=n},17667:function(e,a,t){t.r(a),t.d(a,{default:()=>v});var n,i=t(686659),l=t(667294),r=t(167912),s=t(312048),o=t(391995),d=t(938545),u=t(996822),c=t(146178),p=t(562400),g=t(24246),h=t(609252),m=t(936367),y=t(774838),f=t(902123),x=t(785893);let _=(void 0!==n||(n=t(781323)).hash&&"45cea1099e24f55ebce4abebdb411447"!==n.hash&&console.error("The definition of 'OneBar_oneBarModules' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function v({center:e=!1,hasProductFiltersApplied:a,hrefOverride:t,itemHeight:n=d.Lu,marginBottom:v=d.JC,oneBarModulesKey:k,oneBarModulesRest:S,onFilterButtonClick:w,paddingBottom:b=d.uS,paddingX:P=d.jf,variant:F,viewParameter:j,viewType:C}){(0,l.useEffect)(()=>{(0,i.Z)("OneBar","/app/common/react/components/OneBar/OneBar.tsx")},[]);let T=(0,l.useRef)(null),I=T.current?.firstElementChild?.firstElementChild?.firstElementChild,[Z,M]=(0,l.useState)(0),[K,E]=(0,l.useState)(0),[L,D]=(0,l.useState)(!1),[R,A]=(0,l.useState)(!1),[z,$]=(0,l.useState)(0),O=(0,s.TH)(),H=(0,g.Z)(),{isRTL:U}=(0,y.B)(),B=(0,l.useRef)(!1),N=new m.ZP,W=(0,r.useFragment)(_,k),V=W&&[W]||S,Y=e&&(I?.clientWidth||0)>=(I?.scrollWidth||0);(0,l.useEffect)(()=>{let e=e=>{"Tab"===e.key&&(B.current=!1)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]),(0,l.useEffect)(()=>{M(0)},[O]),(0,l.useEffect)(()=>{E(I?.clientWidth||0);let e=(0,p.Z)(()=>{E(I?.clientWidth||0)},100,{maxWait:200});return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[I]),(0,l.useEffect)(()=>{let e=T.current;return e&&h.Z.addObstruction("top",e),()=>{e&&h.Z.removeObstruction("top",e)}}),(0,l.useEffect)(()=>{let e=I?.scrollWidth||0,a=0;for(let e=0;e<Z;e+=1)a+=I?.children[e]?.offsetWidth||0;let t=e-a,n=K>=e;n&&M(0),D(Z>0&&!n),A(t>K&&Z<V.length&&!n),$(a)},[I,Z,V.length,K,z,U]);let G=()=>{Z+3<V.length?M(Z+3):M(V.length-1)},X=()=>{Z-3>=0?M(Z-3):M(0)},q=(0,l.useRef)(null),{isFiltersDrawerFocused:J}=(0,u.e)()||{isFiltersDrawerFocused:!1},[Q,ee]=(0,l.useState)(J);return(0,l.useEffect)(()=>{!J&&Q&&q.current?.focus(),ee(J)},[J,Q]),V.length>0&&(0,x.jsx)(f.q,{children:({hovered:e,onMouseEnter:i,onMouseLeave:l})=>(0,x.jsxs)(o.xu,{ref:T,color:"default",dangerouslySetInlineStyle:{__style:{paddingBottom:b}},"data-root-margin":"search-one-bar","data-test-id":"scrollable-one-bar-root",marginBottom:v,onMouseEnter:i,onMouseLeave:l,position:"relative",children:[(0,x.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{overflowX:"clip"}},paddingX:P,position:"relative",children:(0,x.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{[U?"right":"left"]:`-${z}px`,transition:"left 0.3s, right 0.3s"}},position:"relative",children:(0,x.jsx)(o.kC,{alignItems:"center",gap:{row:2,column:0},height:n,justifyContent:Y?"center":void 0,children:V.map((e,n)=>(0,x.jsx)(o.xu,{ref:1===n?q:void 0,onFocus:()=>{B.current||M(n)},onMouseDown:()=>B.current=!0,tabIndex:1===n?-1:void 0,children:(0,x.jsx)(c.Z,{hasProductFiltersApplied:a,hrefOverride:t,impressionsFramework:N,index:n,module:e,oneBarModulesKey:W??null,onFilterButtonClick:w,variant:F,viewParameter:j,viewType:C})},`OneBarModule-${e.entityId||e.id||""}`))})})}),e&&(0,x.jsxs)(o.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{background:(0,d.KC)(U,L,R),paddingBottom:d.uS,paddingLeft:d.EA,paddingRight:d.EA,pointerEvents:"none"}},"data-test-id":"one-bar-navigation-arrows",display:"flex",justifyContent:"between",left:!0,position:"absolute",right:!0,top:!0,children:[(0,x.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},children:L&&(0,x.jsx)(o.hU,{accessibilityLabel:H._('Back', 'oneBar.navArrow.back', 'Accessibility laber for a button that navigates back to previous search guides'),bgColor:"default",icon:"chevron-left",onClick:X})}),(0,x.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},children:R&&(0,x.jsx)(o.hU,{accessibilityLabel:H._('Forward', 'oneBar.navArrow.forward', 'Accessibility laber for a button that navigates forward to see more search guides'),bgColor:"default",icon:"chevron-right",onClick:G})})]})]})})}},704955:function(e,a,t){t.d(a,{Z:()=>r});var n=t(312048),i=t(954928),l=t(629724);function r(){let e=(0,n.TH)(),a=(0,n.s0)();return function(t){let n=(0,l.Z)();n.filter_location=t,a((0,i.Z)(e.pathname,n),{replace:!0})}}},332947:function(e,a,t){t.d(a,{Z:()=>p,q:()=>c});var n=t(312048),i=t(935059),l=t(501010),r=t(405897),s=t(477738),o=t(954928),d=t(629724),u=t(305375);let c=["brands","colors","commerce_only","domains","on_sale","price_max","price_min"];function p(){let e=(0,n.s0)(),a=(0,n.TH)(),{checkExperiment:t}=(0,l.Z)(),{scope:p}=(0,u.Z)(),g=(0,i.Z)(),{isAuth:h}=g,m=h?g.country:"";return function(n){let i=(0,d.Z)();i.rs=r.i.SHOPPING_FILTER,n.forEach(({key:e,value:a})=>{""!==a?i[e]=a:delete i[e]}),("US"===m||t("hundred_percent_product_load_i8n",{dangerouslySkipActivation:!0}).anyEnabled)&&p!==s.lw.PINS&&!c.some(e=>"commerce_only"!==e&&e in i)&&delete i.commerce_only,e((0,o.Z)(a.pathname,i))}}},320748:function(e,a,t){t.d(a,{Z:()=>u});var n=t(686659),i=t(667294),l=t(391995),r=t(519371),s=t(24246),o=t(113759),d=t(785893);function u({actionButton:e,collapsed:a,disabled:t,displayViewState:u,forceTappableHeader:c,headerHeight:p,headerPaddingX:g,headerPreview:h,heading:m,icon:y="chevron-down",onClick:f,showArrow:x,surface:_}){(0,i.useEffect)(()=>{(0,n.Z)("CollapsableHeader","/app/common/react/components/auth-desktop-web-closeup/CloseupBody/CollapsableHeader.tsx")},[]);let v=(0,s.Z)(),{closeupWithinMasonryEnabled:k,peekCloseupEnabled:S,viewportSize:w}=(0,o.x4)();if(!c&&null===u){let e=(0,r.rt)({peekCloseupEnabled:S,viewportSize:w,surface:_}),a=(0,d.jsx)(l.qd,{accessibilityLevel:2,align:"start",id:"comments-heading",size:e?"300":"400",children:m});return e?(0,d.jsx)(l.xu,{marginBottom:4,children:a}):a}return(0,d.jsx)(l.xu,{paddingX:g,children:(0,d.jsx)(l.iP,{disabled:!x||t,onTap:f,children:(0,d.jsx)(l.xu,{marginBottom:!a&&S?4:void 0,children:(0,d.jsxs)(l.kC,{alignItems:"center",dataTestId:"collapsible-header",direction:"row",flex:"grow",height:p,justifyContent:"between",children:[(0,d.jsx)(l.kC.Item,{flex:"shrink",children:(0,d.jsx)(l.qd,{accessibilityLevel:2,align:"start",color:t?"disabled":"default",id:"comments-heading",size:"300",children:m})}),(0,d.jsx)(l.kC.Item,{flex:"shrink",children:(0,d.jsxs)(l.kC,{alignItems:"center",direction:"row",gap:{row:1,column:0},children:[a&&h,(x||k)&&(0,d.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{transform:a?"rotate(0deg)":"rotate(180deg)",transition:"all 600ms cubic-bezier(.25,1,.5,1)"}},opacity:100*!!x,children:(0,d.jsx)(l.hU,{accessibilityLabel:v._('Expand icon', 'accordion.actionButton', 'accessibility label on accordion'),dataTestId:"collapse-button",disabled:!x||t,icon:y,size:"sm"})})]})}),e&&(0,d.jsx)(l.kC.Item,{flex:"grow",children:(0,d.jsx)(l.kC,{justifyContent:"end",children:e})})]})})})})}},573217:function(e,a,t){t.d(a,{Z:()=>n});let n=175},759271:function(e,a,t){t.d(a,{Z:()=>r});var n=t(501010),i=t(774838),l=t(739405);function r(){let{isAuthenticated:e}=(0,i.B)(),a=(0,l.ml)(),{checkExperiment:t}=(0,n.Z)();return{mWebCloseupRedesignEnabled:e&&a&&t("mweb_closeup_redesign").anyEnabled,mWebCloseupRedesignExpGroup:t("mweb_closeup_redesign").group}}},226966:function(e,a,t){t.d(a,{n:()=>n});let n=20},480610:function(e,a,t){t.d(a,{Z:()=>i});var n=t(341687);function i(e,a,t){let i=(0,n.Z)(e.search),l=parseFloat(i.x??""),r=parseFloat(i.y??""),s=parseFloat(i.w??""),o=parseFloat(i.h??"");if(function(...e){return e.every(e=>e>=0&&e<=1)}(l,r,s,o)&&a&&t)return{x:Math.floor(l*a),y:Math.floor(r*t),w:Math.floor(s*a),h:Math.floor(o*t)};{let e=parseInt(i.x??"",10),a=parseInt(i.y??"",10),t=parseInt(i.w??"",10),n=parseInt(i.h??"",10);return!function(...e){return e.every(Number.isInteger)}(e,a,t,n)?null:{x:e,y:a,w:t,h:n}}}},837378:function(e,a,t){t.d(a,{Z:()=>g});var n=t(686659),i=t(667294),l=t(391995),r=t(785893);let s={nw_horizontal:"inset(0 0 0 50%)",nw_vertical:"inset(50% 0 0 0)",ne_horizontal:"inset(0 50% 0 0)",ne_vertical:"inset(50% 0 0 0)",sw_horizontal:"inset(0 0 0 50%)",sw_vertical:"inset(0 0 50% 0)",se_horizontal:"inset(0 50% 0 0)",se_vertical:"inset(0 0 50% 0)"};function o({top:e,left:a,bottom:t,right:o,size:d,transition:u,opacity:c}){(0,i.useEffect)(()=>{(0,n.Z)("AnchorStrokeCap","/app/packages/Cropper/AnchorStrokeCap.tsx")},[]);let p=(0,i.useMemo)(()=>{let n=((e,a,t,n)=>{let i=void 0!==e,l=void 0!==t,r=void 0!==a,s=void 0!==n;return i&&r&&!l&&!s?"nw":i&&s&&!l&&!r?"ne":l&&r&&!i&&!s?"sw":l&&s&&!i&&!r?"se":"none"})(e,a,t,o),i=0===e||0===t?"horizontal":0===a||0===o?"vertical":"none";return`${n}_${i}`},[e,a,t,o]),g=s[p]||"none";return(0,r.jsx)(l.xu,{color:"default",dangerouslySetInlineStyle:{__style:{top:e,left:a,right:o,bottom:t,clipPath:g,transition:u,opacity:c}},"data-test-id":p,height:d,position:"absolute",rounding:"circle",width:d})}var d=t(221175);function u({anchorSize:e,corner:a,maxTouchSize:t}){(0,i.useEffect)(()=>{(0,n.Z)("AnchorTouchArea","/app/packages/Cropper/AnchorTouchArea.tsx")},[]);let s=d.FA[a],o=`${d.tT} ${a}`,u=Math.min(d.e4*d.MS,t),c=(u-e)/2,p=a.includes("n")?-c:void 0,g=a.includes("w")?-c:void 0,h=a.includes("s")?-c:void 0,m=a.includes("e")?-c:void 0;return(0,r.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{top:p,left:g,bottom:h,right:m,cursor:s,pointerEvents:"auto"}},"data-test-id":`cropper-corner-${a}`,height:u,id:o,position:"absolute",width:u})}var c=t(30430);let p=({x:e,y:a,size:t})=>`linear-gradient(black, black) ${e}px ${a}px / ${t}px ${t}px no-repeat`;function g({anchorSelection:e,h:a,handleCount:t,size:s,transition:g,visibility:h,w:m,x:y,y:f}){(0,i.useEffect)(()=>{(0,n.Z)("CropperAnchors","/app/packages/Cropper/CropperAnchors.tsx")},[]);let x=2===t,_=x?d.jf:d.m6,v=x?d.O3:d.ps,k=s/2,S=d.e4/2-d.xh-v-d.eq+(0,c.Z)({w:m,h:a,minSize:d.eq,maxSize:0}),w=m+2*k-2*S,b=a+2*k-2*S,P=d.e4-s,F=Math.max(d.CT-P,d.AL),j=d.xh/2,C=s-j,T=C-j,I=(Math.min(w,b)-d.dH)/2,Z="ne"===e?1:_,M=p({x:w-C,y:0,size:C}),K="nw"===e?1:_,E=p({x:0,y:0,size:C}),L="sw"===e?1:_,D=p({x:0,y:b-C,size:C}),R="se"===e?1:_,A=p({x:w-C,y:b-C,size:C});return(0,r.jsxs)(l.xu,{dangerouslySetInlineStyle:{__style:{top:f-k+S,left:y-k+S,pointerEvents:"none",visibility:h,transition:g}},height:b,position:"absolute",width:w,children:[(0,r.jsx)(l.xu,{color:"transparent",dangerouslySetInlineStyle:{__style:{border:`${d.xh}px solid white`,borderRadius:`${F}px`,mask:M,pointerEvents:"none",transition:g,opacity:Z}},height:"100%",left:!0,position:"absolute",top:!0,width:"100%"}),(0,r.jsx)(o,{opacity:Z,right:0,size:d.xh,top:T,transition:g}),(0,r.jsx)(o,{opacity:Z,right:T,size:d.xh,top:0,transition:g}),(0,r.jsx)(u,{anchorSize:s,corner:"ne",maxTouchSize:I}),(0,r.jsx)(l.xu,{color:"transparent",dangerouslySetInlineStyle:{__style:{border:`${d.xh}px solid white`,borderRadius:`${F}px`,mask:D,pointerEvents:"none",transition:g,opacity:L}},height:"100%",left:!0,position:"absolute",top:!0,width:"100%"}),(0,r.jsx)(o,{bottom:0,left:T,opacity:L,size:d.xh,transition:g}),(0,r.jsx)(o,{bottom:T,left:0,opacity:L,size:d.xh,transition:g}),(0,r.jsx)(u,{anchorSize:s,corner:"sw",maxTouchSize:I}),!x&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(l.xu,{color:"transparent",dangerouslySetInlineStyle:{__style:{border:`${d.xh}px solid white`,borderRadius:`${F}px`,mask:E,pointerEvents:"none",transition:g,opacity:K}},height:"100%",left:!0,position:"absolute",top:!0,width:"100%"}),(0,r.jsx)(o,{left:0,opacity:K,size:d.xh,top:T,transition:g}),(0,r.jsx)(o,{left:T,opacity:K,size:d.xh,top:0,transition:g}),(0,r.jsx)(u,{anchorSize:s,corner:"nw",maxTouchSize:I}),(0,r.jsx)(l.xu,{color:"transparent",dangerouslySetInlineStyle:{__style:{border:`${d.xh}px solid white`,borderRadius:`${F}px`,mask:A,pointerEvents:"none",transition:g,opacity:R}},height:"100%",left:!0,position:"absolute",top:!0,width:"100%"}),(0,r.jsx)(o,{bottom:0,opacity:R,right:T,size:d.xh,transition:g}),(0,r.jsx)(o,{bottom:T,opacity:R,right:0,size:d.xh,transition:g}),(0,r.jsx)(u,{anchorSize:s,corner:"se",maxTouchSize:I})]})]})}},938306:function(e,a,t){t.d(a,{Z:()=>x});var n=t(686659),i=t(667294),l=t(391995),r=t(104999),s=t(221175),o=t(837378),d=t(110196),u=t(325574),c=t(738735),p=t(30430),g=t(360033),h=t(480706),m=t(501010),y=t(979173),f=t(785893);function x({children:e,cropArea:{x:a,y:t,w:x,h:_},cropSource:v,hoveredCutoutIndex:k,imageContainerX:S,imageContainerY:w,imageSize:{width:b=1,height:P=1},objectDetection:F,onChange:j,setHoveredCutoutIndex:C,setSelectedCutoutIndex:T,viewParameter:I,viewType:Z}){(0,i.useEffect)(()=>{(0,n.Z)("CropperV2","/app/packages/Cropper/CropperV2.tsx")},[]);let{checkExperiment:M}=(0,m.Z)(),K=(0,r.Z)(),E=(0,i.useRef)(null),L=(0,i.useMemo)(()=>({x:0,y:0,w:b,h:P}),[P,b]),D=(0,i.useMemo)(()=>(0,u.Z)({cropArea:{x:a,y:t,w:x,h:_},imageSize:{width:b,height:P}}),[_,x,a,t,P,b]),[R,A]=(0,i.useState)(()=>(0,g.ZP)({x:a,y:t,w:x,h:_},L)?L:D),z=(0,i.useMemo)(()=>(0,g.ZP)(R,L),[R,L]),[$,O]=(0,i.useState)("none"),[H,U]=(0,i.useState)("none"),[B,N]=(0,i.useState)(!1),[W,V]=(0,i.useState)(!1),[Y,G]=(0,i.useState)(!1),[X,q]=(0,i.useState)(0),[J,Q]=(0,i.useState)(0),{anyEnabled:ee,group:ea}=M("web_cropper_object_selection"),{x:et,y:en,w:ei,h:el}=R,er=(0,i.useMemo)(()=>(0,p.Z)({w:ei,h:el,minSize:s.Zn,maxSize:s.e4}),[el,ei]),es=s.e4-er,eo=ee?s.O3:s.ps,ed=s.Y4-er,eu=s.SP,ec=s.SP,ep=b-s.SP,eg=P-s.SP,eh="number"==typeof k,em=W?"none":"0.3s cubic-bezier(0.42, 0, 0.58, 1.2)",ey=(0,d.Z)({cropperSelection:$,anchorSelection:H,hasMouseMoved:W}),ef=ee?function({cropperSelection:e,isTargetOnObject:a,cropSource:t,hasClickedOnObject:n,experimentGroup:i}){return("none"===e||a)&&(9===t||n)?"enabled_darker"===i?s.z3:s.pg:0}({cropperSelection:$,isTargetOnObject:B,cropSource:v,hasClickedOnObject:Y,experimentGroup:ea}):0,ex=e=>{e.preventDefault();let{clientX:a,clientY:t,target:n}=e,i=a-S,l=t-w;V(!1),G(!1),q(i),Q(l);let{id:r}=n,[o,d="none"]=r.split(" "),u=`${o}`===s.tT,c=r===s.at,p=r===s.eX,g=r===h.P,m=r===y.I;u?(O("anchor"),U(d)):p?O("cropbox"):c?O("background"):(!(et<i&&i<et+ei&&en<l&&l<en+el)||z?O("background"):O("cropbox"),N(g||m))},e_=e=>{if("none"===$)return;let{clientX:a,clientY:t}=e,n=a-S,i=t-w;if(!(Math.abs(n-X)<s.yG&&Math.abs(i-J)<s.yG&&!W&&["cropbox","background"].includes($)))switch(V(!0),N(!1),C?.(null),T?.(-1),$){case"anchor":{let e=["nw","sw"].includes(H),a=["nw","ne"].includes(H),t=Math.max(Math.min(n,ep),eu),l=Math.max(Math.min(i,eg),ec),r=e?Math.min(t,et+ei-s.yz):et;A({x:r,y:a?Math.min(l,en+el-s.yz):en,w:e?Math.max(et+ei-t,s.yz):Math.max(t-et,s.yz),h:a?Math.max(en+el-l,s.yz):Math.max(l-en,s.yz)});break}case"cropbox":{let e=Math.max(Math.min(et+(n-X),b-ei-eu),eu),a=Math.max(Math.min(en+(i-J),P-el-ec),ec);q(n),Q(i),A({x:e,y:a,w:ei,h:el});break}case"background":{let e=Math.max(Math.min(n,b),0),a=Math.max(Math.min(i,P),0),t=e-X,l=a-J;A({x:Math.min(X,e),y:Math.min(J,a),w:Math.abs(t),h:Math.abs(l)})}}},ev=()=>{if(O("none"),U("none"),N(!1),V(!1),"none"===$)return;if(B&&("cutouts"===F&&eh||"dots"===F))return void G(!0);let e=(e,a)=>{j({cropArea:e,cropSource:a}),A(e)};if(W){let a=Math.max(Math.min(et,b-s.yz-eu),eu),t=Math.max(Math.min(en,P-s.yz-ec),ec),n=el<s.yz?s.yz:t+el>P-ec?P-t-ec:el,i=ei<s.yz?s.yz:a+ei>b-eu?b-a-eu:ei;e({x:a,y:t,w:i,h:n},6),"cropbox"===$?K({event_type:7603,view_type:Z,view_parameter:I}):"anchor"===$?K({event_type:7604,view_type:Z,view_parameter:I}):"background"===$&&K({event_type:16584,view_type:Z,view_parameter:I})}else z||"background"===$?(e((0,c.Z)({mouseX:X,mouseY:J,cropSize:s.Rk,minBound:s.SP,imageWidth:b,imageHeight:P}),6),K({event_type:16585,view_type:Z,view_parameter:I})):"cropbox"===$&&(e(L,5),K({event_type:16586,view_type:Z,view_parameter:I}))};return(0,i.useEffect)(()=>{Y&&A(D)},[D,Y]),(0,i.useEffect)(()=>{let e=E.current;return e?.addEventListener("mousedown",ex),window.addEventListener("mousemove",e_),window.addEventListener("mouseup",ev),()=>{e?.removeEventListener("mousedown",ex),window.removeEventListener("mousemove",e_),window.removeEventListener("mouseup",ev)}}),(0,f.jsxs)(l.xu,{ref:E,bottom:!0,dangerouslySetInlineStyle:{__style:{cursor:ey}},"data-test-id":"visual-search-cropper",left:!0,position:"absolute",right:!0,top:!0,children:[(0,f.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{border:`${eo}px solid rgba(255, 255, 255, 0.20)`,borderRadius:`${ed}px`,boxShadow:"0 0 0 99999px rgba(0, 0, 0, 0.35)",left:et,top:en,transition:em,backgroundColor:`rgba(0, 0, 0, ${ef})`}},height:el,position:"absolute",width:ei}),(0,f.jsx)(l.xu,{bottom:!0,id:s.at,left:!0,position:"absolute",right:!0,top:!0}),(0,f.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{visibility:z?"hidden":"visible",left:et,top:en}},"data-test-id":"cropper-section",height:el,id:s.eX,position:"absolute",width:ei}),e,(0,f.jsx)(o.Z,{anchorSelection:H,h:el,handleCount:ee?2:4,size:es,transition:em,visibility:z||"background"===$&&W?"hidden":"visible",w:ei,x:et,y:en})]})}},221175:function(e,a,t){t.d(a,{AL:()=>g,CT:()=>p,FA:()=>_,Kw:()=>S,MS:()=>d,O3:()=>F,OI:()=>r,Rk:()=>j,SP:()=>i,Wm:()=>n,Y4:()=>b,Zn:()=>c,at:()=>v,dH:()=>h,e4:()=>u,eX:()=>k,eq:()=>x,iC:()=>s,jf:()=>y,m6:()=>m,pg:()=>T,ps:()=>P,tT:()=>o,xZ:()=>l,xh:()=>f,yG:()=>C,yz:()=>w,z3:()=>I});let n=446,i=16,l=48,r={x:0,y:0,w:0,h:0},s=`
  .preview-crop-area-enter {
    opacity: 0;
  }

  .preview-crop-area-enter-active {
    opacity: 1;
    transition: opacity 300ms;
  }

  .preview-crop-area-exit {
    opacity: 1;
  }

  .preview-crop-area-exit-active {
    opacity: 0;
    transition: opacity 300ms;
  }

  .preview-crop-area-exit-done {
    opacity: 0;
  }
`,o="anchor",d=2,u=20,c=14,p=16,g=10,h=8,m=1,y=.75,f=4,x=3,_={nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},v="cropper-background",k="cropper-cropbox",S=32,w=20,b=10,P=1,F=0,j=120,C=2,T=.2,I=.25},110196:function(e,a,t){t.d(a,{Z:()=>n});function n({cropperSelection:e,anchorSelection:a,hasMouseMoved:t}){if("background"===e&&t)return"crosshair";if("cropbox"===e&&t)return"move";if("anchor"===e){if("nw"===a||"se"===a)return"nwse-resize";else if("ne"===a||"sw"===a)return"nesw-resize"}return"auto"}},325574:function(e,a,t){t.d(a,{Z:()=>i});var n=t(221175);function i({cropArea:e,imageSize:a}){let{x:t,y:i,w:l,h:r}=e,{height:s,width:o}=a;if(!s||!o)return e;let d=t,u=i,c=l,p=r;return d<n.SP&&(d=n.SP,c-=n.SP-t),d+c>o-n.SP&&(c-=d+c-o+n.SP),u<n.SP&&(u=n.SP,p-=n.SP-i),u+p>s-n.SP&&(p-=u+p-s+n.SP),{x:d,y:u,w:c,h:p}}},738735:function(e,a,t){t.d(a,{Z:()=>i});let n=({coordinate:e,cropSize:a,maxBound:t,minBound:n})=>e<=n?n:t<=e+a?t-a:e;function i({cropSize:e,imageHeight:a,imageWidth:t,minBound:i,mouseX:l,mouseY:r}){let s=l-e/2,o=r-e/2,d=t-i,u=a-i;return{x:n({coordinate:s,minBound:i,maxBound:d,cropSize:e}),y:n({coordinate:o,minBound:i,maxBound:u,cropSize:e}),w:e,h:e}}},30430:function(e,a,t){t.d(a,{Z:()=>i});var n=t(221175);function i({w:e,h:a,minSize:t,maxSize:i}){let l=Math.min(e,a);return l<=n.yz?i-t:l<n.Kw?(i-t)/(n.Kw-n.yz)*(n.Kw-l):0}},480706:function(e,a,t){t.d(a,{P:()=>s,Z:()=>u});var n=t(667294),i=t(391995),l=t(24246),r=t(785893);let s="flashlight-dot-style",o=16,d=32,u=(0,n.forwardRef)(({icon:e,onClick:a,onMouseDown:t,onMouseEnter:u,onMouseLeave:c,onMouseUp:p,selected:g,style:h,text:m,x:y,y:f,zIndex:x,backdropDiameter:_=d,dotDiameter:v=o},k)=>{let[S,w]=(0,n.useState)(!1),b=(0,l.Z)(),P=S?_+4:_;return(0,r.jsx)(i.xu,{ref:k,dangerouslySetInlineStyle:{__style:{top:f-P/2,left:y-P/2,outline:"none"}},position:"absolute",zIndex:new i.Ry(x||0),children:(0,r.jsx)(i.iP,{accessibilityLabel:b._('Search this item', 'flashlight.dot.a11ylabel', 'accessibility label for flashlight dot'),dataTestId:"flashlight-dot",onMouseDown:t,onMouseEnter:({event:e})=>{w(!0),u?.({event:e})},onMouseLeave:({event:e})=>{w(!1),c?.({event:e})},onMouseUp:p,onTap:a,tabIndex:0,children:(0,r.jsxs)(i.xu,{alignItems:"center",color:"default",dangerouslySetInlineStyle:{__style:{boxShadow:g?"0 0 0 3px #e60023":"none",borderRadius:v,top:(P-v)/2,left:(P-v)/2,...h}},"data-test-id":s,display:"flex",height:v,id:s,justifyContent:"center",padding:0,position:"absolute",width:v,children:[!!m&&(0,r.jsx)(i.xe,{align:"center",color:"default",inline:!0,size:"100",weight:"bold",children:m}),e&&(0,r.jsx)(i.JO,{accessibilityLabel:b._('Tag anchor', 'accessibility label for an anchor for an object in a pin', 'accessibility label for an anchor for an object in a pin'),color:"error",icon:e,inline:!0,size:v/2})]})})})})},116980:function(e,a,t){t.d(a,{Pw:()=>n,SB:()=>i,ZP:()=>r,x9:()=>l});let n=80,i=55,l=e=>"phone"===e?i:n;function r(e,a){return a?0:l(e)}},735571:function(e,a,t){t.d(a,{Z:()=>l,k:()=>n.kH});var n=t(400850),i=t(774838);let l=({dateFormatType:e,useUTC:a=!0,value:t})=>{let l=(0,i.B)();return(0,n.ZP)(l.locale,t,e,a)}},400850:function(e,a,t){t.d(a,{A5:()=>l,ZP:()=>r,kH:()=>n});let n={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",WEEKDAY_DATE_TIME_TIMEZONE:"weekday_date_time_timezone",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH:"short_month",SHORT_MONTH_DAY:"short_month_day",DAY:"day",YEAR_SHORT_MONTH_DAY:"year_short_month_day",YEAR_SHORT_MONTH_DAY_HOUR:"year_short_month_day_hour",YEAR_SHORT_MONTH_DAY_TIME_TIMEZONE:"year_short_month_day_time_timezone",TIME:"time",TIME_TIMEZONE:"time_timezone",HOUR:"hour",TWO_DIGIT:"two_digit",TWO_DIGIT_YEAR:"two_digit_year",NUMERIC_WITH_TIME:"numeric_with_time",NUMERIC_WITH_TIME_TIMEZONE:"numeric_with_time_timezone"},i=function(e){switch(e){case n.YEAR:return{year:"numeric"};case n.LONG:return{year:"numeric",month:"long",day:"numeric"};case n.NUMERIC:return{year:"numeric",month:"numeric",day:"numeric"};case n.TWO_DIGIT:return{year:"numeric",month:"2-digit",day:"2-digit"};case n.TWO_DIGIT_YEAR:return{year:"2-digit",month:"2-digit",day:"2-digit"};case n.WEEKDAY_DATE:return{weekday:"long",month:"long",day:"numeric",year:"numeric"};case n.SHORT_WEEKDAY_DATE:return{weekday:"short",month:"numeric",day:"numeric"};case n.WEEKDAY_DATE_TIME_TIMEZONE:return{weekday:"short",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case n.MONTH_DAY:return{month:"long",day:"numeric"};case n.SHORT_MONTH:return{month:"short"};case n.SHORT_MONTH_DAY:return{month:"short",day:"numeric"};case n.DAY:return{day:"numeric"};case n.LONG_MONTH_YEAR:return{month:"long",year:"numeric"};case n.YEAR_SHORT_MONTH_DAY:return{year:"numeric",month:"short",day:"numeric"};case n.YEAR_SHORT_MONTH_DAY_HOUR:return{month:"short",year:"numeric",day:"numeric",hour:"numeric"};case n.YEAR_SHORT_MONTH_DAY_TIME_TIMEZONE:return{month:"short",year:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case n.TIME:return{hour:"numeric",minute:"2-digit"};case n.TIME_TIMEZONE:return{hour:"numeric",minute:"2-digit",timeZoneName:"short"};case n.HOUR:return{hour:"numeric"};case n.NUMERIC_WITH_TIME:return{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit"};case n.NUMERIC_WITH_TIME_TIMEZONE:return{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};default:throw Error('invalid dateFormatType "'+e+'"')}};function l(){return -1!==Intl.DateTimeFormat.toString().indexOf("[native code]")}function r(e,a,t,n=!0,s){let o=i(t);return n?o.timeZone="UTC":s&&(o.timeZone=s),l()||(o.calendar="gregory"),new Intl.DateTimeFormat(e,o).format(a)}},134136:function(e,a,t){t.r(a),t.d(a,{default:()=>c});var n=t(686659),i=t(667294),l=t(391995),r=t(806513),s=t(583845),o=t(873438),d=t(774838),u=t(785893);let c=({children:e,dataLayoutShiftBoundaryId:a,hasFixedHeader:t=!1,hasGutter:c=!0,height:p,showKeychainError:g=!1,useViewport:h=!1})=>{(0,i.useEffect)(()=>{(0,n.Z)("MobilePageContainer","/app/packages/layout/MobilePageContainer.tsx")},[]);let m=(0,d.B)(),y=(0,s.jd)(m.userAgent.platform)?s.Vf:0;return(0,u.jsx)(l.xu,{"data-layout-shift-boundary-id":a||"PageContainer",height:h?`calc(100vh - ${y}px)`:p,paddingX:c?r.D6:void 0,paddingY:t||g?void 0:3,children:(0,u.jsx)(o.C,{value:!!c,children:e})})}},816438:function(e,a,t){t.d(a,{r:()=>n});function n(e,a,t){return!!(e&&e.trim().length>0&&a&&!t)}},382964:function(e,a,t){t.d(a,{Z:()=>s});var n,i=t(667294);t(167912);var l=t(183e3);let r=(void 0!==n||(n=t(33653)).hash&&"8b6ce790922ff8b900b4ae18b06b7c11"!==n.hash&&console.error("The definition of 'useGetNormalizedPinImage_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function s({pinKey:e,maxWidth:a}){let t=(0,l.Z)(r,e),n=t?.images_564x||t?.images_736x||t?.images_orig||t?.images_474x||t?.images_236x,s=n?.width||1,o=n?.height||1,d=n?.url||"",u=function(e,a,t=564){return e>t&&(a*=t/e,e=t),{width:e,height:a}}(s,o,a);return{getNormalizedPinImage:(0,i.useCallback)(()=>({width:u.width,height:u.height,url:d}),[u.height,u.width,d])}}},228121:function(e,a,t){t.d(a,{Z:()=>s}),t(167912);var n,i=t(183e3),l=t(24246);let r=(void 0!==n||(n=t(719962)).hash&&"830edb300e7c7867cd6df7ec2716d975"!==n.hash&&console.error("The definition of 'useNormalizePinData_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n),s=e=>{let a,t=(0,l.Z)(),n=(0,i.Z)(r,e),s=n.trackedLink||n.link||n.images_orig&&n.images_orig.url,{richMetadata:o,richSummary:d}=n,u=t._('Saved from ', 'Closeup pin annotation', 'Closeup pin annotation');return o&&o.products&&o.products[0]&&o&&o.products[0].name&&o.products[0].offerSummary&&(u=t._('Product sold by ', 'pin annotation', 'pin annotation'),a=(o.products?.[0]||void 0)?.offerSummary),!a&&d&&d&&d.products&&d.products[0]&&d&&d.products[0].name&&d.products[0].offerSummary&&(u=t._('Product sold by ', 'pin annotation', 'pin annotation')),{pinLink:s,pinCreditPrefix:u,pinTitle:n.closeupUnifiedTitle,pinDescription:n.closeupUnifiedDescription,pinCategory:n.category}}},912023:function(e,a,t){t.d(a,{Z:()=>g});var n=t(686659),i=t(667294),l=t(391995),r=t(24246),s=t(696749),o=t(785893);function d({category:e,ingredients:a,textSize:t="300"}){return(0,i.useEffect)(()=>{(0,n.Z)("Ingredient","/app/packages/recipePin/Ingredient.tsx")},[]),(0,o.jsxs)(l.xu,{children:[e&&(0,o.jsx)(l.xu,{children:(0,o.jsx)(l.xe,{size:t,weight:"bold",children:e})}),(0,o.jsx)("ul",{children:a.map((e,a)=>(0,o.jsx)("li",{"data-test-id":"recipe-ingredient",itemProp:"recipeIngredient",children:(0,o.jsx)(l.xu,{marginTop:1,children:(0,o.jsxs)(l.xe,{size:t,children:[" ",e.amt||null," ",e.name]})})},a))})]})}var u=t(55475),c=t(234278),p=t(113759);function g({recipeProps:e,marginOverrides:a}){var t;(0,i.useEffect)(()=>{(0,n.Z)("RecipeIngredients","/app/packages/recipePin/RecipeIngredients.tsx")},[]);let g=(0,r.Z)(),{image:h,name:m,categorizedIngredients:y}=e.recipe,{peekCloseupEnabled:f}=(0,p.x4)(),x=0;if(y&&y.length){let e=[];y.forEach(a=>(x+=a.ingredients.length,e.push(a.ingredients)))}let _=f?(t=x,(0,s.Z)(g.ngettext('{{ count }} Ingredient', '{{ count }} Ingredients', t, 'closeup.recipePin.heading.ingredientCount', 'Ingredient count on a Pin. count: number of ingredients'),{count:t.toString()})):g._('Ingredients', 'Ingredients title and count in closeup recipe description', 'Ingredients title and count in closeup recipe description');return(0,o.jsx)(l.xu,{marginBottom:2,marginTop:2,children:(0,o.jsxs)(u.Z,{itemScope:!0,itemType:"https://schema.org/Recipe",children:[(0,o.jsx)("meta",{content:m,itemProp:"name"}),(0,o.jsx)("meta",{content:h,itemProp:"image"}),(0,o.jsx)(c.Z,{heading:_,children:(0,o.jsx)(l.xu,{children:y.map(({category:e,ingredients:t},n)=>{let r=`ingredient-${n}`;return(0,o.jsx)(i.Fragment,{children:(0,o.jsx)(l.xu,{marginBottom:a?.ingredientMarginBottom||4,children:(0,o.jsx)(d,{category:e,ingredients:t,textSize:"200"})})},r)})})})]})})}},55475:function(e,a,t){t.d(a,{Z:()=>r});var n=t(686659),i=t(667294),l=t(785893);let r=e=>{(0,i.useEffect)(()=>{(0,n.Z)("RichPinInformation","/app/packages/rich-snippet/RichPinInformation.tsx")},[]);let a=e.itemType?{itemScope:!0,itemType:e.itemType}:{};return(0,l.jsx)("div",{"data-test-id":"rich-pin-information",...a,children:e.children||null})}},735403:function(e,a,t){t.d(a,{Z:()=>i});var n=t(900946);function i(e){let{enteredQuery:a,filters:t,guideAdded:i,query:l,requestParams:r,rs:s,scope:o,selectedOneBarModules:d,user:u,inlineSuggestion:c}=e;if(!l)return"/";let p={q:l,rs:s,...r};if(t&&(p.filters=t),u&&(p.user=u),d&&(p.selected_one_bar_modules=d),i&&i.term&&(p.add_refine=`${i.term}|guide|word|${i.index}`),a&&(p.entered_query=a),c&&(p.inline_suggestion=c),window.location.pathname.startsWith("/explore"))return`/search/pins/?${(0,n.Z)(p)}`;let g=o;return["pins","buyable_pins","my_pins","boards","users","videos"].includes(g??"")||(g="pins"),g?`/search/${g}/?${(0,n.Z)(p)}`:`${window.location.pathname}?${(0,n.Z)(p)}`}},112658:function(e,a,t){t.d(a,{Z:()=>x});var n=t(686659),i=t(667294),l=t(391995),r=t(400962),s=t(171556),o=t(774838),d=t(907049),u=t(49932),c=t(141483),p=t(623222),g=t(228612),h=t(785893);function m(e,a,t){var n;return(a="symbol"==typeof(n=function(e,a){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,a||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(a,"string"))?n:n+"")in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}class y extends i.Component{constructor(e){super(e),m(this,"componentWillUnmount",()=>{this.unregisterComponent()}),m(this,"getContext",()=>{let{clientTrackingParams:e,component:a,element:t,objectId:n,timeSpentContext:i,view:l,viewParameter:r}=this.props;return{view:l||i?.view,viewParameter:r||i?.viewParameter,component:a||i?.component,element:t,objectId:n||i?.objectId,clientTrackingParams:e||i?.clientTrackingParams,getParentUuid:()=>this.getUuid(),getGrandparentUuid:()=>this.getParentId()}}),m(this,"getLoggerContext",()=>{let e={...this.getContext()};return delete e.getParentUuid,e}),m(this,"getParentId",()=>{let{timeSpentContext:e,shouldUseGrandparentId:a=!1}=this.props;if(a&&e&&e.getGrandparentUuid){let a=e.getGrandparentUuid();if(a)return a}return e?.getParentUuid?.()}),m(this,"getUuid",()=>this.state.timedPair?this.state.timedPair.uuid:void 0),m(this,"getTimedPair",()=>this.state.timedPair),m(this,"setTimedPair",(e,a)=>{this.setState({timedPair:e},()=>{a&&a()})}),m(this,"isRegistered",!1),m(this,"registerComponent",()=>{this.props.timeSpentManager.registerComponent(this),this.isRegistered=!0}),m(this,"unregisterComponent",()=>{this.isRegistered&&(this.props.timeSpentManager.unregisterComponent(this),this.isRegistered=!1)}),m(this,"handleVisibilityChange",e=>{let{intersectionRatio:a}=e[0],{bottom:t,left:n,right:i,top:l}=e[0].intersectionRect;a>0?this.registerComponent():0===a&&(0===t&&0===n&&0===i&&0===l?this.unregisterComponent():this.registerComponent())}),this.state={timedPair:new c.Z(this.getLoggerContext())}}componentDidUpdate(e){!this.isRegistered||e.view===this.props.view&&e.viewParameter===this.props.viewParameter&&e.component===this.props.component&&e.element===this.props.element&&e.objectId===this.props.objectId&&(0,d.Z)(e.auxData,this.props.auxData)&&(0,d.Z)(e.viewData,this.props.viewData)||(this.unregisterComponent(),setTimeout(this.registerComponent))}render(){let{children:e,intersectionObserverBoxHeight:a}=this.props;return(0,h.jsx)(p.$,{value:this.getContext(),children:(0,h.jsx)(s.Z,{onVisibilityChange:this.handleVisibilityChange,options:{threshold:0},children:t=>(0,h.jsx)(l.xu,{ref:t,height:a??"100%",children:i.Children.only(e)})})})}componentDidMount(){(0,n.Z)("DeprecatedTimeSpent","/app/packages/time-spent/DeprecatedTimeSpent.tsx")}}function f(e){let a=(0,r.ou)(),t=(0,p.a)(),n=(0,u.Z)(),l=(0,g.EQ)(),{requestIdentifier:s=""}=(0,o.B)(),d={app_instance_id:s.slice(0,8),...e.auxData??{}};return(0,i.useEffect)(()=>{n?.setHistoryStackContext(a)},[a,n]),(0,i.useEffect)(()=>{n?.setPins(l??{})},[l,n]),n?(0,h.jsx)(y,{...e,auxData:d,timeSpentContext:t,timeSpentManager:n,children:e.children}):e.children}f.displayName="DeprecatedTimeSpent";let x=f},954928:function(e,a,t){t.d(a,{Z:()=>n});let n=(e,a)=>{let t=new URL(e,"https://pinterest.com");return t.search=new URLSearchParams(a).toString(),t.toString().substring(t.origin.length)}},128608:function(e,a,t){t.d(a,{Z:()=>n});function n(e,a){let t=0,n=!1,i=-1;return e.forEach((e,l)=>{let{x:r=0,y:s=0,h:o=0,w:d=0}=e,u=function(e,a){let{x:t,y:n,w:i,h:l}=e,{x:r,y:s,w:o,h:d}=a,u=Math.max(t,r),c=Math.min(t+i,r+o),p=Math.max(n,s),g=Math.min(n+l,s+d),h=u<c&&p<g?(c-u)*(g-p):0;return h/(i*l+o*d-h)}(a,{x:r,y:s,h:o,w:d});u>=.9&&u>t&&(t=u,n=!0,i=l)}),{isCropAreaOnDotArea:n,indexToHide:i}}},246427:function(e,a,t){t.d(a,{Z:()=>n});function n({cropArea:{x:e,y:a,w:t,h:n},scaledWidth:i,scaledHeight:l}){return{x:e/i,y:a/l,w:t/i,h:n/l}}},383903:function(e,a,t){t.d(a,{Z:()=>n});function n({cropArea:e,scaledWidth:a,scaledHeight:t}){let n=e.h||0;return{h:Math.floor(n*t),w:Math.floor((e.w||0)*a),x:Math.floor((e.x||0)*a),y:Math.floor((e.y||0)*t)}}},371266:function(e,a,t){t.d(a,{Z:()=>n});function n({cropArea:e,cropSource:a,entrypoint:t,requestParams:n,searchQuery:i,surfaceType:l,title:r,trafficSource:s}){let o=[];if(e){let{x:a,y:t,w:n,h:i}=e;a>=0&&t>=0&&n>=0&&i>=0&&o.push(`x=${a}`,`y=${t}`,`w=${n}`,`h=${i}`)}return a&&o.push(`cropSource=${a}`),t&&o.push(`entrypoint=${t}`),l&&o.push(`surfaceType=${l}`),r&&o.push(`full_feed_title=${encodeURIComponent(r)}`),i&&o.push(`q=${i}`),s&&"unknown"!==s&&o.push(`rs=${s}`),n&&o.push(`requestParams=${encodeURIComponent(n)}`),o.length?`?${o.join("&")}`:""}},619784:function(e,a,t){t.d(a,{Z:()=>i});var n=t(371266);function i({cropArea:e,cropSource:a,entrypoint:t,isProductPage:i,pinId:l,requestParams:r,searchQuery:s,surfaceType:o,title:d,trafficSource:u}){let c=(0,n.Z)({cropArea:e,cropSource:a,entrypoint:t,requestParams:r,searchQuery:s,surfaceType:o,title:d,trafficSource:u}),p="";return i&&(p="products/"),`/pin/${l}/visual-search/${p}${c}`}},958306:function(e,a,t){t.d(a,{Z:()=>n});function n(e){return{h:e?.h??void 0,is_stela:e?.isStela??void 0,labelId:e?.labelId??void 0,label_x:e?.labelX??void 0,label_y:e?.labelY??void 0,label:e?.label??void 0,max_annotation_num_documents:e?.maxAnnotationNumDocuments??void 0,score:e?.score??void 0,show_on_closeup:e?.showOnCloseup??void 0,title:e?.title??void 0,w:e?.w??void 0,x:e?.x??void 0,y:e?.y??void 0}}},518112:function(e,a,t){t.r(a),t.d(a,{default:()=>w});var n=t(686659),i=t(667294),l=t(312048),r=t(391995),s=t(230201),o=t(59111),d=t(341687),u=t(383903),c=t(371266),p=t(674610),g=t(893957),h=t(501010),m=t(312321),y=t(785893);let f=Math.ceil(40),x=f+1;function _({isHidden:e,isObjectLevelCrop:a,isSelected:t,maskHeight:l,maskId:s,maskUrl:d,maskWidth:u,maskX:c,maskY:g}){(0,i.useEffect)(()=>{(0,n.Z)("CutoutGlow","/app/www/Cutouts/CutoutGlow.tsx")},[]);let{checkExperiment:_}=(0,h.Z)(),v="enabled_once"===_("web_cutout_glow").group,{insetIntensity:k,debugMode:S,showHiddenCutoutsinDebug:w}=function(e){let a=e.split("_");return{insetIntensity:""===a[0]||Number.isNaN(Number(a[0]))?void 0:Number(a[0]),debugMode:a.includes("debug"),showHiddenCutoutsinDebug:a.includes("all")}}(_("web_cutout_glow_inset").group),b=`glow-sweep-${s}`,P=Math.round(.35*l),F=l/2+P/2,j=a?.25:.5,{svgElement:C,maskStyle:T}=(0,m.Z)({debugMode:S,insetIntensity:k,kind:"glow",maskHeight:l,maskId:s,maskUrl:d,maskWidth:u});return(0,y.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{left:c,top:g,...T,visibility:t?"hidden":"visible"}},"data-test-id":"cutout-item",height:l,id:p.Ii,position:"absolute",width:u,children:(!e||w)&&(0,y.jsxs)(i.Fragment,{children:[C,(0,y.jsx)(o.Z,{unsafeCSS:`
          @keyframes ${b} {
            0%                    { mask-position: 0 -${F}px; opacity: ${j}; }
            ${f}% { mask-position: 0  ${F}px; opacity: ${j}; }
            ${x}%      { mask-position: 0  ${F}px; opacity: 0; }
            100%                  { mask-position: 0 -${F}px; opacity: 0; }
          }`}),(0,y.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none",animation:v?`${b} 5s linear forwards`:`${b} 5s linear infinite`,animationDelay:"1s",maskImage:`
              radial-gradient(
                ellipse ${4*P}px ${P}px at center,
                white 0%,
                white 15%,
                rgba(255, 255, 255, 0.9) 30%,
                rgba(255, 255, 255, 0.7) 45%,
                rgba(255, 255, 255, 0.5) 55%,
                rgba(255, 255, 255, 0.3) 65%,
                rgba(255, 255, 255, 0.15) 72%,
                rgba(255, 255, 255, 0.06) 80%,
                rgba(255, 255, 255, 0.01) 90%,
                transparent 100%
              )`,maskPosition:`0 -${F}px`,maskSize:"100% 100%",maskRepeat:"no-repeat"}},"data-test-id":"cutout-glow-oval",height:"100%",opacity:0,width:"100%",children:(0,y.jsx)(r.Ee,{alt:"cutout-glow-background-image",color:"white",fetchPriority:"high",fit:"cover",loading:"eager",naturalHeight:l,naturalWidth:u,role:"presentation",src:a?void 0:"https://s.pinimg.com/webapp/cutout-glow-background-7b325b4f.jpg"})})]})})}var v=t(391746);function k({isHovered:e,isObjectLevelCrop:a,isPinLevelCrop:t,isSelected:l,mask:r,pinImageHeight:o,pinImageUrl:d,pinImageWidth:u,viewParameter:c,viewType:p}){(0,i.useEffect)(()=>{(0,n.Z)("CutoutObject","/app/www/Cutouts/CutoutObject.tsx")},[]);let{logContextEvent:h}=(0,s.u)(),{id:m,isHidden:f,maskHeight:x,maskUrl:k,maskWidth:S,maskX:w,maskY:b}=r;return(0,g.Z)(()=>{f||h({event_type:120,element:14154,view_parameter:c,view_type:p,aux_data:{commerce_data:JSON.stringify({pin_has_cutout:!0})}})}),(0,y.jsxs)(i.Fragment,{children:[(0,y.jsx)(v.Z,{imageHeight:o,imageUrl:d,imageWidth:u,isHovered:e,isPinLevelCrop:t,isSelected:l,maskHeight:x,maskId:m,maskUrl:k,maskWidth:S,maskX:w,maskY:b}),(0,y.jsx)(_,{isHidden:f,isObjectLevelCrop:a,isSelected:l,maskHeight:x,maskId:m,maskUrl:k,maskWidth:S,maskX:w,maskY:b})]})}var S=t(225580);function w({bitmapMasks:e,entrypoint:a,hoveredCutoutIndex:t,imageContainerX:g,imageContainerY:m,onCropperUpdate:f,pinImageHeight:x,pinImageUrl:_,pinImageWidth:v,selectedCutoutIndex:w,setHoveredCutoutIndex:b,setSelectedCutoutIndex:P,trafficSource:F,viewParameter:j,viewType:C}){(0,i.useEffect)(()=>{(0,n.Z)("CutoutObjects","/app/www/Cutouts/CutoutObjects.tsx")},[]);let{logContextEvent:T}=(0,s.u)(),I=(0,l.TH)(),Z=(0,l.s0)(),M=(0,i.useRef)(null),[K,E]=(0,i.useState)(!1),{w:L,h:D,cropSource:R}=(0,d.Z)(I.search),A=(0,i.useMemo)(()=>Number(L)===v&&Number(D)===x||void 0===L&&void 0===D,[D,x,v,L]),z=(0,i.useMemo)(()=>9===Number(R),[R]),{cutoutContexts:$,maskData:O}=function(e,a,t){let[n,l]=(0,i.useState)([]),[r,s]=(0,i.useState)([]),[o,d]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let{maskData:n,urls:i}=e.reduce((e,n)=>{let i=(0,S.Fk)(n,a,t);return i&&(e.maskData.push(i.maskData),e.urls.push(i.maskUrl)),e},{maskData:[],urls:[]});if(s(n),0===n.length)return l([]),d(!1),()=>i.forEach(e=>URL.revokeObjectURL(e));let r=!1;return d(!0),(async()=>{let e=n.map(async e=>{let a=document.createElement("canvas"),t=a.getContext("2d",{willReadFrequently:!0});if(!t)return null;let{maskWidth:n,maskHeight:i}=e;a.width=n,a.height=i;try{let a=new Image;return a.crossOrigin="anonymous",new Promise(l=>{a.onload=()=>{if(r)return void l(null);t.drawImage(a,0,0,n,i),l(t)},a.onerror=()=>l(null),a.src=e.maskUrl})}catch{return null}}),a=await Promise.all(e);r||(l(a),d(!1))})(),()=>{r=!0,i.forEach(e=>URL.revokeObjectURL(e))}},[e,a,t]),{cutoutContexts:n,maskData:r,isLoading:o}}(e,v,x),H=function({maskData:e,cutoutContexts:a,imageContainerX:t,imageContainerY:n,setHoveredCutoutIndex:l,viewParameter:r,viewType:o}){let{logContextEvent:d}=(0,s.u)(),{checkExperiment:u}=(0,h.Z)(),{anyEnabled:c,group:p}=u("web_cutout_hit_detection_cache"),g="control"===p?1:"employees"===p?5:Number(p.split("_")[1]||5),m=(0,i.useRef)(new Map);(0,i.useEffect)(()=>{m.current.clear()},[e]);let y=(0,i.useCallback)((e,a)=>{e!==a&&(l(e),null!==e&&d({event_type:105,element:14154,view_parameter:r,view_type:o,aux_data:{commerce_data:JSON.stringify({pin_has_cutout:!0})}}))},[l,d,r,o]);return(0,i.useCallback)((i,l,r)=>{let s=c?`${Math.round(i.clientX/g)*g},${Math.round(i.clientY/g)*g}`:"";if(c&&m.current.has(s))return void y(m.current.get(s)??null,l);let o=i.clientX-t,d=i.clientY-n;for(let t=e.length-1;t>=0;t-=1){let n=e[t],i=a[t];if(!i||!n||t===r||!(0,S.Of)(o,d,n))continue;let u=o-n.maskX,p=d-n.maskY;if((0,S.Bt)(i,u,p)){c&&m.current.set(s,t),y(t,l);return}}c&&m.current.set(s,null),y(null,l)},[c,a,t,n,e,g,y])}({maskData:O,cutoutContexts:$,imageContainerX:g,imageContainerY:m,setHoveredCutoutIndex:b,viewParameter:j,viewType:C}),U=(0,i.useCallback)(()=>E(!1),[]),B=(0,i.useCallback)(e=>{(e.movementX||e.movementY)&&E(!0),0===e.buttons?H(e,t,w):b?.(null)},[H,t,w,b]),N=(0,i.useCallback)(e=>H(e,t,w),[H,t,w]),W=(0,i.useCallback)(()=>b(null),[b]),V=(0,i.useCallback)(()=>{if(K||null===t)return void E(!1);if(b(null),P(t),!O[t])return;let{maskXRatio:e,maskYRatio:n,maskWidthRatio:i,maskHeightRatio:l}=O[t],r=(0,u.Z)({cropArea:{x:e,y:n,w:i,h:l},scaledWidth:v,scaledHeight:x});if(f)f({cropArea:r,cropSource:9}),T({event_type:101,element:14154,view_parameter:j,view_type:C});else{let e=(0,c.Z)({cropArea:r,cropSource:9,entrypoint:a,trafficSource:F});window.location.search!==e&&(T({event_type:101,element:14154,view_parameter:j,view_type:C,aux_data:{commerce_data:JSON.stringify({pin_has_cutout:!0})}}),Z(`${window.location.pathname}${e}`,{replace:!0}))}},[K,t,b,P,O,v,x,f,T,j,C,a,F,Z]);return(0,i.useEffect)(()=>{let e=M.current;if(e)return e.addEventListener("mousedown",U),e.addEventListener("mousemove",B),e.addEventListener("mouseup",N),e.addEventListener("mouseleave",W),e.addEventListener("click",V),()=>{e.removeEventListener("mousedown",U),e.removeEventListener("mousemove",B),e.removeEventListener("mouseup",N),e.removeEventListener("mouseleave",W),e.removeEventListener("click",V)}},[U,B,N,W,V]),(0,y.jsxs)(r.xu,{ref:M,bottom:!0,dangerouslySetInlineStyle:{__style:{cursor:"number"==typeof t?"pointer":"auto"}},"data-bitmaps-ready":O.length>0,"data-test-id":"cutouts-container",left:!0,position:"absolute",right:!0,role:"none",top:!0,children:[(0,y.jsx)(o.Z,{unsafeCSS:p.iF}),O.map((e,a)=>(0,y.jsx)(k,{isHovered:t===a,isObjectLevelCrop:z,isPinLevelCrop:A,isSelected:w===a,mask:e,pinImageHeight:x,pinImageUrl:_,pinImageWidth:v,viewParameter:j,viewType:C},e.id))]})}},391746:function(e,a,t){t.d(a,{Z:()=>c});var n=t(686659),i=t(667294),l=t(407504),r=t(391995),s=t(501010),o=t(674610),d=t(312321),u=t(785893);function c({imageHeight:e,imageUrl:a,imageWidth:t,isHovered:c,isPinLevelCrop:p,isSelected:g,maskHeight:h,maskId:m,maskUrl:y,maskWidth:f,maskX:x,maskY:_}){(0,i.useEffect)(()=>{(0,n.Z)("CutoutOverlay","/app/www/Cutouts/CutoutOverlay.tsx")},[]);let{checkExperiment:v}=(0,s.Z)(),k=v("web_cropper_object_selection").anyEnabled,S=(0,i.useRef)(null),w=k?c||g:c,b=p&&c?1.2:1,{svgElement:P,maskStyle:F}=(0,d.Z)({maskUrl:y,maskWidth:f,maskHeight:h,maskId:m,kind:"overlay"});return(0,u.jsx)(l.Z,{appear:g,classNames:o.We,in:w,nodeRef:S,timeout:{appear:o.VI,enter:o.eZ,exit:o.eZ},children:(0,u.jsxs)(r.xu,{ref:S,dangerouslySetInlineStyle:{__style:{left:x,top:_,...F,pointerEvents:"none",filter:`brightness(${b})`}},height:h,opacity:0,overflow:"hidden",position:"absolute",width:f,children:[P,(0,u.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{left:-x,top:-_}},height:e,position:"absolute",width:t,children:(0,u.jsx)(r.Ee,{alt:"cutout-overlay-image",color:"transparent",fit:"cover",naturalHeight:e,naturalWidth:t,src:a})})]})})}},979173:function(e,a,t){t.d(a,{Z:()=>p,I:()=>c});var n=t(686659),i=t(667294),l=t(312048),r=t(391995),s=t(230201),o=t(391746);function d({contour:e,context:a,contourXRatio:t,contourYRatio:n}){a.beginPath(),e.points.forEach((e,i)=>{if(e){let l=e.x*t,r=e.y*n;0===i?a.moveTo(l,r):a.lineTo(l,r)}})}var u=t(785893);let c="stela-cutout";function p({auxData:e,bitmapData:a,hasAnimatedCutoutsOnLand:t,hasLoggedRender:p,hoveredCutoutIndex:g,index:h,isPinLevelCrop:m,pinImageHovered:y,pinImageHeight:f,pinImageUrl:x,pinImageWidth:_,selectedCutoutIndex:v,setHasAnimatedCutoutsOnLand:k,setHasLoggedRender:S,viewParameter:w,viewType:b}){(0,i.useEffect)(()=>{(0,n.Z)("StelaCutout","/app/www/Cutouts/StelaCutout.tsx")},[]);let{logContextEvent:P}=(0,s.u)(),F=(0,l.TH)(),j=(0,i.useRef)(null),C=(0,i.useRef)(null),T=(0,i.useRef)(null),[I,Z]=(0,i.useState)(0),[M,K]=(0,i.useState)(!1),[E,L]=(0,i.useState)(0),[D,R]=(0,i.useState)(!1),A=F.pathname.includes("visual-search"),{contours:z,contourXRatio:$,contourYRatio:O,id:H,isHidden:U,maskHeightRatio:B,maskUrl:N,maskWidthRatio:W,maskXRatio:V,maskYRatio:Y}=a,G=V*_,X=Y*f,q=W*_,J=B*f,Q=g===h,ee=v===h,ea=z&&z.length>0;(0,i.useEffect)(()=>{p||(P({event_type:120,element:14154,view_parameter:w,view_type:b,aux_data:e}),S?.(!0))},[e,p,P,S,w,b]),(0,i.useEffect)(()=>{j.current&&(j.current.width=q,j.current.height=J,C.current=new(window.OffscreenCanvas||window.HTMLCanvasElement)(q,J))},[q,J]);let et=(0,i.useCallback)(()=>{R(!0)},[]);return(0,i.useEffect)(()=>{let e=j.current;return e?.addEventListener("transitionend",et),()=>{e?.removeEventListener("transitionend",et)}}),(0,i.useEffect)(()=>{if(!j.current||!C.current||!ea||!$||!O)return;let e=j.current.getContext("2d");return t?void e?.clearRect(0,0,j.current.width,j.current.height):((!D||y||U&&Q)&&(T.current=requestAnimationFrame(()=>{if(!j.current||!C.current)return;let a=C.current.getContext("2d");e&&a&&(!function({contours:e,context:a,hasAnimatedCutoutsOnLand:t,hoveredCutoutIndex:n,index:i,isHidden:l,contourXRatio:r,contourYRatio:s,setTraceProgress:o,setHasAnimatedCutoutsOnLand:u,style:c,traceProgress:p,selectedCutoutIndex:g}){if(a.clearRect(0,0,a.canvas.width,a.canvas.height),!e||0===e.length||g===n&&n===i||g===i)return;let h={trace:{strokeStyle:"#fff",lineWidth:2},outline:{strokeStyle:"#fff",lineWidth:3}},m=l&&n===i,y=!l||m;if("trace"===c&&void 0!==p){let l=p,g=e[0].points.length;if(t){if(m||n===i){o(l=(l+900/((e,a,t)=>{let n=0;for(let i=0;i<e.length-1;i+=1){let l=e[i],r=e[i+1];if(l&&r){let e=(r.x-l.x)*a,i=(r.y-l.y)*t;n+=Math.sqrt(e*e+i*i)}}if(e.length>0){let i=e[0],l=e[e.length-1];if(i&&l){let e=(i.x-l.x)*a,r=(i.y-l.y)*t;n+=Math.sqrt(e*e+r*r)}}return n})(e[0].points,r,s)*3.2/1e3)%1);let t=Math.floor(.33*g),n=Math.floor(g*l),i=(n-t+g)%g;e.map(e=>({...e,points:i<n?e.points.slice(i,n):e.points.slice(i).concat(e.points.slice(0,n))})).forEach(e=>{e.points.length>1&&(a.strokeStyle=h[c].strokeStyle,d({contour:e,context:a,contourXRatio:r,contourYRatio:s}),y&&(a.lineWidth=h[c].lineWidth,a.stroke()))})}}else{let t,n;if(o(l+=l<=1?.0032:.009600000000000001),l>=2){o(1),u(!0);return}let i=Math.floor(.33*g);l<=1?n=((t=Math.floor(g*l))-i+g)%g:(t=g,n=Math.floor(g-i+i*(l-1))),e.map(e=>{let a=[];return a=n<t?e.points.slice(n,t):e.points.slice(n).concat(e.points.slice(0,t)),{...e,points:a}}).forEach(e=>{e.points.length>1&&(a.strokeStyle=h[c].strokeStyle,d({contour:e,context:a,contourXRatio:r,contourYRatio:s}),y&&(a.lineWidth=h[c].lineWidth,a.stroke()))})}}else e.forEach(e=>{d({contour:e,context:a,contourXRatio:r,contourYRatio:s}),y&&(a.strokeStyle=h[c].strokeStyle,a.lineWidth=h[c].lineWidth,a.stroke(),n===i&&(a.save(),a.fillStyle="rgba(255, 255, 255, 0.25)",a.fill(),a.restore()))})}({contours:z,context:a,contourXRatio:$,contourYRatio:O,index:h,isHidden:U,hoveredCutoutIndex:g,opacity:I,setTraceProgress:L,hasAnimatedCutoutsOnLand:t,setHasAnimatedCutoutsOnLand:k,style:"trace",traceProgress:E,selectedCutoutIndex:v}),e.clearRect(0,0,j.current.width,j.current.height),e.drawImage(C.current,0,0))})),()=>{T.current&&(cancelAnimationFrame(T.current),T.current=null)})},[$,O,z,t,ea,g,h,D,U,Q,I,y,v,k,E]),(0,i.useEffect)(()=>{if(y)K(!0),Z(1);else if(M)Z(0);else{Z(1);let e=setTimeout(()=>{K(!1),Z(0)},3e3);return()=>clearTimeout(e)}},[y,M,Z]),(0,u.jsxs)(r.xu,{children:[(0,u.jsx)(o.Z,{imageHeight:f,imageUrl:x,imageWidth:_,isHovered:Q,isPinLevelCrop:m,isSelected:ee,maskHeight:J,maskId:H,maskUrl:N,maskWidth:q,maskX:G,maskY:X}),ea&&(0,u.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{top:X,left:G}},height:J,position:"absolute",width:q,children:(0,u.jsx)("canvas",{ref:j,"data-test-id":"cutout-item",id:c,style:{opacity:A||y?1:I,transition:y||M||A?"none":"opacity 2s linear 1s"}})})]})}},674610:function(e,a,t){t.d(a,{Ii:()=>n,VI:()=>l,We:()=>i,eZ:()=>r,iF:()=>s});let n="stela-cutout",i="cutout-fade",l=2e3,r=300,s=`
  .${i}-appear {
    opacity: 0;
  }
  .${i}-appear-active {
    opacity: 1;
    transition: opacity ${l}ms;
  }
  .${i}-appear-done {
    opacity: 1;
  }

  .${i}-enter {
    opacity: 0;
  }
  .${i}-enter-active {
    opacity: 1;
    transition: opacity ${r}ms;
  }
  .${i}-enter-done {
    opacity: 1;
  }

  .${i}-exit {
    opacity: 1;
  }
  .${i}-exit-active {
    opacity: 0;
    transition: opacity ${r}ms;
  }
  .${i}-exit-done {
    opacity: 0;
  }
`},312321:function(e,a,t){t.d(a,{Z:()=>i});var n=t(785893);function i({blurIntensity:e=.1,debugMode:a=!1,insetIntensity:t=2,kind:i,maskHeight:l,maskId:r,maskUrl:s,maskWidth:o,maxBlurLength:d=100}){let u=`${i}-${r}`,c=`insetBlurFilter-${u}`,p=`originalMask-${u}`,g=`featheredMask-${u}`,h=Math.min(d,Math.round(Math.min(o,l)))*e;return{svgElement:(0,n.jsxs)("svg",{"data-gestalt-valid-html":"Image",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"},children:[(0,n.jsxs)("defs",{children:[(0,n.jsxs)("filter",{id:c,children:[(0,n.jsx)("feGaussianBlur",{edgeMode:"none",stdDeviation:h}),(0,n.jsx)("feComponentTransfer",{children:(0,n.jsx)("feFuncA",{amplitude:"1",exponent:t,offset:"0",type:"gamma"})})]}),(0,n.jsx)("mask",{id:p,children:(0,n.jsx)("image",{height:l,href:s,id:`${p}-image`,width:o})}),(0,n.jsx)("use",{href:`#${p}-image`,id:`${p}-white`,mask:`url(#${p})`}),(0,n.jsx)("mask",{id:g,children:(0,n.jsx)("use",{filter:`url(#${c})`,href:`#${p}-white`,mask:`url(#${p})`})})]}),a&&(0,n.jsx)("rect",{fill:"green",height:l,mask:`url(#${g})`,width:o,x:"0",y:"0"})]}),maskStyle:{mask:`url(#${g})`}}}},509307:function(e,a,t){t.d(a,{Z:()=>n});function n(e,a){let{x:t,y:n}=e,i=!1,l=0,r=a.length-1;for(;l<a.length;){let{x:e,y:s}=a[l],{x:o,y:d}=a[r];s>n!=d>n&&t<(o-e)*(n-s)/(d-s)+e&&(i=!i),r=l,l+=1}return i}},415349:function(e,a,t){t.d(a,{Z:()=>p});var n,i=t(667294);t(167912);var l=t(877762);async function r({imageBlob:e,boundingBox:a}){let t=new FormData;t.append("image",e),a&&t.append("bounding_box",a);let{promise:n}=(0,l.Z)({url:"/camera-sam-segmentation/",type:"PUT",data:t}),i=await n,{data:r}=(await i.json()).responsePayload.resourceResponse;return r}var s=t(183e3),o=t(661376),d=t(198861);let u=(void 0!==n||(n=t(423540)).hash&&"50c726067ab8af873ed4afded90b7bed"!==n.hash&&console.error("The definition of 'useSamSegmentation_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n),c=e=>JSON.stringify({x:Math.min(Math.max(e.x||0,0),1),y:Math.min(Math.max(e.y||0,0),1),width:Math.min(Math.max(e.w||1,0),1),height:Math.min(Math.max(e.h||1,0),1)});function p({pinKey:e,isVisualSearch:a=!1,boundingBox:t,imageBlob:n,isCollage:l=!1,isCustomImage:p=!1}){let g=(0,s.Z)(u,e),h=(0,d.Z)(),m=(0,i.useMemo)(()=>({client:"visual_cutout",cleanup_masks:!0,...t&&{bounding_box:c(t),use_gss:!1,write_to_galaxy:!1}}),[t]),{data:y}=(0,o.Z)(g&&g.entityId?{name:"ApiResource",options:{url:`/v3/pins/${g.entityId}/segmentation/sam/`,data:{...a&&h,...l&&m}}}:null),f=function({imageBlob:e,isCustomImage:a=!1,boundingBox:t}){let[n,l]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let n=async()=>{a&&e&&l(await r({imageBlob:e,boundingBox:t}))};l(null),n()},[a,e,t]),n}({imageBlob:n,isCustomImage:p,boundingBox:t?c(t):void 0});return p?f:y}},198861:function(e,a,t){t.d(a,{Z:()=>l});var n=t(667294),i=t(501010);function l(){let{checkExperiment:e}=(0,i.Z)(),{group:a}=e("dtn_exp6_uve4a");return(0,n.useMemo)(()=>{let e={client:"visual_cutout",cleanup_masks:!0};return"enabled"===a?{...e,detection_model:"dtn_exp6_yolov8"}:"enabled_dtn_exp5_skip_gss"===a?{...e,use_gss:!1,write_to_galaxy:!1}:e},[a])}},225580:function(e,a,t){t.d(a,{Bt:()=>i,Fk:()=>r,Of:()=>n,R7:()=>l});let n=(e,a,t)=>{let{maskX:n,maskY:i,maskWidth:l,maskHeight:r}=t;return e>=n&&e<=n+l&&a>=i&&a<=i+r},i=(e,a,t)=>{if(a<0||t<0||a>=e.canvas.width||t>=e.canvas.height)return!1;try{let n=e.getImageData(a,t,1,1).data[0];return void 0!==n&&n>0}catch{return!1}},l=e=>{let{id:a,mask_image:t,mask_bounds:n}=e;if(!a||!t||!n||2!==n.length)return!1;let[i,l]=n;if(!i||!l||2!==i.length||2!==l.length)return!1;let[r,s]=i,[o,d]=l;return[r,s,o,d].every(e=>"number"==typeof e&&!Number.isNaN(e))},r=(e,a,t)=>{if(!l(e))return null;let{id:n,mask_image:i,mask_bounds:r,is_hidden:s}=e,[o,d]=r[0],[u,c]=r[1],p=(e=>{try{let a=atob(e),t=Uint8Array.from(a,e=>e.charCodeAt(0)),n=new Blob([t],{type:"image/png"});return URL.createObjectURL(n)}catch{return null}})(i);return p?{maskData:{id:n,isHidden:!!s,maskHeight:c*t,maskHeightRatio:c,maskUrl:p,maskWidth:u*a,maskWidthRatio:u,maskX:o*a,maskXRatio:o,maskY:d*t,maskYRatio:d},maskUrl:p}:null}},229793:function(e,a,t){t.d(a,{Z:()=>l});var n=t(667294),i=t(758714);function l(e){return(0,n.useMemo)(()=>{let[a,t]=(0,i.Rn)({hexColor:e||"#FFFFFF",saturationMultiplier:3,brightnessMultiplier:1.6,minSaturationClamp:.15,mixVal:.3,minBrightnessClamp:0}),n=`rgba(${t[0]}, ${t[1]}, ${t[2]}, 0.8)`,l=`rgba(${a[0]}, ${a[1]}, ${a[2]}, 0.8)`,r=(0,i.e3)((0,i.rk)((0,i.t7)("rgba(117, 117, 112, 0.2)"),(0,i.t7)(n))),s=(0,i.e3)((0,i.rk)((0,i.t7)("rgba(117, 117, 112, 0.4)"),(0,i.t7)(n)));return{defaultColor:n,selectedColor:l,hoveredColor:r,pressedColor:s}},[e])}},838855:function(e,a,t){t.d(a,{G:()=>_,Z:()=>v});var n=t(686659),i=t(667294),l=t(391995),r=t(261954),s=t(309947),o=t(806513),d=t(426161),u=t(70625),c=t(739405),p=t(893957),g=t(596663),h=t(471310),m=t(989045),y=t(759302),f=t(589247),x=t(785893);let _=25;function v({align:e,customLayoutType:a,getColumnSpanConfig:t,getResponsiveModuleConfigForSecondItem:_,emptyState:v,feedItems:k,feedKey:S,maxColumns:w,minColumns:b,pagination:{hasNext:P,isLoadingNext:F,loadNext:j,refetch:C},pullToRefresh:T,renderFeedItem:I,serverRender:Z,isLoadingStateEnabled:M,isLoadingAccessibilityLabel:K,isLoadedAccessibilityLabel:E,layout:L,forceShowLoadingState:D}){(0,i.useEffect)(()=>{(0,n.Z)("SimpleFeed","/app/www/SimpleFeed.tsx")},[]);let R=(0,c.HG)(),{experimentalColumnWidth:A,experimentalGutter:z}=(0,s.Z)(),[$,O]=(0,i.useState)(!1),H=1===w?window.innerWidth:void 0,U="userSearch"===a?window.innerWidth-16:200,B=F&&0===k.length&&!$&&!M,N="desktopFlashlight"===a||"ideaPage"===a&&R?-2:o.qG,W=b??2;return"userSearch"===a&&(W=1),(0,p.Z)(()=>(window.addEventListener("online",j),()=>window.removeEventListener("online",j))),(0,x.jsxs)(l.xu,{"data-test-id":"MobileFeed",children:[(0,x.jsx)(h.Z,{enabled:!!T,onPull:()=>{C(),O(!0)},refreshing:$}),(0,x.jsxs)(l.xu,{"data-test-id":"grid",marginEnd:N,marginStart:N,opacity:$?50:100,children:[(0,x.jsx)(d.Z,{isAtEndOfFeed:!P,isPlaceholderGrid:M&&F&&!k.length,itemCount:k.length,children:k.length?(0,x.jsx)(l.xu,{"data-test-id":"feed",marginTop:(0,g.kk)({isDesktop:R}),children:(0,x.jsx)(u.Z.Consumer,{children:n=>(0,x.jsx)(i.Fragment,{children:(0,x.jsx)(f.Z,{children:(0,x.jsx)(r.default,{_getResponsiveModuleConfigForSecondItem:_,align:e||("ideaPage"===a?"start":void 0),cacheKey:S,columnWidth:R?A??o.yF:H??U,getColumnSpanConfig:t,gutterWidth:R?z??4*o.jC:void 0,id:Z?S:void 0,isFetching:D??F,isLoadedAccessibilityLabel:E??"",isLoadingAccessibilityLabel:K??"",isLoadingStateEnabled:D??!!M,items:k,layout:L??void 0,loadItems:j,maxColumns:w,minCols:W,optOutFluidGridExperiment:null!=w,renderItem:({data:e,itemIdx:a})=>I(e,a),scrollContainerRef:n,serverRender:Z})})})})}):F?(0,x.jsx)(m.Z,{}):v??null}),B&&(0,x.jsx)(l.xu,{column:12,paddingY:2,children:(0,x.jsx)(y.Z,{partialViewportWidth:"desktopFlashlight"===a})})]})]})}},728746:function(e,a,t){t.d(a,{Z:()=>e1});var n,i,l,r,s,o,d,u,c=t(686659),p=t(667294);t(167912);var g=t(391995),h=t(183e3),m=t(680295),y=t(24246),f=t(661376),x=t(854897),_=t(312048),v=t(226966),k=t(480610),S=t(785893);function w({isTopRow:e,image:a}){return(0,p.useEffect)(()=>{(0,c.Z)("ShoppingUpsellStoryCardDetail","/app/common/react/components/shopping/ShoppingUpsellStoryCardDetail.tsx")},[]),(0,S.jsxs)(g.zd,{height:e?217:168,wash:!0,width:e?236:117,children:[a.url&&(0,S.jsx)(g.Ee,{alt:a.alt||"",fit:"cover",naturalHeight:a.height??1,naturalWidth:a.width??1,src:a.url}),!!a.price&&(0,S.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"18px",color:"#111",fontSize:"10px",fontWeight:"600",lineHeight:"24px",padding:"06px"}},"data-test-id":"shopping-upsell-price",height:24,left:!0,margin:1,paddingX:2,paddingY:1,position:"absolute",top:!0,children:a.price})]})}var b=t(230201),P=t(319226),F=t(79271),j=t(78835),C=t(748336),T=t(594502),I=t(227866);let Z={container:{borderRadius:`${j.Oc}px ${j.Oc}px 25px 25px`,WebkitMaskImage:"-webkit-radial-gradient(white, black)"},content:{marginBottom:"2px"},visualOverlay:{backgroundColor:"rgba(0, 0, 0, .1)"}},M=({images:e,firstImageIndex:a})=>{let t=a+1,n=a+2;return(0,S.jsxs)(g.xu,{overflow:"hidden",rounding:400,children:[(0,S.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:Z.content},children:e.at(a)?(0,S.jsx)(w,{image:e[a],isTopRow:!0}):null}),e.length>n?(0,S.jsxs)(g.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,S.jsx)(w,{image:e[t]}),(0,S.jsx)(w,{image:e[n]})]}):null]})};function K({dangerouslySetActionUrl:e,query:a,story:t,slotIndex:n}){let i,l,r,s,o;(0,p.useEffect)(()=>{(0,c.Z)("ShoppingUpsellStoryCard","/app/common/react/components/shopping/ShoppingUpsellStoryCard.tsx")},[]);let{logContextEvent:d}=(0,b.u)(),{action:u,id:h,objects:m,story_type:y,subtitle:f}=t,{text:x,url:_}=u||{},[v,k]=(0,p.useState)(!1),w=(0,p.useCallback)(()=>k(!0),[k]),j=(0,p.useCallback)(()=>k(!1),[k]),K=(m||[]).reduce((e,a)=>"pin"!==a.type?e:[...e,{domain:a.domain,image:{alt:a.title||a.description,height:a.images?.["474x"]?.height,url:a.images?.["474x"]?.url,width:a.images?.["474x"]?.width,price:(a.rich_summary?.products?.[0]||{}).offer_summary?.price}}],[]),E=(K[0]||{}).domain||void 0;["search_product_collage_story","shop_article_story"].includes(y||"")?(i=2,l=43,r={story_id:h,story_type:y,entered_query:a}):"shop_brand_story"===y||"shop_brand_affinity_story"===y?(i=1,l=92,E&&(r={story_type:y,commerce_data:JSON.stringify({domain:E})})):["stela_in_flashlight_card","stela_in_flashlight_onecol"].includes(y||"")?(i=72,l=3050):"related_domain_collage"===y?(i=72,l=3455):"related_products_collage"===y&&(i=1,l=3177);let L=()=>d({event_type:101,element:372,component:200,view_type:i,view_parameter:l,aux_data:{story_type:y}}),D=f?4:2;if(["related_domain_collage","shop_brand_story","shop_brand_affinity_story"].includes(y||"")&&u){let e=u.user;s=e&&(e.image_medium_url||e.image_large_url),o=e&&e.full_name}let R=e||_;if(!R)return null;let A=(0,C.Z)({url:R})?"nofollow":"none";return(0,S.jsx)(F.Fw,{componentType:200,contextLogData:r||{},impressionType:"Story",loggingId:y,slotIndex:n,viewParameter:l,viewType:i,children:({impressionTrackerRef:e})=>(0,S.jsx)(g.xu,{ref:e,children:(0,S.jsx)(g.Tg,{href:R,onTap:L,rel:A,children:(0,S.jsxs)(g.xu,{dangerouslySetInlineStyle:{__style:Z.container},onMouseEnter:w,onMouseLeave:j,overflow:"hidden",position:"relative",children:[(0,S.jsx)(M,{firstImageIndex:+!!["related_domain_collage","related_products_collage"].includes(y||""),images:K.map(({image:e})=>e)}),(0,S.jsx)(g.xu,{alignItems:"center",color:"secondary",display:"flex",justifyContent:"center",marginTop:2,paddingX:3,paddingY:D,rounding:"pill",children:(0,S.jsxs)(g.xu,{alignContent:"start",direction:"column",display:"flex",justifyContent:"center",margin:2,children:[f?(0,S.jsx)(g.xu,{marginBottom:1,children:(0,S.jsx)(g.xe,{align:"start",color:"subtle",children:f.format})}):null,(0,S.jsx)(g.xe,{align:"start",weight:"bold",children:x})]})}),o&&s&&(0,S.jsx)(g.xu,{margin:2,position:"absolute",right:!0,top:!0,children:(0,S.jsx)(P.qE,{name:o,outline:!0,size:"md",src:s})}),(0,S.jsx)(T.Z,{visibility:v?"visible":"none",children:(0,S.jsx)(I.Z,{additionalStyles:Z.visualOverlay})})]})})})})}var E=t(216975),L=t(935833);let D=(void 0!==n||(n=t(248894)).hash&&"610a35d46510240eb58e262c1909310c"!==n.hash&&console.error("The definition of 'BestPinCardAttribution_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n),R=()=>{(0,L.NC)("click_best_pin_board",!0)},A=()=>{(0,L.NC)("click_best_pin_profile",!0)},z=({pin:e})=>{let{pinner:a}=e,{username:t,fullName:n}=a??{},i=a?.imageMediumUrl||a?.imageSmallUrl,l=`/${t??""}/`;return(0,S.jsx)(g.Tg,{fullWidth:!1,href:l,onTap:A,rounding:"circle",children:(0,S.jsx)(P.qE,{name:n??"",outline:!0,size:"sm",src:i??""})})},$=({pin:e})=>{let a=(0,y.Z)(),{board:t,pinner:n}=e,{name:i,privacy:l,url:r}=t??{},s=t?.entityId||"",{username:o,fullName:d}=n??{},u=`/${o??""}/`,c=(0,S.jsx)(g.xe,{inline:!0,size:"200",weight:"bold",children:(0,S.jsx)(g.rU,{display:"inlineBlock",href:u,onClick:A,underline:"hover",children:d})},d);return"protected"===l?(0,E.nk)(a._('{{ pinnerName }} saved this Pin', 'Showing who saved this pin, but not which board (private board), on closeup', 'Showing who saved this pin, but not which board (private board), on closeup'),{pinnerName:c}):(0,E.nk)(a._('{{ pinnerName }} saved to {{ boardName }}', 'Showing who saved this pin to which board on closeup', 'Showing who saved this pin to which board on closeup'),{pinnerName:c,boardName:(0,S.jsx)(g.xe,{inline:!0,size:"200",weight:"bold",children:(0,S.jsx)(g.rU,{href:r??"",onClick:R,children:i},"board")},s)})},O=({pinKey:e})=>{(0,p.useEffect)(()=>{(0,c.Z)("BestPinCardAttribution","/app/packages/BestPinCard/BestPinCardAttribution.tsx")},[]);let a=(0,h.Z)(D,e);return(0,S.jsxs)(g.xu,{alignItems:"center","data-test-id":"pin-attribution",direction:"row",display:"flex",marginTop:3,children:[(0,S.jsx)(z,{pin:a}),(0,S.jsx)(g.xu,{marginEnd:2}),(0,S.jsx)(g.xe,{size:"200",children:(0,S.jsx)($,{pin:a})})]})},H=e=>{e.target&&e.target instanceof HTMLElement&&(e.target.style.textDecoration="underline")},U=e=>{e.target&&e.target instanceof HTMLElement&&(e.target.style.textDecoration="none")};var B=t(104999);function N({pageType:e,pinCreditPrefix:a,pin:t,pinLink:n,viewParameter:i}){(0,p.useEffect)(()=>{(0,c.Z)("BestPinCardClickthroughLink","/app/packages/BestPinCard/BestPinCardClickthroughLink.tsx")},[]);let l=(0,y.Z)(),r=(0,B.Z)();if("topic"!==e.page&&(!t.domain||"Uploaded by user"===t.domain))return null;let s="topic"!==e.page||e.isAuth?"100":"200",o="topic"===e.page&&!!t.nativeCreator,d=o?t.nativeCreator?.fullName:t.domain;return(0,S.jsx)(g.xu,{display:"flex",flex:"none",justifyContent:"start",marginBottom:2,children:(0,S.jsx)(g.rU,{display:"inlineBlock",href:o?`/${t.nativeCreator?.username||""}/`:n,onClick:()=>{"topic"===e.page?(0,L.NC)("click_topic_best_pin_link"):r({event_type:12,view_type:3,object_id_str:t.entityId,component:85,view_parameter:i})},rel:"nofollow",target:"blank",underline:"hover",children:(0,S.jsx)(g.xe,{size:s,children:(0,E.nk)(l._('{{ pinCreditPrefix }} {{ pinCredit }}', 'Tells the user where the pin is from in the form of "Saved from <website>"', 'Tells the user where the pin is from in the form of "Saved from <website>"'),{pinCreditPrefix:a,pinCredit:(0,S.jsx)(g.xe,{inline:!0,size:s,weight:"bold",children:"topic"!==e.page?(0,S.jsxs)("span",{"data-gestalt-valid-html":"Text",onBlur:U,onFocus:H,onMouseLeave:U,onMouseOver:H,children:[" ",t.domain]}):d},o?"creatorProfile":"pinLinkDomain")})})})})}var W=t(735571),V=t(124631),Y=t(816438),G=t(331506),X=t(228121),q=t(455211),J=t(891851),Q=t(912023),ee=t(132781);let ea=(void 0!==i||(i=t(426344)).hash&&"12f77507a9fdec344b44b7e659fa5ac1"!==i.hash&&console.error("The definition of 'RecipeMetadata_recipe' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function et({recipeKey:e}){(0,p.useEffect)(()=>{(0,c.Z)("RecipeMetadata","/app/packages/recipePin/RecipeMetadata.tsx")},[]);let a=(0,h.Z)(ea,e);if(a?.aggregateRating?.ratingValue&&a.aggregateRating.reviewCount){let e="number"==typeof a.cookTimes?.cook?.m&&"number"==typeof a.cookTimes.prep?.m?`${a.cookTimes.cook.m+a.cookTimes.prep.m} minutes \xb7 `:"";return(0,S.jsxs)(p.Fragment,{children:[(0,S.jsx)(ee.Z,{max_rating:a.aggregateRating.bestRating,rating:a.aggregateRating.ratingValue},a.aggregateRating.ratingValue),(0,S.jsx)(g.xe,{inline:!0,size:"200",children:` ${a.aggregateRating.reviewCount} \xb7 ${e}`})]})}return null}var en=t(774838);let ei=(void 0!==l||(l=t(981838)).hash&&"81db65fd15680cc0281b801ed4a8cb94"!==l.hash&&console.error("The definition of 'BestPinCardBody_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l);function el(e){(0,p.useEffect)(()=>{(0,c.Z)("BestPinCardBody","/app/packages/BestPinCard/BestPinCardBody.tsx")},[]);let{pinKey:a,viewportSize:t,pageType:n}=e,i=(0,h.Z)(ei,a),{pinCreditPrefix:l,pinLink:r}=(0,X.Z)(i),s=(0,q.Z)(i),{description:o}=(0,G.eK)({richMetadataDescription:i.richMetadata?.description,richSummaryDisplayName:i.richSummary?.displayName,closeupUnifiedDescription:i.closeupUnifiedDescription});"videos_category"===n.page&&(o=(0,G.kt)(o,i.nativeCreator?.username||""));let d="wide"===t,u=(0,G.Ly)({pinTitle:i.title,gridTitle:i.gridTitle,richSummaryDisplayName:i.richSummary?.displayName??"",richMetadataTitle:i.richMetadata?.title??"",storyPinDataId:i.storyPinDataId,storyPinDataMetadataPinTitle:i.storyPinData?.metadata?.pinTitle,pinJoinVisualAnnotation:i.pinJoin?.visualAnnotation});(i.gridTitle||"").trim()&&u!==i.gridTitle&&(u=(0,G.EU)(i.gridTitle,200));let m=(0,Y.r)(i.richMetadata?.recipe?.name,!!i.richMetadata?.recipe?.categorizedIngredients,i.richMetadata?.recipe?.fromAggregatedData??!1)?i.richMetadata?.recipe:null,y=!!(i.richMetadata&&i.richMetadata.article&&i.richMetadata.article.datePublished)&&((e,a)=>{let t=new Date((e.richMetadata??{}).article?.datePublished??Date.now()),n=t.getTime();return new Date().getTime()-n<=63072e6?(0,S.jsx)(W.Z,{dateFormatType:W.k.LONG_MONTH_YEAR,useUTC:!1,value:t}):""})(i,0),f=(e=>{let a,t,n="";if(e.richMetadata&&e.richMetadata.article&&e.richMetadata.article.datePublished)return n;let i=(a=null,e.lastRepinDate&&(a=new Date(e.lastRepinDate)),t=null,(e.createdAt&&(t=new Date(e.createdAt)),a)?t?a>t?a:t:a:t);if(i&&i.getFullYear()===new Date().getFullYear()){let a=new Set(["film_music_books","art","home_decor","food_drink","womens_fashion","travel","weddings","hair_beauty","holidays_events","mens_fashion","products","celebrities","technology"]),{category:t}=e;a.has(t)&&(n=i?(0,S.jsx)(W.Z,{dateFormatType:W.k.LONG_MONTH_YEAR,useUTC:!1,value:i}):"")}return n})(i)||y,{isBot:x,isSocialBot:_}=(0,en.B)();return(0,S.jsx)(g.xu,{alignContent:"between","data-test-id":"UnauthBestPinCardBodyContainer",direction:"column",display:"flex",flex:"grow",padding:8,position:"relative",width:"100%",children:(0,S.jsxs)(g.xu,{direction:"column",display:"flex",flex:"grow",position:"relative",children:[(0,S.jsx)(N,{pageType:n,pin:{entityId:i.entityId,domain:i.domain||"",nativeCreator:i.nativeCreator&&{fullName:i.nativeCreator.fullName,username:i.nativeCreator.username}},pinCreditPrefix:"topic"===n.page&&i.nativeCreator?"Created by":l,pinLink:r??"",viewParameter:(0,J.Z)({hasPin:!0,hasPinRichMetadata:!!i.richMetadata,hasPinRichMetadataProducts:!!i.richMetadata?.products,hasPinRichMetadataArticle:!!i.richMetadata?.article,hasPinRichMetadataRecipe:!!i.richMetadata?.recipe,hasPinStoryPinData:!!i.storyPinData})}),(0,S.jsx)(g.kC,{direction:"row",justifyContent:"between",children:(0,S.jsx)(g.xu,{display:"flex",marginEnd:3*!d,marginTop:3*!!d,overflow:"hidden",children:u&&(0,S.jsx)("h2",{"data-test-id":"UnauthBestPinCardTitle",style:{fontWeight:600,fontSize:"28px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:u})})}),f?(0,S.jsx)(g.xu,{marginTop:1,children:(0,S.jsx)(g.xe,{color:"subtle",children:f})}):null,o&&(0,S.jsx)(g.xu,{display:"flex",marginTop:3,overflow:"hidden",children:(0,S.jsxs)("h3",{style:{fontWeight:"normal",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",fontSize:"14px"},children:[m&&(0,S.jsx)(et,{recipeKey:m}),o]})}),m&&(0,S.jsx)(Q.Z,{marginOverrides:m?{outerMarginTop:32,ingredientMarginBottom:4}:null,recipeProps:{recipe:{categorizedIngredients:m.categorizedIngredients,name:m.name,image:(0,V.Z)({imagesUrls:s,embedSrc:i.embed?.src,embedType:i.embed?.type,excludeOriginals:!x&&!_})}}}),(0,S.jsx)(g.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginTop:2,children:(0,S.jsx)(O,{pinKey:i})})]})})}var er=t(221175),es=t(407504);let eo={nw:0,ne:90,se:180,sw:270},ed={ne:[7,-7],se:[7,7],sw:[-7,7],nw:[-7,-7]},eu={nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};function ec({corner:e,x:a,y:t,size:n,cornerStyle:i}){return(0,p.useEffect)(()=>{(0,c.Z)("CropperCorner","/app/packages/Cropper/CropperCorner.tsx")},[]),(0,S.jsxs)("g",{"data-test-id":`cropper-corner-${e}`,style:{cursor:eu[e],pointerEvents:"auto"},transform:((e,a,t,n)=>{if("rounded"!==n)return`translate(${a}, ${t}), rotate(${eo[e]})`;{let[n,i]=ed[e];return`translate(${a+n}, ${t+i}), rotate(${eo[e]})`}})(e,a,t,i),children:[(0,S.jsx)("rect",{className:`cropperHandle ${e}`,fill:"rgba(0,0,0,0)",height:n,stroke:"none",width:n,x:0,y:0}),"rounded"===i?(0,S.jsx)("path",{className:`cropperHandle ${e}`,d:"M16 0H24V8H16C11.5817 8 8 11.5817 8 16V24H0V16C0 7.16343 7.16345 0 16 0Z",fill:"#fff"}):(0,S.jsx)("path",{className:`cropperHandle ${e}`,d:`M ${n} 0 L 0 0 L 0 ${n}`,fill:"none",stroke:"#fff",strokeWidth:6})]})}let ep={n:"ns-resize",s:"ns-resize",e:"ew-resize",w:"ew-resize"};function eg({edge:e,x:a,y:t,w:n,h:i}){return(0,p.useEffect)(()=>{(0,c.Z)("CropperEdge","/app/packages/Cropper/CropperEdge.tsx")},[]),(0,S.jsx)("rect",{className:`cropperHandle ${e}`,fill:"rgba(0,0,0,0)",height:i,stroke:"none",style:{cursor:ep[e],pointerEvents:"auto"},width:n,x:a,y:t})}function eh({x:e,y:a,w:t,h:n}){(0,p.useEffect)(()=>{(0,c.Z)("CropperHandles","/app/packages/Cropper/CropperHandles.tsx")},[]);let i="rounded";return(0,S.jsxs)(p.Fragment,{children:[(0,S.jsx)(ec,{corner:"nw",cornerStyle:i,size:20,x:e,y:a}),(0,S.jsx)(ec,{corner:"ne",cornerStyle:i,size:20,x:e+t,y:a}),(0,S.jsx)(ec,{corner:"sw",cornerStyle:i,size:20,x:e,y:a+n}),(0,S.jsx)(ec,{corner:"se",cornerStyle:i,size:20,x:e+t,y:a+n}),(0,S.jsx)(eg,{edge:"n",h:30,w:Math.max(t-40,0),x:e+20,y:a-10}),(0,S.jsx)(eg,{edge:"e",h:Math.max(n-40,0),w:30,x:e+t-20,y:a+20}),(0,S.jsx)(eg,{edge:"s",h:30,w:Math.max(t-40,0),x:e+20,y:a+n-10}),(0,S.jsx)(eg,{edge:"w",h:Math.max(n-40,0),w:30,x:e-20,y:a+20})]})}var em=t(325574),ey=t(480706),ef=t(59111),ex=t(893957),e_=t(979173);function ev(e){(0,p.useEffect)(()=>{(0,c.Z)("Cropper","/app/packages/Cropper/Cropper.tsx")},[]);let{children:a,cropArea:t,imageSize:n,objectDetection:i,onChange:l,previewCropArea:r,showPreviewArea:s,viewParameter:o,viewType:d}=e,u=(0,B.Z)(),h=(0,p.useRef)(null),m=(0,p.useRef)(null),[y,f]=(0,p.useState)(0),[x,_]=(0,p.useState)(0),[v,k]=(0,p.useState)(0),[w,b]=(0,p.useState)(0),[P,F]=(0,p.useState)((0,em.Z)({cropArea:t,imageSize:n})),[j,C]=(0,p.useState)(null),[T,I]=(0,p.useState)(null),[Z,M]=(0,p.useState)(!1),[K,E]=(0,p.useState)(!1),L=e=>{e.preventDefault(),e.stopPropagation();let{clientX:a,clientY:t}=e,n=a-y,i=t-x;E(!1),k(n),b(i);let l=e.target,r=l.classList.contains("cropperHandle"),s="shadowMask"===l.id,o="cropSection"===l.id,d=l.id===ey.P,u=l.id===e_.I;r?(C("resize"),l.classList.contains("ne")?I("ne"):l.classList.contains("nw")?I("nw"):l.classList.contains("se")?I("se"):l.classList.contains("sw")?I("sw"):l.classList.contains("n")?I("n"):l.classList.contains("s")?I("s"):l.classList.contains("e")?I("e"):l.classList.contains("w")&&I("w")):s?(C("select"),F(er.OI)):o?C("move"):(P.x<n&&n<P.x+P.w&&P.y<i&&i<P.y+P.h?C("move"):(C("select"),F(er.OI)),M(d||u))},D=e=>{if(!j)return;M(!1);let{clientX:a,clientY:t}=e,i=a-y,l=t-x;if("resize"===j){let e=Math.max(Math.min(i,(n.width??1)-er.SP),er.SP),a=Math.max(Math.min(l,(n.height??1)-er.SP),er.SP),{x:t,y:r,w:s,h:o}=P;switch(T){case"ne":e<t&&a>r+o?I("sw"):e<t?I("nw"):a>r+o&&I("se");break;case"nw":e>t+s&&a>r+o?I("se"):e>t+s?I("ne"):a>r+o&&I("sw");break;case"se":e<t&&a<r?I("nw"):e<t?I("sw"):a<r&&I("ne");break;case"sw":e>t+s&&a<r?I("ne"):e>t+s?I("se"):a<r&&I("nw");break;case"n":a>r+o&&I("s");break;case"s":a<r&&I("n");break;case"e":e<t&&I("w");break;case"w":e>t+s&&I("e")}switch(T){case"ne":F(({x:t,y:n,h:i})=>{let l=Math.max(e-t,er.xZ),r=Math.max(i+(n-a),er.xZ);return{x:t,y:r<=er.xZ?n:a,w:l,h:r}});break;case"nw":F(({x:t,y:n,w:i,h:l})=>{let r=Math.max(i+(t-e),er.xZ),s=Math.max(l+(n-a),er.xZ);return{x:r===er.xZ?t:e,y:s===er.xZ?n:a,w:r,h:s}});break;case"se":F(({x:t,y:n})=>{let i=Math.max(e-t,er.xZ),l=Math.max(a-n,er.xZ);return{x:t,y:n,w:i,h:l}});break;case"sw":F(({x:t,y:n,w:i})=>{let l=Math.max(i+(t-e),er.xZ),r=Math.max(a-n,er.xZ);return{x:l===er.xZ?t:e,y:n,w:l,h:r}});break;case"n":F(({x:e,y:t,w:n,h:i})=>{let l=Math.max(t-a+i,er.xZ);return{x:e,y:l===er.xZ?t:a,w:n,h:l}});break;case"s":F(({x:e,y:t,w:n})=>{let i=Math.max(a-t,er.xZ);return{x:e,y:t,w:n,h:i}});break;case"e":F(({x:a,y:t,h:n})=>{let i=Math.max(e-a,er.xZ);return{x:a,y:t,w:i,h:n}});break;case"w":F(({x:a,y:t,w:n,h:i})=>{let l=Math.max(n-e+a,er.xZ);return{x:l===er.xZ?a:e,y:t,w:l,h:i}})}}else if("move"===j){let e=i-v,a=l-w,t=Math.max(Math.min(P.x+e,(n.width??1)-P.w-er.SP),er.SP),r=Math.max(Math.min(P.y+a,(n.height??1)-P.h-er.SP),er.SP);k(i),b(l),F(({w:e,h:a})=>({x:t,y:r,w:e,h:a}))}else if("select"===j){let e=Math.max(Math.min(i,n.width??1),0),a=Math.max(Math.min(l,n.height??1),0);F({x:Math.min(v,e),y:Math.min(w,a),w:Math.abs(e-v),h:Math.abs(a-w)})}},R=()=>{if(C(null),I(null),M(!1),j){if(Z&&"dots"===i)return void E(!0);if(0===P.w&&0===P.h)l({cropArea:{x:er.SP,y:er.SP,w:(n.width??1)-2*er.SP,h:(n.height??1)-2*er.SP},cropSource:5}),u({event_type:16586,view_type:d,view_parameter:o});else{let e,a,t=Math.max(Math.min(P.x,(n.width??1)-er.xZ-er.SP),er.SP),i=Math.max(Math.min(P.y,(n.height??1)-er.xZ-er.SP),er.SP);e=P.h<er.xZ?er.xZ:i+P.h>(n.height??1)-er.SP?(n.height??1)-i-er.SP:P.h,a=P.w<er.xZ?er.xZ:t+P.w>(n.width??1)-er.SP?(n.width??1)-t-er.SP:P.w,"move"===j?u({event_type:7603,view_type:d,view_parameter:o}):"resize"===j?u({event_type:7604,view_type:d,view_parameter:o}):"select"===j&&u({event_type:16584,view_type:d,view_parameter:o}),l({cropArea:{x:t,y:i,w:a,h:e},cropSource:6})}}};return(0,ex.Z)(()=>{if(m.current){let{x:e,y:a}=m.current.getBoundingClientRect();f(e),_(a)}}),(0,p.useEffect)(()=>{K&&F(t??er.OI)},[t,K]),(0,p.useEffect)(()=>{let e=m.current;return e&&(e.addEventListener("mousedown",L),window.addEventListener("mousemove",D),window.addEventListener("mouseup",R)),()=>{e&&(e.removeEventListener("mousedown",L),window.removeEventListener("mousemove",D),window.removeEventListener("mouseup",R))}}),(0,S.jsxs)(g.xu,{ref:m,dangerouslySetInlineStyle:{__style:{cursor:"crosshair"}},"data-test-id":"visual-search-cropper",height:"100%",left:!0,position:"absolute",top:!0,width:"100%",children:[(0,S.jsx)(ef.Z,{unsafeCSS:er.iC}),(0,S.jsxs)("svg",{"data-gestalt-valid-html":"Box",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:[(0,S.jsx)("defs",{children:(0,S.jsxs)("mask",{id:"Mask",children:[(0,S.jsx)("rect",{fill:"white",height:n.height??"100%",rx:"0",ry:"0",width:n.width??"100%",x:"0",y:"0"}),(0,S.jsx)("rect",{height:P.h,id:"hole",rx:0,ry:0,width:P.w,x:P.x,y:P.y},`${P.x}${P.y}`),(0,S.jsx)(es.Z,{classNames:"preview-crop-area",in:s&&!j,mountOnEnter:!0,nodeRef:h,timeout:300,unmountOnExit:!0,children:(0,S.jsx)(g.xu,{ref:h,children:(0,S.jsx)("rect",{height:r.h,id:"preview",rx:4,ry:4,width:r.w,x:r.x,y:r.y},`${r.x}${r.y}`)})})]})}),(0,S.jsx)("rect",{fill:"rgba(0,0,0,0.5)",height:"100%",id:"shadowMask",mask:"url(#Mask)",width:"100%",x:"0",y:"0"}),(0,S.jsx)("use",{className:"v2cropSection","data-test-id":"cropper-section",fill:"rgba(0,0,0,0)",href:"#hole",id:"cropSection",stroke:"white",strokeWidth:"2",style:{cursor:"move"}})]}),a,(0,S.jsx)("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"},children:"select"!==j&&(0,S.jsx)(eh,{h:P.h,w:P.w,x:P.x,y:P.y})})]})}function ek({showAnimation:e,auxData:a,index:t,isStela:n,onClick:i,onHover:l,onUnhover:r,spotlightCenter:s,viewParameter:o,viewType:d}){(0,p.useEffect)(()=>{(0,c.Z)("FlashlightSpotlightDot","/app/packages/Flashlight/FlashlightSpotlightDot.tsx")},[]);let u=(0,B.Z)(),g=n?1221:1260;(0,ex.Z)(()=>{u({event_type:120,element:g,aux_data:a,view_parameter:o,view_type:d})});let h=parseFloat((.1*(t+1)).toFixed(2)),m={animation:e?`spotlightDotPop 0.6s ease-out ${h}s both`:"none"};return(0,S.jsx)(ey.Z,{onClick:()=>{u({aux_data:a,element:g,event_type:101,view_parameter:o,view_type:d}),i(t)},onMouseEnter:({event:e})=>{e&&(e.stopPropagation(),e.preventDefault()),l?.(t)},onMouseLeave:({event:e})=>{e&&(e.stopPropagation(),e.preventDefault()),r?.()},style:m,x:s.x,y:s.y})}var eS=t(575647),ew=t(383903);let eb=`
@keyframes spotlightDotPop {
  0% {
    transform: scale(0);
  }

  100% {
    transform: scale(1);
  }
}`,eP=(void 0!==r||(r=t(85729)).hash&&"3a8409077905af94eb39568e4a5a57fc"!==r.hash&&console.error("The definition of 'FlashlightSpotlightDots_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),eF=({showAnimation:e,pinKey:a,imageSignature:t,imageSize:n,currentSpotlightIdx:i,handleSpotlightClick:l,handleSpotlightHover:r,handleSpotlightUnhover:s,viewParameter:o,viewType:d,visualObjects:u})=>{(0,p.useEffect)(()=>{(0,c.Z)("FlashlightSpotlightDots","/app/packages/Flashlight/FlashlightSpotlightDots.tsx")},[]);let g=(0,h.Z)(eP,a),m=(0,eS.Z)(g),y=g?(g.visualObjects??[]).filter(e=>e.isStela):u??[];return(0,S.jsxs)(p.Fragment,{children:[(0,S.jsx)(ef.Z,{unsafeCSS:eb}),y.map((a,u)=>{if(u===i)return null;let{x:c,y:p,w:h,h:y}=a,f=(0,ew.Z)({cropArea:{x:c,y:p,w:h,h:y},scaledWidth:n.width??0,scaledHeight:n.height??0}),x={x:f.x+f.w/2,y:f.y+f.h/2},_={...m({override:{entrypoint:"flashlight"}}),pin_id:g?.entityId??"",image_signature:t,visual_objects:JSON.stringify([{x:a.x,y:a.y,w:a.w,h:a.h}])},v=`${x.x}${x.y}`;return(0,S.jsx)(ek,{auxData:_,index:u,isStela:!!a?.isStela,onClick:l,onHover:r,onUnhover:s,showAnimation:e,spotlightCenter:x,viewParameter:o,viewType:d},v)})]})};var ej=t(128608),eC=t(246427),eT=t(958306);let eI=(void 0!==s||(s=t(60899)).hash&&"939d46d8644385a7918ed8179ce77a4c"!==s.hash&&console.error("The definition of 'UnauthCropperContainer_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s);function eZ({cropArea:e,customCropper:a,imageSignature:t,imageSize:n,pinKey:i,showAnimation:l,trafficSource:r,viewParameter:s,viewType:o}){(0,p.useEffect)(()=>{(0,c.Z)("UnauthCropperContainer","/app/packages/Flashlight/UnauthCropperContainer.tsx")},[]);let d=(0,h.Z)(eI,i),[u,g]=(0,p.useState)("none"),[m,y]=(0,p.useState)(!1),[f,x]=(0,p.useState)({x:0,y:0,w:0,h:0}),[_,v]=(0,p.useState)({isCropAreaOnDotArea:!1,indexToHide:-1}),{indexToHide:k}=_,w=(0,p.useMemo)(()=>(d.visualObjects??[]).filter(e=>e.isStela).map(eT.Z),[d.visualObjects]);return(0,p.useEffect)(()=>{let a=w&&!!w.length,t=(0,eC.Z)({cropArea:e,scaledHeight:n.height??0,scaledWidth:n.width??0});a&&(g("dots"),v((0,ej.Z)(w,t)))},[e,n.height,n.width,w]),(0,S.jsx)(ev,{cropArea:e,imageSize:n,objectDetection:u,onChange:a,previewCropArea:f,showPreviewArea:!1,viewParameter:s,viewType:o,children:"dots"===u&&(0,S.jsx)(eF,{currentSpotlightIdx:k,handleSpotlightClick:e=>{let{x:t,y:i,w:l,h:s,title:o}=w[e];a({cropArea:(0,ew.Z)({cropArea:{x:t,y:i,w:l,h:s},scaledHeight:n.height??0,scaledWidth:n.width??0}),cropSource:4,trafficSource:r,title:o||""})},handleSpotlightHover:e=>{if(e===k)return;let{x:a,y:t,w:i,h:l}=w[e];x((0,ew.Z)({cropArea:{x:a,y:t,w:i,h:l},scaledWidth:n.width??0,scaledHeight:n.height??0})),y(!0)},handleSpotlightUnhover:()=>{y(!1)},imageSignature:t,imageSize:n,pinKey:d,showAnimation:l,viewParameter:s,viewType:o})},JSON.stringify(e))}var eM=t(173874),eK=t(382964),eE=t(112658),eL=t(736328),eD=t(116980),eR=t(341687),eA=t(371266),ez=t(619784),e$=t(285676),eO=t(254889),eH=t(838855),eU=t(520803);let eB=0,eN="",eW=(void 0!==o||(o=t(136209)).hash&&"0193da1983487c7c302a6a09a3f34b0a"!==o.hash&&console.error("The definition of 'UnauthDesktopFlashlightPage_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o);function eV(e){let{images_564x:a,images_orig:t,imageSignature:n}=e,i=a&&t,{url:l}=i??{},r=i?.width??1,s=i?.height??void 0;return"number"==typeof r&&"number"==typeof s&&r>564&&(s*=564/r,r=564),{width:r,height:s,url:l,imageSignature:n}}let eY=({data:e,index:a,viewParameter:t,productsURL:n})=>{switch(e.type){case"pin":return(0,S.jsx)(e$.r,{pinId:e.id,pinKey:{type:"Legacy",data:e},slotIndex:a,viewParameter:t,viewType:72});case"story":return n&&(0,S.jsx)(K,{dangerouslySetActionUrl:n,slotIndex:a,story:e});default:return null}},eG=({resourceOptions:e})=>{let a=(0,y.Z)(),{data:t,isAtEnd:n,isFetching:i,fetchMore:l}=(0,f.Z)({name:"VisualLiveSearchResource",options:e}),r=(0,_.TH)(),s=`${r.pathname}products/${r.search}`;return(0,S.jsxs)(p.Fragment,{children:[t&&(0,S.jsx)(eH.Z,{customLayoutType:"desktopFlashlight",feedItems:t.results||[],feedKey:"flashlight-dweb-unauth",pagination:{loadNext:l,hasNext:n,isLoadingNext:i,refetch:()=>void 0},renderFeedItem:(e,a)=>eY({data:e,index:a,viewParameter:3050,productsURL:s})}),(0,S.jsx)(g.xH,{accessibilityLabel:a._('Loading visual search results...', 'unauthDesktopVisualSearch.flashlightFeed.loading', 'Accessibility label for loading visual search results'),show:i})]})},eX=({resourceOptions:e})=>{let a=(0,y.Z)(),{data:t,isAtEnd:n,isFetching:i,fetchMore:l}=(0,f.Z)({name:"VisualLiveSearchProductFeedResource",options:e});return(0,S.jsxs)(p.Fragment,{children:[t&&(0,S.jsx)(eH.Z,{customLayoutType:"desktopFlashlight",feedItems:t||[],feedKey:"flashlight-products-dweb-unauth",pagination:{loadNext:l,hasNext:n,isLoadingNext:i,refetch:()=>void 0},renderFeedItem:(e,a)=>eY({data:e,index:a,viewParameter:3334})}),(0,S.jsx)(g.xH,{accessibilityLabel:a._('Loading visual search product results...', 'unauthDesktopVisualSearch.flashlightProductFeed.loading', 'Accessibility label for loading visual search product results'),show:i})]})};function eq({pinKey:e}){(0,p.useEffect)(()=>{(0,c.Z)("UnauthDesktopFlashlightPage","/app/www/VisualSearch/UnauthDesktopFlashlightPage.tsx")},[]);let a=(0,y.Z)(),{isRTL:t}=(0,en.B)(),n=(0,B.Z)(),i=(0,_.s0)(),l=(0,_.TH)(),r=(0,p.useRef)(null),s=(0,eU.Z)(),o=(0,eL.Z)(),{pinId:d}=(0,x.Z)(s.params.id||""),u=(0,eR.Z)(l.search),m=(0,k.Z)(l),f=function(e){let a=parseInt(e??"",10);switch(a){case 1:case 2:case 3:case 4:case 5:case 6:return a;default:return}}(u.cropSource),w=(0,eM.isFlashlightProductsPage)(l),b=(0,h.Z)(eW,e),{getNormalizedPinImage:P}=(0,eK.Z)({pinKey:b});if((0,p.useEffect)(()=>{if(!m&&b){let{width:e,height:a}=P();i((0,ez.Z)({cropArea:{h:a-2*er.SP,w:e-2*er.SP,x:er.SP,y:er.SP},isProductPage:w,pinId:d,surfaceType:"flashlight"}),{replace:!0})}},[P,i,m,w,b,d]),(0,ex.Z)(()=>{n({event_type:13,view_type:72,view_parameter:3050,view_data:{pin_id:d}})}),(0,p.useEffect)(()=>{let e=r.current;return e&&eN===d&&(e.scrollTop=eB),()=>{e&&(eB=e.scrollTop,eN=d)}}),!b)return(0,S.jsx)(eE.Z,{objectId:"",view:72,children:(0,S.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{top:eD.Pw}},position:"relative",children:(0,S.jsx)(g.xH,{accessibilityLabel:a._('Loading Pin data', 'unauthDesktopFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0})})});let{imageSignature:F,description:j}=b,{width:C,height:T,url:I}=eV(b),Z=function({initialCropArea:e,pin:a}){let t;if(e)t={...e};else{let{visualObjects:e}=a,{width:n=1,height:i=1}=eV(a);if(e&&e.length){let{x:a,y:l,w:r,h:s}=e[0];t=(0,ew.Z)({cropArea:{x:a,y:l,w:r,h:s},scaledWidth:n,scaledHeight:i})}else{let[e,a]=[n/6,i/6],[l,r]=[n-2*e,i-2*a];t={x:e,y:a,w:l,h:r}}}return{x:Math.floor(t.x??0),y:Math.floor(t.y??0),w:Math.floor(t.w??0),h:Math.floor(t.h??0)}}({initialCropArea:m,pin:b}),M=l.state&&l.state.internalNavigation,K=C+v.n,E=(K??1)+24,L={pin_id:d,imageSignature:F,crop:(0,eC.Z)({cropArea:Z,scaledWidth:C,scaledHeight:T}),crop_source:f||5},D={__style:{top:140}};return(0,S.jsx)(eE.Z,{objectId:"",view:72,children:(0,S.jsxs)(p.Fragment,{children:[(0,S.jsxs)(g.xu,{alignItems:"center",color:"default",dangerouslySetInlineStyle:{__style:{top:80}},display:"flex",height:60,position:"fixed",width:"100%",zIndex:new g.Ry(4),children:[!t&&(0,S.jsx)(g.xu,{left:!0,position:"absolute",children:(0,S.jsx)(eO.default,{})}),(0,S.jsx)(g.xu,{flex:"grow",children:(0,S.jsx)(g.qd,{align:"center",size:"400",children:w?a._('Shop similar items', 'unauthDesktopFlashlightPage.flashlightProductsFeed.header', 'Header explaining results of flashlight products search'):a._('Visually similar results', 'unauthDesktopFlashlightPage.flashlightFeed.header', 'Header explaining results of flashlight search')})}),t&&(0,S.jsx)(g.xu,{position:"absolute",right:!0,children:(0,S.jsx)(eO.default,{icon:"arrow-left"})})]}),w?(0,S.jsx)(g.xu,{dangerouslySetInlineStyle:D,position:"relative",children:(0,S.jsx)(eX,{resourceOptions:L})}):(0,S.jsxs)(g.xu,{display:"flex",paddingX:12,children:[(0,S.jsxs)(g.xu,{ref:r,dangerouslySetInlineStyle:D,height:"calc(100% - 140px)",marginEnd:3,marginStart:3,overflow:"auto",position:"fixed",width:K,zIndex:new g.Ry(4),children:[(0,S.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{width:C,height:T}},"data-test-id":"flashlight-enabled-image",children:(0,S.jsxs)(g.zd,{height:T,rounding:200,width:C,children:[I&&(0,S.jsx)(g.Ee,{alt:j??"",naturalHeight:T??1,naturalWidth:C??1,src:I}),(0,S.jsx)(eZ,{cropArea:Z,customCropper:function({cropArea:e,cropSource:a}){let t=window.location.pathname+window.location.search,n=(0,ez.Z)({cropArea:e,cropSource:a??6,isProductPage:w,pinId:d,surfaceType:"flashlight"});o({action:"trigger",item:"cropper-changed",within:"flashlight-page"}),n!==t&&d&&i({pathname:`/pin/${d}/visual-search/`,search:(0,eA.Z)({cropArea:e,cropSource:a??6,surfaceType:"flashlight"})},{state:{internalNavigation:!0}})},imageSignature:F??void 0,imageSize:{height:T,width:C},pinKey:b,showAnimation:!M,surfaceType:"flashlight",viewParameter:3050,viewType:72})]})}),(0,S.jsx)(g.xu,{"data-test-id":"closeupDescription",direction:"column",display:"flex",margin:5,maxWidth:C??1,position:"relative",children:(0,S.jsx)(el,{pageType:{isAuth:!1,page:"flashlight"},pinKey:b,viewportSize:"narrow"})})]}),(0,S.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{...D.__style,...t?{marginRight:`${E}px`}:{marginLeft:`${E}px`}}},position:"relative",width:"100%",children:(0,S.jsx)(eG,{resourceOptions:L})})]})]})})}let eJ=(void 0!==d||(d=t(887492)).hash&&"01839fc3bcd9cdaf206873364167d157"!==d.hash&&console.error("The definition of 'UnauthDesktopFlashlightPageFetchData_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),d),eQ=(void 0!==u||(u=t(854734)).hash&&"76ab21d7bfe8df8a1418aea805bb41fa"!==u.hash&&console.error("The definition of 'UnauthDesktopFlashlightPageFetchDataPinQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),u);function e0(){let e=(0,eU.Z)(),{pinId:a}=(0,x.Z)(e.params.id||""),t=(0,m.Z)({strategy:"Legacy",query:eQ,variables:{pinId:a},useGetLegacyData:({pinId:e})=>(0,f.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed",fetch_visual_search_objects:!0}}).data}),n=t?.v3GetPinQuery?.__typename==="V3GetPin"?t.v3GetPinQuery.data:null,i=(0,h.Z)(eJ,n);return(0,S.jsx)(eq,{pinKey:i})}function e1(){(0,p.useEffect)(()=>{(0,c.Z)("UnauthDesktopFlashlightPageFetchData","/app/www/VisualSearch/UnauthDesktopFlashlightPageFetchData.tsx")},[]);let e=(0,y.Z)();return(0,S.jsx)(p.Suspense,{fallback:(0,S.jsx)(g.xH,{accessibilityLabel:e._('Loading Pin data', 'unauthDesktopFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0}),children:(0,S.jsx)(e0,{})})}},854929:function(e,a,t){t.d(a,{Z:()=>h});var n=t(686659),i=t(667294),l=t(312048),r=t(391995),s=t(230201),o=t(400962),d=t(24246),u=t(854897),c=t(902123),p=t(520803),g=t(785893);function h({defaultPillColor:e,hoveredPillColor:a,isLens:t,pressedPillColor:h,viewParameter:m,viewType:y}){(0,i.useEffect)(()=>{(0,n.Z)("VisualSearchCancelButton","/app/www/VisualSearch/VisualSearchCancelButton.tsx")},[]);let f=(0,d.Z)(),x=(0,l.s0)(),_=(0,p.Z)(),{active:v,focused:k,hovered:S,onBlur:w,onFocus:b,onMouseDown:P,onMouseEnter:F,onMouseLeave:j,onMouseUp:C}=(0,c.Z)(),{pinId:T}=(0,u.Z)(_.params.id||""),{previous:I}=(0,o.ou)(),{logContextEvent:Z}=(0,s.u)();return(0,g.jsx)(r.xu,{"data-test-id":"go-back-button",children:(0,g.jsx)(r.iP,{onBlur:w,onFocus:b,onMouseDown:P,onMouseEnter:F,onMouseLeave:j,onMouseUp:C,onTap:()=>(Z({event_type:101,view_type:y,element:34,view_parameter:m}),t)?void x("/",{replace:!0}):0===I.length?void x(T?`/pin/${T}/`:"/",{replace:!0}):void x(-1),tapStyle:"compress",children:(0,g.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{background:v?h:k||S?a:e,backdropFilter:"blur(80px)"}},padding:3,rounding:400,children:(0,g.jsx)(r.JO,{accessibilityLabel:f._('Go back', 'imageSearch.cancelButton', 'Cancel button for going back to the Pin page'),color:"default",icon:"close",size:24})})})})}},67854:function(e,a,t){t.d(a,{$V:()=>i,M:()=>n,Qs:()=>o,nn:()=>l,qN:()=>s,tX:()=>r});let n=520,i=600,l=16,r=4,s=2,o=6},911953:function(e,a,t){t.d(a,{Z:()=>l});var n=t(667294),i=t(730448);function l({scrollContainerRef:e}){let a=(0,n.useCallback)(a=>{let t=e.current,{buttons:n,clientY:i}=a;if(!t||1!==n||!i)return;let{top:l,bottom:r}=t.getBoundingClientRect(),s=window.innerHeight-l,o=t.scrollHeight,d=Math.max(0,l+20-i),u=Math.max(0,i-(r-20));if(d>0){let e=Math.min(d,100);t.scrollTop-=e}else if(u>0&&!(o<=s)){let e=Math.min(u,100);t.scrollTop+=e}},[e]);return{scrollCropperInView:(0,n.useMemo)(()=>(0,i.Z)(a,16),[a])}}},603284:function(e,a,t){t.d(a,{Z:()=>u});var n=t(686659),i=t(667294),l=t(746868),r=t(360033),s=t(495773),o=t(785893);class d extends i.Component{componentDidMount(){let{setCurrentPageData:e,viewData:a,viewParameter:t,viewType:n}=this.props;e({viewData:a,viewParameter:t,viewType:n})}componentDidUpdate(e){let{setCurrentPageData:a,viewData:t,viewParameter:n,viewType:i}=this.props;n===e.viewParameter&&i===e.viewType&&(0,r.ZP)(t,e.viewData)||a({viewData:t,viewParameter:n,viewType:i})}componentWillUnmount(){this.props.clearCurrentPageData()}render(){let{auxData:e,children:a,component:t,objectIdStr:n,viewData:i,viewParameter:l,viewType:r,clientTrackingParams:d}=this.props;return(0,o.jsx)(s.Z,{auxData:e,clientTrackingParams:d,component:t,objectIdStr:n,viewData:i,viewParameter:l,viewType:r,children:a})}}function u(e){(0,i.useEffect)(()=>{(0,n.Z)("PageView","/app/www/analytics/PageView.tsx")},[]);let{setViewContextData:a,clearViewContextData:t}=(0,l.A$)();return(0,o.jsx)(d,{...e,clearCurrentPageData:t,setCurrentPageData:a})}},495773:function(e,a,t){t.d(a,{Z:()=>r});var n=t(667294),i=t(104999),l=t(935833);function r(e){let{auxData:a,clientTrackingParams:t,children:r,component:s,element:o,objectIdStr:d,viewData:u,viewParameter:c,viewType:p}=e,g=(0,i.Z)(),h=JSON.stringify(a),m=JSON.stringify(u);return(0,n.useEffect)(()=>{(({viewType:e,viewParameter:a,viewData:t,auxData:n,objectIdStr:i,component:r,clientTrackingParams:s,element:o},d)=>{let u,c=Object.keys(u={event_type:13,view_type:e,view_parameter:a,view_data:t,aux_data:n,object_id_str:i,component:r,clientTrackingParams:s,element:o}).reduce((e,a)=>(void 0===u[a]&&delete e[a],e),{...u});-1===Object.keys(c).indexOf("view_type")&&(0,l.My)("mweb.logging.null_view_type"),d(c)})(e,g)},[g,h,t,s,o,d,m,c,p]),n.Children.only(r)}},234278:function(e,a,t){t.d(a,{Z:()=>g});var n=t(686659),i=t(667294),l=t(391995),r=t(320748),s=t(230201),o=t(774838),d=t(739405),u=t(893957),c=t(113759),p=t(785893);function g({actionButton:e,auxData:a,children:t,collapseButtonElementType:g,collapseByDefault:h=!0,componentType:m,disabled:y,displayViewState:f,expandButtonElementType:x,forceTappableHeader:_,headerHeight:v,headerPaddingX:k,headerPreview:S,heading:w,icon:b,surface:P,viewParameter:F,viewType:j}){(0,i.useEffect)(()=>{(0,n.Z)("CollapsibleLayout","/app/www/closeup/CollapsibleLayout.tsx")},[]);let C=(0,d.HG)(),{isBot:T}=(0,o.B)(),{logContextEvent:I}=(0,s.u)(),{setIsShoppingModuleExpanded:Z}=(0,c.x4)(),M=(0,i.useRef)(null),[K,E]=(0,i.useState)(void 0),[L,D]=(0,i.useState)(y||!T&&h||null!=f&&[1,2].includes(f));return(0,u.Z)(()=>{let e=M.current,a=null;if(e){let t=()=>{let a=e.scrollHeight,t=e.firstElementChild;E(a+(t?parseInt(window.getComputedStyle(t).marginTop,10):0))};t(),(a=new ResizeObserver(t)).observe(e)}return()=>{a?.disconnect()}}),(0,i.useEffect)(()=>{Z&&Z(!L)},[]),(0,p.jsxs)(l.kC,{dataTestId:"collapsible-layout",direction:"column",gap:4*!C,children:[(0,p.jsx)(r.Z,{actionButton:e,collapsed:L,disabled:y,displayViewState:f,forceTappableHeader:_,headerHeight:v,headerPaddingX:k,headerPreview:S,heading:w,icon:b,onClick:()=>{D(!L),Z&&Z(L),I({aux_data:a,component:m,element:L?x:g,event_type:C?101:102,view_parameter:F,view_type:j})},showArrow:!0,surface:P}),C?(0,p.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{transition:"height 600ms cubic-bezier(.25,1,.5,1)"}},"data-test-id":`collapsible-layout-content-${L?"collapsed":"expanded"}`,height:L?"0px":`${K}px`,marginBottom:L?void 0:1,overflow:"hidden",children:(0,p.jsx)(l.xu,{ref:M,children:t})}):!L&&(0,p.jsx)(l.xu,{children:t})]})}},515158:function(e,a,t){t.d(a,{Z:()=>s});var n=t(686659),i=t(667294),l=t(391995),r=t(785893);function s({children:e,color:a,isDarkMode:t,outlined:s,type:o="bold",rounding:d=400}){return(0,i.useEffect)(()=>{(0,n.Z)("OutlinedBox","/app/www/common/OutlinedBox/OutlinedBox.tsx")},[]),(0,r.jsxs)(l.xu,{position:"relative",children:[(0,r.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{WebkitMaskImage:"-webkit-radial-gradient(white, black)"}},"data-test-id":"outline-content",overflow:"hidden",rounding:d,children:e}),s&&(0,r.jsx)(l.xu,{bottom:!0,color:"transparent",dangerouslySetInlineStyle:{__style:function({color:e,isDarkMode:a,type:t}){let n=a?"#fff":"#000",i=a?"#000":"#fff";return"solid"===t?{boxShadow:`inset 0 0 0 2px ${e??n}`,WebkitBoxShadow:`inset 0 0 0 2px ${e??n}`,MozBoxShadow:`inset 0 0 0 2px ${e??n}`}:"border"===t?{border:`1px solid ${e??"var(--sema-color-border-selected)"}`,boxShadow:"inset 0 0 0 1px var(--sema-color-border-inverse)",WebkitBoxShadow:"inset 0 0 0 1px var(--sema-color-border-inverse)",MozBoxShadow:"inset 0 0 0 1px var(--sema-color-border-inverse)"}:{boxShadow:`inset 0 0 0 2px ${e??n}, inset 0 0 0 4px ${i}`,WebkitBoxShadow:`inset 0 0 0 2px ${e??n}, inset 0 0 0 4px ${i}`,MozBoxShadow:`inset 0 0 0 2px ${e??n}, inset 0 0 0 4px ${i}`}}({color:a,isDarkMode:t,type:o})},"data-test-id":"outline-box",left:!0,position:"absolute",right:!0,rounding:d,top:!0})]})}},261926:function(e,a,t){t.d(a,{CT:()=>n,HE:()=>i,Mq:()=>l,ti:()=>r});let n={CLOSEUP_FEED:"closeup_feed",CLOSEUP_RESPONSIVE:"closeup_responsive",CLOSEUP_STACKED:"closeup_stacked",SEARCH_AUTOCOMPLETE:"search_autocomplete",SEARCH_FEED:"search_feed"},i={CLOSEUP:"closeup"},l={SKIN:"SKIN_TONE_FILTER_QUERIES",HAIR:"hair_pattern_filter_queries",BODY:"inclusive_onebar_pills_on_closeup"},r={SKIN:"skin_tone",HAIR:"hair_pattern",BODY:"body_type"}},143293:function(e,a,t){t.d(a,{Z:()=>e9});var n,i,l,r,s,o,d,u,c,p,g,h=t(686659),m=t(667294);t(167912);var y=t(391995),f=t(470205),x=t(183e3),_=t(680295),v=t(24246),k=t(619481),S=t(890678),w=t(854897),b=t(550759),P=t(312048),F=t(480610),j=t(531996),C=t(221175),T=t(935059),I=t(382964),Z=t(341687),M=t(473156),K=t(246427),E=t(67854),L=t(157997),D=t(271138),R=t(226966),A=t(159831),z=t(713645),$=t(28031),O=t(230201),H=t(893957),U=t(902123),B=t(785893);function N({defaultPillColor:e,hoveredPillColor:a,pressedPillColor:t,isSelected:n,label:i,onTap:l,ref:r,selectedPillColor:s}){(0,m.useEffect)(()=>{(0,h.Z)("DescriptorPill","/app/www/Descriptors/DescriptorPill.tsx")},[]);let[o,d]=(0,m.useState)(e);return(0,m.useEffect)(()=>{d(n?s:e)},[n,s,e]),(0,B.jsx)(y.iP,{onMouseDown:()=>d(t),onMouseEnter:()=>{n||d(a)},onMouseLeave:()=>{n||d(e)},onTap:l,rounding:400,tapStyle:"compress",children:(0,B.jsx)(y.xu,{ref:r,dangerouslySetInlineStyle:{__style:{background:o,backdropFilter:"blur(80px)",userSelect:"none"}},"data-test-id":`descriptor-pill-${i}`,paddingX:4,paddingY:2,rounding:400,children:(0,B.jsx)(y.kC,{alignItems:"center",minHeight:32,children:(0,B.jsx)(y.mg,{color:n?"light":"dark",overflow:"noWrap",children:i})})})})}let W=({showBackArrow:e,showFwdArrow:a,handleClickBack:t,handleClickForward:n})=>{(0,m.useEffect)(()=>{(0,h.Z)("DescriptorsNavigation","/app/www/Descriptors/DescriptorsNavigation.tsx")},[]);let i=(0,v.Z)();return(0,B.jsxs)(y.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},"data-test-id":"descriptors-navigation-arrows",display:"flex",justifyContent:"between",left:!0,position:"absolute",right:!0,top:!0,children:[(0,B.jsx)(y.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},marginStart:2,children:e&&(0,B.jsx)(y.hU,{accessibilityLabel:i._('Back', 'descriptor.navArrow.back', 'Accessibility label for a button that navigates back to previous search guides'),bgColor:"default",dataTestId:"descriptor-bar-back-button",icon:"chevron-left",onClick:t,size:"md"})}),(0,B.jsx)(y.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},marginEnd:2,children:a&&(0,B.jsx)(y.hU,{accessibilityLabel:i._('Forward', 'descriptor.navArrow.forward', 'Accessibility label for a button that navigates forward to see more search guides'),bgColor:"default",dataTestId:"descriptor-bar-forward-button",icon:"chevron-right",onClick:n,size:"md"})})]})};var V=t(774838);let Y=(void 0!==n||(n=t(258138)).hash&&"9d15639e8d9dd61426917dc218fbb3a6"!==n.hash&&console.error("The definition of 'Descriptors_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function G({pressedPillColor:e,defaultPillColor:a,descriptorModules:t,hoveredPillColor:n,pinKey:i,selectedPillColor:l,isWebImageSearchRedesign:r}){(0,m.useEffect)(()=>{(0,h.Z)("Descriptors","/app/www/Descriptors/Descriptors.tsx")},[]);let[s,o]=(0,m.useState)(),[d,u]=(0,m.useState)(0),c=(0,P.s0)(),{search:p}=(0,P.TH)(),{barContainer:g,clientWidth:f,allModulesFit:_,offset:v,showBackArrow:k,showFwdArrow:S,handleClickForward:w,handleClickBack:b,onFocus:F,onMouseDown:j,scrollToPillByOffset:C}=(e=>{let a=(0,m.useRef)(null),{isRTL:t}=(0,V.B)(),n=(0,m.useRef)(!1),[i,l]=(0,m.useState)(0),[r,s]=(0,m.useState)(0),[o,d]=(0,m.useState)(!1),[u,c]=(0,m.useState)(!1),{current:p}=a,{clientWidth:g=0,scrollWidth:h=0}=p??{},y=g||0,f=!!p&&y>=(h||0),x=e.length;(0,m.useEffect)(()=>{let e=p?.scrollWidth||0,a=0;Array.from(p?.children||[]).slice(0,i).forEach(e=>{a+=e.offsetWidth||0}),s(a=Math.min(a,e-g+8));let t=e-a,n=y>=e;n&&0!==i&&l(0),d(i>0&&!n),c(t>y&&i<x&&!n)},[p,i,x,y,t,g]);let _=(0,m.useCallback)(e=>{if(!p)return;let a=Array.from(p.children);if(e<0||e>=a.length)return;let t=0;a.slice(0,e).forEach(e=>{t+=e?.offsetWidth??0});let n=a[e]?.offsetWidth??0;if(t<r){s(t),l(e);return}if(t+n>r+g){s(t+n-g),l(e);return}l(e)},[p,r,g]),v=(0,m.useCallback)((e,a)=>{let t=e.current;if(!t||a<0||a>=t.length)return;let n=Array.from({length:a}).reduce((e,a,n)=>e+(t[n]?.offsetWidth??0),0),i=n+(t[a]?.offsetWidth??0);if(n>=r&&i<=r+g)return;let o=n<r?n:i-g;s(Math.max(0,Math.min(o,Math.max(0,h-g+8)))),l(Array.from({length:t.length}).reduce((e,a,n)=>{let{foundIndex:i,accWidth:l}=e;if(-1!==i)return e;let r=l+(t[n]?.offsetWidth??0);return{foundIndex:l>=o?n:-1,accWidth:r}},{foundIndex:-1,accWidth:0}).foundIndex)},[r,g,h]),k=(0,m.useCallback)(e=>{if("Tab"!==e.key)return;let a=Array.from(p?.children||[]),t=document.activeElement,n=a.findIndex(e=>e.contains(t));-1!==n&&(!e.shiftKey&&n<a.length-1?_(n+1):e.shiftKey&&n>0&&_(n-1))},[p,_]);return(0,m.useEffect)(()=>{if(p)return p.addEventListener("keydown",k,!0),()=>{p.removeEventListener("keydown",k,!0)}},[p,k]),{barContainer:a,allModulesFit:f,clientWidth:g,offset:r,showBackArrow:o,showFwdArrow:u,onFocus:()=>{n.current||l(i)},index:i,setIndex:l,handleClickForward:()=>{i+2<x?l(i+2):l(x-2)},handleClickBack:()=>{i-2>=0?l(i-2):l(0)},onMouseDown:()=>{n.current=!0},scrollToPillByOffset:v}})(t),T=(0,x.Z)(Y,i),{logContextEvent:I}=(0,O.u)(),{descriptorsRefs:M}=((e,a,t,n,i)=>{let{logContextEvent:l}=(0,O.u)(),r=(0,m.useRef)([]),s=(0,m.useRef)([]);return(0,m.useEffect)(()=>{let o=0,d=r.current.map((n,i)=>{let l=n?.offsetWidth||0,r=o,s=o+l;o+=l+4;let{auxData:d}=t[i]||{auxData:{}},u=e+a,c=r+16>e&&r<u,p=s>e&&s-16<u;return{moduleId:d?.moduleId||"",isVisible:c||p}});d.forEach((e,a)=>{let t=s.current[a];if((!t||!1===t.isVisible)&&e.isVisible){let{auxData:e}=i||{};l({event_type:9993,view_type:72,view_parameter:3050,component:14047,aux_data:{image_signature:n||"",descriptor:e?.query}})}}),s.current=d},[r,e,a,t,l,n,i,s]),{descriptorsRefs:r}})(v,f,t,T.imageSignature||"",s);(0,H.Z)(()=>{if(void 0===s){let e=t.findIndex(e=>{let{display:a}=e,{isSelected:t}=a||{isSelected:!1};return t}),{hybrid_search_param:a}=(0,Z.Z)(p);-1!==e&&a&&(o(t[e]),C(M,e-1))}}),(0,m.useEffect)(()=>{u(r?(e=>{if(!e)return 0;let a=e.getBoundingClientRect(),t=window.innerHeight;return a.bottom>t?a.bottom-t:0})(g.current):0)},[g,r]);let K=e=>{let{id:a}=e,{id:t}=s||{};return null!=a&&t===a};return(0,B.jsx)(U.q,{children:({hovered:i,onMouseEnter:r,onMouseLeave:u})=>(0,B.jsxs)(y.xu,{dangerouslySetInlineStyle:{__style:{bottom:d}},"data-test-id":"scrollable-descriptor-bar-root",left:!0,onMouseEnter:r,onMouseLeave:u,overflow:"hidden",position:"absolute",right:!0,children:[(0,B.jsx)(y.xu,{dangerouslySetInlineStyle:{__style:{left:`-${v}px`,transition:"left 0.3s, right 0.3s"}},position:"relative",children:(0,B.jsx)(y.xu,{ref:g,display:"flex",justifyContent:_?"start":void 0,marginStart:2,paddingY:2,children:t.map((t,i)=>{let{action:r,display:s}=t,{feedUrl:d}=r||{};if(null==d)return null;let{displayText:u}=s||{};return(0,B.jsx)(y.xu,{marginEnd:1,onFocus:F,onMouseDown:j,children:(0,B.jsx)(N,{ref:e=>{M.current[i]=e},defaultPillColor:a,hoveredPillColor:n,isSelected:K(t),label:u||"",onTap:()=>((e,a)=>{let t=K(e),{action:n}=e,{feedUrl:i}=n||{};if(i)if(t){let e=i,{surfaceType:a}=(0,Z.Z)(p);a&&(e=i.replace(RegExp(`^(.*surfaceType=${a}).*$`),"$1")),c(e??"",{replace:!0}),o(void 0)}else{let{surfaceType:t}=(0,Z.Z)(p),n=i;t&&(n=i.replace(/(surfaceType=)[^&]*/,`$1${t}`)),c(n??"",{replace:!0}),C(M,a),o(e)}let{auxData:l}=e;I({event_type:102,view_type:72,view_parameter:3050,component:14047,aux_data:{image_signature:T.imageSignature||"",descriptor:l?.query}})})(t,i),pressedPillColor:e,selectedPillColor:l})},`descriptors-module-${t.id||i}`)})})}),i&&(0,B.jsx)(W,{handleClickBack:()=>{b();let{auxData:e}=s||{};I({event_type:108,view_type:72,view_parameter:3050,component:14046,aux_data:{image_signature:T.imageSignature||"",descriptor:e?.query}})},handleClickForward:()=>{w();let{auxData:e}=s||{};I({event_type:108,view_type:72,view_parameter:3050,component:14046,aux_data:{image_signature:T.imageSignature||"",descriptor:e?.query}})},showBackArrow:k,showFwdArrow:S})]})})}var X=t(229793),q=t(23641);function J({containerRef:e}){let a=(0,m.useCallback)(()=>{(0,q.Nx)("VisualSearchImageRender")},[]);return(0,m.useEffect)(()=>{let t=e.current;if(!t)return;let n=t.querySelector("img");n?.complete&&n.naturalWidth>0&&a()},[e,a]),{onImageLoad:a}}var Q=t(854929),ee=t(938306),ea=t(501010),et=t(128608),en=t(371266),ei=t(518112),el=t(59111),er=t(383903),es=t(674610),eo=t(509307),ed=t(979173);function eu({bitmapMasks:e,entrypoint:a,hoveredCutoutIndex:n,imageContainerX:i,imageContainerY:l,pinImageHeight:r,pinImageHovered:s,pinImageUrl:o,pinImageWidth:d,selectedCutoutIndex:u,setHoveredCutoutIndex:c,setSelectedCutoutIndex:p,trafficSource:g,viewParameter:f,viewType:x}){(0,m.useEffect)(()=>{(0,h.Z)("StelaCutouts","/app/www/Cutouts/StelaCutouts.tsx")},[]);let _=(0,P.TH)(),{logContextEvent:v}=(0,O.u)(),k=(0,P.s0)(),S=(0,m.useRef)(null),[w,b]=(0,m.useState)(!1),[F,j]=(0,m.useState)([]),[C,T]=(0,m.useState)(!1),[I,M]=(0,m.useState)(!1),{w:K,h:E}=(0,Z.Z)(_.search),L=(0,m.useMemo)(()=>Number(K)===d&&Number(E)===r||void 0===K&&void 0===E,[E,r,d,K]),D=(0,m.useMemo)(()=>({commerce_data:JSON.stringify({pin_has_cutout:!0})}),[]);(0,m.useEffect)(()=>{if(!e)return;let a=[];async function n({id:e,isHidden:n,maskHeightRatio:i,maskImage:l,maskWidthRatio:r,maskXRatio:s,maskYRatio:o,pinImageHeight:d,pinImageWidth:u}){let{ContourTracer:c,initializeWasm:p}=await t.e("95563").then(t.bind(t,193386));await p();let g=new c,h=atob(l),m=new Blob([Uint8Array.from(h,e=>e.charCodeAt(0))],{type:"image/png"}),y=await createImageBitmap(m),f=g.trace(y,{useAlpha:!1,threshold:80}),x=URL.createObjectURL(m);return a.push(x),{contours:f,contourXRatio:u*r/y.width,contourYRatio:d*i/y.height,id:e,isHidden:n,maskHeightRatio:i,maskUrl:x,maskWidthRatio:r,maskXRatio:s,maskYRatio:o}}let i=[];return e.forEach(e=>{let{id:a,mask_image:t,mask_bounds:l,is_hidden:s}=e,[o,u]=l?.[0]??[],[c,p]=l?.[1]??[];if(void 0!==a&&void 0!==t&&void 0!==o&&void 0!==u&&void 0!==c&&void 0!==p){let e=n({id:a,isHidden:!!s,maskHeightRatio:p,maskImage:t,maskWidthRatio:c,maskXRatio:o,maskYRatio:u,pinImageHeight:r,pinImageWidth:d});i.push(e)}}),(async()=>{j(await Promise.all(i))})(),()=>{a.forEach(e=>{URL.revokeObjectURL(e)})}},[e,r,d]);let R=(0,m.useMemo)(()=>{let e=[];return F.forEach((a,t)=>{let{contours:n}=a;n&&0!==n.length&&(e[t]=n.map(e=>{let a=e.points.map(e=>e.x),t=e.points.map(e=>e.y);return{minX:Math.min(...a),minY:Math.min(...t),maxX:Math.max(...a),maxY:Math.max(...t)}}))}),e},[F]),A=(0,m.useCallback)(e=>{let a=e.clientX-i,t=e.clientY-l;for(let e=F.length-1;e>=0;e-=1){let i=F[e];if(e===u||!i)continue;let{contours:l,contourXRatio:s,contourYRatio:o,maskXRatio:p,maskYRatio:g}=i,h=(a-p*d)/s,m=(t-g*r)/o,y=R[e];if(l.some((e,a)=>{let t=y?.[a];return t&&h>=t.minX&&h<=t.maxX&&m>=t.minY&&m<=t.maxY&&(0,eo.Z)({x:h,y:m},e.points)})){n!==e&&(c?.(e),v({event_type:105,element:14154,view_parameter:f,view_type:x,aux_data:{commerce_data:JSON.stringify({pin_has_cutout:!0})}}));return}}c?.(null)},[F,R,n,i,l,v,r,d,u,c,f,x]),z=()=>b(!1),$=e=>{(e.movementX||e.movementY)&&b(!0),0===e.buttons?A(e):c?.(null)},H=e=>{A(e)},U=()=>c?.(null),N=(0,m.useCallback)(()=>{if(w||null===n||!F[n])return void b(!1);p?.(n);let{maskXRatio:e,maskYRatio:t,maskWidthRatio:i,maskHeightRatio:l}=F[n],s=(0,er.Z)({cropArea:{x:e,y:t,w:i,h:l},scaledWidth:d,scaledHeight:r}),o=(0,en.Z)({cropArea:s,cropSource:9,entrypoint:a,trafficSource:g});o!==window.location.search&&(v({event_type:101,element:14154,view_parameter:f,view_type:x,aux_data:D}),k(`${window.location.pathname}${o}`,{replace:!0}))},[D,F,w,a,k,n,v,r,d,p,g,f,x]);return((0,m.useEffect)(()=>{let e=S.current;return e&&(e.addEventListener("mousedown",z),e.addEventListener("mousemove",$),e.addEventListener("mouseup",H),e.addEventListener("mouseleave",U),e.addEventListener("click",N)),()=>{e&&(e.removeEventListener("mousedown",z),e.removeEventListener("mousemove",$),e.removeEventListener("mouseup",H),e.removeEventListener("mouseleave",U),e.removeEventListener("click",N))}}),e)?(0,B.jsxs)(y.xu,{ref:S,bottom:!0,dangerouslySetInlineStyle:{__style:{cursor:"number"==typeof n?"pointer":"auto"}},"data-bitmaps-ready":F.length>0,"data-test-id":"cutouts-container",left:!0,position:"absolute",right:!0,role:"none",top:!0,children:[(0,B.jsx)(el.Z,{unsafeCSS:es.iF}),F.map((e,a)=>(0,B.jsx)(ed.Z,{auxData:D,bitmapData:e,hasAnimatedCutoutsOnLand:I,hasLoggedRender:C,hoveredCutoutIndex:n,index:a,isPinLevelCrop:L,pinImageHeight:r,pinImageHovered:s,pinImageUrl:o,pinImageWidth:d,selectedCutoutIndex:u,setHasAnimatedCutoutsOnLand:M,setHasLoggedRender:T,viewParameter:f,viewType:x},e.id))]}):null}var ec=t(415349),ep=t(225580);let eg=(void 0!==i||(i=t(911486)).hash&&"fbf2d3b93402a9dd783073db316c0f92"!==i.hash&&console.error("The definition of 'VisualSearchCropper_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function eh({cropArea:e,cropSource:a,entrypoint:t,imageContainerX:n=0,imageContainerY:i=0,imageSize:l,pinKey:r,trafficSource:s,viewParameter:o,viewType:d}){(0,m.useEffect)(()=>{(0,h.Z)("VisualSearchCropper","/app/www/VisualSearch/VisualSearchCropper.tsx")},[]);let{checkExperiment:u}=(0,ea.Z)(),c=(0,x.Z)(eg,r),p=(0,P.s0)(),g=(0,L.D)(),{getNormalizedPinImage:y}=(0,I.Z)({pinKey:c,maxWidth:C.Wm}),f=(0,ec.Z)({pinKey:c,isVisualSearch:!0}),[_,v]=(0,m.useState)("none"),[k,S]=(0,m.useState)(null),[w,b]=(0,m.useState)(-1),{bitmap_masks:F}=f??{},j=(0,m.useMemo)(()=>(F??[]).filter(ep.R7).map(e=>{let{id:a,mask_bounds:t}=e,[n,i]=t[0],[l,r]=t[1];return{x:n,y:i,w:l,h:r,id:a}}),[F]);return(0,m.useEffect)(()=>{let a=(0,K.Z)({cropArea:e,scaledHeight:l.height??0,scaledWidth:l.width??0});if(j&&j.length){let e=(0,et.Z)(j,a);v("cutouts"),b(e.indexToHide)}},[e,j,l.height,l.width]),(0,B.jsx)(ee.Z,{cropArea:e,cropSource:a,hoveredCutoutIndex:k,imageContainerX:n,imageContainerY:i,imageSize:l,objectDetection:_,onChange:({cropArea:e,cropSource:a})=>{if("cutouts"===_){let t=(0,K.Z)({cropArea:e,scaledHeight:l.height??0,scaledWidth:l.width??0}),{isCropAreaOnDotArea:n,indexToHide:i}=(0,et.Z)(j,t);n&&(a=9,b?.(i))}let n=window.location.search,i=(0,en.Z)({cropArea:e,cropSource:a,entrypoint:t,trafficSource:s});n!==i&&p({pathname:window.location.pathname,search:i},{replace:!0})},setHoveredCutoutIndex:S,setSelectedCutoutIndex:b,viewParameter:o,viewType:d,children:(()=>{if("cutouts"!==_||!F?.length)return null;let{pinImageWidth:e,pinImageHeight:a,pinImageUrl:l}=(()=>{if(g)return{pinImageWidth:E.M,pinImageHeight:E.M/(c?.image?.width??1)*(c?.image?.height??1),pinImageUrl:c?.image?.url??""};let{height:e,width:a,url:t}=y();return{pinImageWidth:a,pinImageHeight:e,pinImageUrl:t}})(),{anyEnabled:r}=u("web_cutout_glow"),p=r?ei.default:eu;return(0,B.jsx)(p,{bitmapMasks:F,entrypoint:t,hoveredCutoutIndex:k,imageContainerX:n,imageContainerY:i,pinImageHeight:a,pinImageUrl:l,pinImageWidth:e,selectedCutoutIndex:w,setHoveredCutoutIndex:S,setSelectedCutoutIndex:b,trafficSource:s,viewParameter:o,viewType:d})})()})}let em=(void 0!==l||(l=t(447963)).hash&&"727c8ab2c1c256e3b4478a36890f92d6"!==l.hash&&console.error("The definition of 'RelatedProductsImageContent_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l);function ey({cropArea:e,cropSource:a,entrypoint:t,description:n,descriptorModules:i,height:l,imageContainerX:r,imageContainerY:s,imageUrl:o,pinKey:d,trafficSource:u,viewParameter:c,viewType:p,width:g}){(0,m.useEffect)(()=>{(0,h.Z)("RelatedProductsImageContent","/app/common/react/components/shopping/RelatedProducts/RelatedProductsImageContent.tsx")},[]);let f=(0,L.D)(),_=(0,x.Z)(em,d),{defaultColor:v,selectedColor:k,hoveredColor:S,pressedColor:w}=(0,X.Z)(_.dominantColor),{height:b=0}=(0,$.Z)()||{},P=(0,m.useRef)(null),{onImageLoad:F}=J({containerRef:P}),j=s+l,C=j>b,T=C?Math.min(j-64-12,b-64-12):l-64;return(0,B.jsxs)(y.xu,{"data-test-id":"flashlight-enabled-image",height:l,width:g,children:[(0,B.jsxs)(y.zd,{height:l,rounding:f?600:400,width:g,children:[(0,B.jsx)(z.Z,{_enableViewTransitions:!0,type:"image",children:(0,B.jsx)(y.xu,{ref:P,children:(0,B.jsx)(y.Ee,{alt:n,naturalHeight:l,naturalWidth:g,onLoad:F,src:o})})}),(0,B.jsx)(eh,{cropArea:e,cropSource:a,entrypoint:t,imageContainerX:r,imageContainerY:s,imageSize:{height:l,width:g},pinKey:_,trafficSource:u,viewParameter:c,viewType:p}),f&&(0,B.jsx)(y.xu,{dangerouslySetInlineStyle:{__style:{insetInlineStart:0}},position:"absolute",top:!0,children:(0,B.jsx)(Q.Z,{defaultPillColor:v,hoveredPillColor:S,pressedPillColor:w,viewParameter:c,viewType:p})})]}),i&&i.length>0&&(0,B.jsx)(y.xu,{dangerouslySetInlineStyle:{__style:{top:T}},height:64,position:C?"fixed":"absolute",width:g,children:(0,B.jsx)(G,{defaultPillColor:v,descriptorModules:i,hoveredPillColor:S,pinKey:_,pressedPillColor:w,selectedPillColor:k})})]})}var ef=t(17667),ex=t(433100),e_=t(513530),ev=t(148);function ek({itemCount:e}){let a=(0,m.useRef)(!1);(0,m.useEffect)(()=>{!a.current&&e>0&&(a.current=!0,(0,q.Nx)("VisualSearchFeedRender"))},[e])}let eS=(void 0!==r||(r=t(895622)).hash&&"20c2c7f4ff982fb93a9608faa14f3ed2"!==r.hash&&console.error("The definition of 'RelatedProductsUnifiedFeed_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);function ew({alignStart:e,auxData:a,isFilterOpened:t,isProductOnlyFeed:n,oneBarModules:i,pinKey:l,viewParameter:r,viewType:s,visualSearchFlashlightUnifiedResource:o}){(0,m.useEffect)(()=>{(0,h.Z)("RelatedProductsUnifiedFeed","/app/common/react/components/shopping/RelatedProducts/UnifiedFeed/RelatedProductsUnifiedFeed.tsx")},[]);let d=(0,x.Z)(eS,l),u=!n&&i&&i.length>0,{data:c}=o,p=c?.search_identifier;return ek({itemCount:(c?.results||[]).length}),(0,B.jsxs)(m.Fragment,{children:[u&&(0,B.jsx)(y.xu,{position:"relative",zIndex:new y.Ry(1),children:(0,B.jsx)(ev.v,{children:(0,B.jsx)(ex.f,{children:(0,B.jsx)(ef.default,{oneBarModulesKey:null,oneBarModulesRest:i,paddingX:8})})})}),(0,B.jsx)(y.xu,{overflow:"hidden",children:(0,B.jsx)(e_.Z,{alignStart:e,auxData:a,isFilterOpened:t,isProductFeed:n,pinKey:d,searchId:p,viewParameter:r,viewType:s,visualSearchFlashlightUnifiedResource:o})})]})}var eb=t(933442),eP=t(59355),eF=t(806513),ej=t(112658);function eC({cropSource:e}){return{viewType:72,viewParameter:9===e?3462:3050}}var eT=t(49254),eI=t(74195);let eZ=A.R+16,eM=(void 0!==s||(s=t(441370)).hash&&"3a9a747c3135f426fe0cf32ca9147a5d"!==s.hash&&console.error("The definition of 'VisualSearchContainer_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s);function eK({cropArea:e,cropSource:a,entrypoint:t,isProductPage:n,oneBarModules:i,pinKey:l,searchId:r,descriptorModules:s,title:o,trafficSource:d,visualSearchFlashlightUnifiedResource:u}){(0,m.useEffect)(()=>{(0,h.Z)("VisualSearchContainer","/app/www/VisualSearch/VisualSearchContainer.tsx")},[]);let c=(0,x.Z)(eM,l),{getNormalizedPinImage:p}=(0,I.Z)({pinKey:c,maxWidth:C.Wm}),g=(0,P.TH)(),{width:f=0}=(0,$.Z)()||{},_=(0,eT.t)(),v=(0,eI.Z)(),{imageContainerScrollTop:k,imageContainerScrollTopForPinId:S}=(0,eb._)(),w=(0,m.useRef)(null),[b,F]=(0,m.useState)(0),[j,T]=(0,m.useState)(0),{state:Z}=g||{},{internalNavigation:M=!1}=Z||{},{width:K,height:E,url:L}=p(),D=K+R.n,z=n?0:D+48,O=f-v-z-R.n,{viewType:U,viewParameter:N}=eC({cropSource:a}),W={commerce_data:JSON.stringify({is_product_only_feed:n})},V=()=>{let e=w.current;if(e){let{x:a,y:t}=e.getBoundingClientRect(),{scrollTop:n}=e;F(a),T(t-n)}};return(0,H.Z)(()=>{V(),w.current&&0!==k.current&&S.current===c.entityId&&(w.current.scrollTop=k.current)}),(0,B.jsx)(ej.Z,{objectId:r,view:U,children:(0,B.jsx)(eP.Z,{log:{aux_data:W,view_type:U,view_parameter:N},children:(0,B.jsxs)(y.xu,{"data-test-id":"related-products",children:[(0,B.jsx)(A.Z,{isProductPage:n,title:n?o:"",viewParameter:N,viewType:U}),!n&&(0,B.jsx)(y.xu,{ref:w,bottom:!0,dangerouslySetInlineStyle:{__style:{top:_+eZ,left:v,right:v}},height:"inherit",marginBottom:3,marginStart:12,onScroll:()=>{V(),k.current=w.current?.scrollTop||0,S.current=c.entityId},overflow:"auto",position:"fixed",width:D,children:(0,B.jsx)(ey,{cropArea:e,cropSource:a,description:c.description??"",descriptorModules:s,entrypoint:t,height:E,imageContainerX:b,imageContainerY:j,imageSignature:c.imageSignature||"",imageUrl:L,pinKey:c,showAnimation:!M,trafficSource:d,viewParameter:N,viewType:U,width:K})}),(0,B.jsx)(y.xu,{dangerouslySetInlineStyle:{__style:{top:n?0:eZ,left:z,right:z}},paddingX:eF.jC,position:"relative",width:O,children:(0,B.jsx)(ew,{auxData:W,isProductOnlyFeed:n,oneBarModules:i,pinKey:c,viewParameter:N,viewType:U,visualSearchFlashlightUnifiedResource:u})})]})})})}var eE=t(919203),eL=t(261954),eD=t(426161),eR=t(730448),eA=t(285676),ez=t(645479),e$=t(573217),eO=t(79271),eH=t(222451),eU=t(349937);let eB=(void 0!==o||(o=t(292297)).hash&&"b1061aefab46af37d4c9716916386af2"!==o.hash&&console.error("The definition of 'VisualSearchCarousel_story' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o);function eN({componentType:e,hasActionCTA:a,legacyStory:t,searchIdentifier:n,storyKey:i,trafficSource:l,viewParameter:r,viewType:s}){(0,m.useEffect)(()=>{(0,h.Z)("VisualSearchCarousel","/app/www/VisualSearch/VisualSearchCarousel.tsx")},[]);let o=(0,P.TH)(),d=(0,x.Z)(eB,i),u=(0,eO.ZP)({clientTrackingParams:d?.trackingParams,componentType:e,contextLogData:{story_id:d?.storyId,story_type:d?.storyType,content_ids:d?.contentIds},impressionType:"Story",loggingId:d?.storyId,slotIndex:0,viewParameter:r,viewType:s}),c=(0,m.useCallback)(({item:e,index:t})=>{if(a&&d.objects&&t===d.objects.length-1){let a=e.images?.["236x"]?.url,t=new URLSearchParams(o.search);t.set("entrypoint","feed_module");let n=`${o.pathname}products/?${t.toString()}`;return a&&(0,B.jsx)(eH.Z,{buttonText:d.action?.text||"See more",component:14339,dataTestId:"shop-action-item-button",element:179,imageWidth:e$.Z,previewImageSrc:a,storyId:d.storyId??void 0,storyType:d.storyType,url:n,view:s,viewParameter:r})}return(0,B.jsx)(eA.r,{componentType:14339,isInDesktopCarousel:!0,pinId:e.id||"",pinImageCrop:{width:e$.Z,height:e$.Z},pinKey:null,slotIndex:t,surface:"VisualInspirationShoppingPin",trafficSource:l,viewData:{search_identifier:n},viewParameter:r,viewType:s})},[a,d.objects,d.action?.text,d.storyId,d.storyType,l,n,r,s,o]),p=t?.objects?.filter(e=>"pin"===e.type);return p&&0!==p.length?(0,B.jsx)(y.xu,{ref:u,"data-test-id":"visual-search-carousel",children:(0,B.jsx)(eU.Z,{items:p,itemWidth:e$.Z,renderItem:c,showBorder:!0,showMarkers:!0,storyKey:d,view:s,viewParameter:r})}):null}var eW=t(31863);let eV=({cropSource:e,oneBarModules:a,masonryScrollContainerRef:t,hasShopModuleStory:n})=>{(0,m.useEffect)(()=>{(0,h.Z)("VisualSearchOneBar","/app/www/VisualSearch/VisualSearchOneBar.tsx")},[]);let{transitionStyle:i,position:l}=(({masonryScrollContainerRef:e,hasShopModuleStory:a,oneBarModules:t,cropSource:n})=>{let[i,l]=(0,m.useState)(!1),r=(0,eT.t)(),s=9===n,o=t?.some(e=>e.display?.isSelected),{checkExperiment:d}=(0,ea.Z)(),u=d("web_pin_level_landing_feed_one_bar").anyEnabled,c=o||s||!u;return(0,m.useEffect)(()=>{if(s)return;let t=()=>{let t=e.current;if(t){let{y:e}=t.getBoundingClientRect();l(e-r<=(a?-250:-10))}};return window.addEventListener("scroll",t),()=>{window.removeEventListener("scroll",t)}},[r,a,s,e]),{transitionStyle:c?void 0:{transform:i?"translateY(0)":"translateY(-100%)",transition:"all 0.3s ease-in-out",width:"100%"},position:c?"sticky":"fixed"}})({cropSource:e,masonryScrollContainerRef:t,oneBarModules:a,hasShopModuleStory:n});return(0,B.jsx)(eW.Z,{position:l,shouldShowShadow:!0,style:i,children:(0,B.jsx)(ev.v,{children:(0,B.jsx)(ex.f,{children:(0,B.jsx)(y.xu,{dangerouslySetInlineStyle:{__style:{paddingInlineEnd:"8px"}},children:(0,B.jsx)(ef.default,{itemHeight:48,marginBottom:0,oneBarModulesKey:null,oneBarModulesRest:a,paddingBottom:12,paddingX:3})})})})})};function eY({auxData:e,cropSource:a,isProductOnlyFeed:t,oneBarModules:n,trafficSource:i,viewParameter:l,viewType:r,visualSearchFlashlightUnifiedResource:s}){(0,m.useEffect)(()=>{(0,h.Z)("VisualSearchFeed","/app/www/VisualSearch/VisualSearchFeed.tsx")},[]);let o=(0,v.Z)(),{logContextEvent:d}=(0,O.u)(),u=(0,m.useRef)(!1),c=(0,m.useRef)(null),{checkExperiment:p}=(0,ea.Z)(),g=p("web_pin_grid_last_visited").anyEnabled,f=!t&&n&&n.length>0,{data:x,isFetching:_,fetchMore:k,isAtEnd:S}=s,{results:w=[],search_identifier:b}=x||{};ek({itemCount:w.length});let P=w.find(e=>"story"===e.type&&"stela_shop"===e.story_type),{action:F,objects:j}=P||{},{text:C,url:T}=F||{},I=j?.length||0,Z=!!(C&&T),M=(0,eR.Z)(()=>{u.current||(d({event_type:110,view_type:r,view_parameter:l}),u.current=!0)},1e3),K=(0,m.useCallback)(({data:a,itemIdx:n})=>{if("story"===a.type)return"unified_entry_point_flashlight_header"===a.story_type?null:(0,B.jsx)(eN,{auxData:e,componentType:14339,hasActionCTA:Z,legacyStory:a,searchIdentifier:b,storyKey:{type:"Legacy",data:a},trafficSource:i,viewParameter:l,viewType:r});if("pin"===a.type){let s=+!!Z,o=(0,B.jsx)(eA.r,{auxData:e,componentType:0,pinId:a.id,pinKey:null,slotIndex:n+I-s,surface:t?"ShoppingDynamicHeightGrid":"SearchItem",trafficSource:i,viewData:{search_identifier:b},viewParameter:l,viewType:r});return g?(0,B.jsx)(ez.Z,{children:o}):o}return null},[e,b,i,r,l,Z,I,t,g]),E=(0,m.useCallback)(e=>"story"!==e.type,[]);return(0,B.jsxs)(m.Fragment,{children:[f&&(0,B.jsx)(eV,{cropSource:a,hasShopModuleStory:!!P,masonryScrollContainerRef:c,oneBarModules:n}),(0,B.jsx)(y.xu,{ref:c,"data-test-id":"visual-search-feed",onScroll:M,overflow:"hidden",children:(0,B.jsx)(eD.Z,{isAtEndOfFeed:S,itemCount:w.length,children:(0,B.jsx)(eL.default,{align:t?"center":"start",getColumnSpanConfig:e=>{let a="story"===e.type&&e.display_options?.num_columns_requested;return 0===a?1/0:a||1},isFetching:_,isLoadedAccessibilityLabel:o._('Visual search results loaded', 'visualSearch.masonry.loaded.label', 'Accessibility label when masonry has finished loading'),isLoadingAccessibilityLabel:o._('Loading visual search results', 'visualSearch.masonry.loading.label', 'Accessibility label for masonry loading state'),isLoadingStateEnabled:!0,items:w,layout:"basic",loadItems:k,minCols:1,renderItem:K,scrollContainer:()=>c.current??window,virtualize:E})})})]})}var eG=t(911953);let eX=(void 0!==d||(d=t(97004)).hash&&"8250aa2ed9c603023c2f2a226d0b9fbb"!==d.hash&&console.error("The definition of 'VisualSearchImageContainer_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),d);function eq({cropArea:e,cropSource:a,descriptorModules:t,entrypoint:n,pinKey:i,trafficSource:l,viewParameter:r,viewType:s}){(0,m.useEffect)(()=>{(0,h.Z)("VisualSearchImageContainer","/app/www/VisualSearch/VisualSearchImageContainer.tsx")},[]);let o=(0,eT.t)(),d=(0,eI.Z)(),{imageContainerScrollTop:u,imageContainerScrollTopForPinId:c}=(0,eb._)(),p=(0,m.useRef)(null),g=(0,m.useRef)(null),[f,_]=(0,m.useState)(0),[v,k]=(0,m.useState)(0),[S,w]=(0,m.useState)(0),{scrollCropperInView:b}=(0,eG.Z)({scrollContainerRef:p}),P=(0,x.Z)(eX,i),{defaultColor:F,selectedColor:j,hoveredColor:C,pressedColor:T}=(0,X.Z)(P.dominantColor),I=E.M/(P?.image?.width??1)*(P?.image?.height??1),Z=P?.image?.url??"",M=E.M+E.nn,{onImageLoad:K}=J({containerRef:g}),{isDescriptorAvailable:L,descriptorModuleHeight:D,descriptorBottomBorderRadius:R}=function({imageContainerRef:e,descriptorModules:a}){let t=!!a?.length,n=64*!!t;return t&&e.current?{isDescriptorAvailable:t,descriptorModuleHeight:n,descriptorBottomBorderRadius:function(e){let a=e.scrollTop,t=e.scrollHeight-e.clientHeight-a;return 24*(61<t&&t<67)}(e.current)}:{isDescriptorAvailable:t,descriptorModuleHeight:n,descriptorBottomBorderRadius:0}}({imageContainerRef:p,descriptorModules:t}),A=(0,m.useCallback)(()=>{let e=p.current;if(e){let{x:a,y:t}=e.getBoundingClientRect();_(a),k(t-e.scrollTop)}w(16*(I>=window.innerHeight-o&&!L))},[o,I,L]),$=(0,m.useCallback)(()=>{A(),u.current=p.current?.scrollTop||0,c.current=P.entityId},[A,P.entityId,u,c]);return(0,H.Z)(()=>{let e=p.current;if(!e)return;let a=u.current,t=c.current;return 0!==a&&t===P.entityId&&(e.scrollTop=a),A(),window.addEventListener("mousemove",b),()=>{window.removeEventListener("mousemove",b)}}),(0,B.jsxs)(m.Fragment,{children:[(0,B.jsx)(y.xu,{ref:p,bottom:!0,dangerouslySetInlineStyle:{__style:{top:o,insetInlineStart:d,height:`min(${I}px, calc(100vh - ${o}px))`,paddingBottom:`${S}px`,scrollbarWidth:"thin"}},"data-test-id":"visual-search-image-container",marginStart:E.tX,onScroll:$,overflow:"auto",position:"fixed",width:M,children:(0,B.jsx)(y.xu,{"data-test-id":"flashlight-enabled-image",height:I+D,width:E.M,children:(0,B.jsxs)(y.zd,{height:I,rounding:E.$V,width:E.M,children:[(0,B.jsx)(z.Z,{_enableViewTransitions:!0,type:"image",children:(0,B.jsx)(y.xu,{ref:g,children:(0,B.jsx)(y.Ee,{alt:P.description??"",naturalHeight:I,naturalWidth:E.M,onLoad:K,src:Z})})}),(0,B.jsx)(eh,{cropArea:e,cropSource:a,entrypoint:n,imageContainerX:f,imageContainerY:v,imageSize:{height:I,width:E.M},pinKey:P,trafficSource:l,viewParameter:r,viewType:s})]})})}),(0,B.jsx)(y.xu,{dangerouslySetInlineStyle:{__style:{top:o,insetInlineStart:d}},"data-test-id":"visual-search-cancel-button-container",marginStart:E.Qs,marginTop:E.qN,position:"fixed",children:(0,B.jsx)(Q.Z,{defaultPillColor:F,hoveredPillColor:C,pressedPillColor:T,viewParameter:r,viewType:s})}),L&&(0,B.jsx)(y.xu,{dangerouslySetInlineStyle:{__style:{top:`min(${o+I-D}px, calc(100vh - ${D}px))`,insetInlineStart:d,borderRadius:`0 0 ${R}px ${R}px`}},"data-test-id":"visual-search-descriptor-container",height:D,marginStart:E.tX,overflow:"hidden",position:"fixed",width:E.M,children:(0,B.jsx)(G,{defaultPillColor:F,descriptorModules:t??[],hoveredPillColor:C,isWebImageSearchRedesign:!0,pinKey:P,pressedPillColor:T,selectedPillColor:j})}),(0,B.jsx)(y.xu,{dangerouslySetInlineStyle:{__style:{boxSizing:"content-box"}},"data-test-id":"visual-search-image-container-placeholder",height:1,marginStart:E.tX,minWidth:M})]})}let eJ=(void 0!==u||(u=t(716635)).hash&&"3c3f391c3bf9eec79c18ed9a3fe63800"!==u.hash&&console.error("The definition of 'VisualSearchLayout_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),u);function eQ({cropArea:e,cropSource:a,entrypoint:t,isProductPage:n,oneBarModules:i,pinKey:l,searchId:r,descriptorModules:s,trafficSource:o,visualSearchFlashlightUnifiedResource:d}){(0,m.useEffect)(()=>{(0,h.Z)("VisualSearchLayout","/app/www/VisualSearch/VisualSearchLayout.tsx")},[]);let u=(0,x.Z)(eJ,l),c=(0,v.Z)(),p=c._('Shop similar', 'visualSearch.productPage.header', 'Shop similar visual searched items.'),{viewType:g,viewParameter:f}=eC({cropSource:a}),_={commerce_data:JSON.stringify({is_product_only_feed:n})};return(0,B.jsx)(ej.Z,{objectId:r,view:g,children:(0,B.jsxs)(eP.Z,{log:{aux_data:_,view_type:g,view_parameter:f},children:[n?(0,B.jsx)(A.Z,{isProductPage:!0,title:p,viewParameter:f,viewType:g}):(0,B.jsx)(eE.Z,{text:c._('Image Search Page', 'imageSearch.accessibilityHiddenHeading', 'Accessibility label for image search page')}),(0,B.jsxs)(y.kC,{children:[!n&&(0,B.jsx)(eq,{cropArea:e,cropSource:a,descriptorModules:s,entrypoint:t,pinKey:u,trafficSource:o,viewParameter:f,viewType:g}),(0,B.jsx)(y.kC.Item,{flex:"grow",children:(0,B.jsx)(eY,{auxData:_,cropSource:a,isProductOnlyFeed:n,oneBarModules:i,trafficSource:o,viewParameter:f,viewType:g,visualSearchFlashlightUnifiedResource:d})})]})]})})}let e0=(void 0!==c||(c=t(261717)).hash&&"ece11b62e2de551b92d24a2389316249"!==c.hash&&console.error("The definition of 'VisualSearchPageWithPinData_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),c);function e1({pinKey:e}){let a,t,n=(0,P.TH)(),i=(0,x.Z)(e0,e),l=(0,L.D)(),r=(0,T.Z)(),s=r?.isAuth??!1,{getNormalizedPinImage:o}=(0,I.Z)({pinKey:i,maxWidth:l?E.M:C.Wm}),{cropSource:d,entrypoint:u,full_feed_title:c="",filters:p,hybrid_search_param:g,journey_depth:h,search_query:y,source_module_id:f,selected_descriptors:_,requestParams:v,rs:k}=(0,Z.Z)(n.search);if(l)t=E.M/(i?.image?.width??1)*(i?.image?.height??1),a=E.M;else{let{height:e,width:n}=o();t=e,a=n}let S=(0,m.useMemo)(()=>(0,F.Z)(n,a,t)??{x:0,y:0,w:a,h:t},[n,a,t]),w=(0,M.Z)(Number(d))||5,b=n.pathname.includes("/products"),R=u||"deep_link";(0,D.Z)({entrypoint:u,isAuthenticated:s});let{searchId:A,visualSearchFlashlightUnifiedResource:z,oneBarModules:$,descriptorModules:O}=(0,j.Z)({resourceOptions:{crop:(0,K.Z)({cropArea:S,scaledWidth:a,scaledHeight:t}),crop_source:w,entry_source:b?"shopping":"flashlight",entrypoint:R,field_set_key:"shopping_grid_item",image_signature:i.imageSignature||void 0,is_shopping:b,pin_id:i.entityId,request_params:v,source:k,filters:p,hybrid_search_param:g,selected_descriptors:_,journey_depth:parseInt(h,10)||void 0,search_query:y,source_module_id:f}});return i?(0,B.jsx)(l?eQ:eK,{cropArea:S,cropSource:w,descriptorModules:O,entrypoint:R,isProductPage:b,oneBarModules:$,pinKey:i,searchId:A,title:c,trafficSource:k,visualSearchFlashlightUnifiedResource:z}):null}function e2({pinKey:e}){return(0,m.useEffect)(()=>{(0,h.Z)("VisualSearchPageWithPinData","/app/www/VisualSearch/VisualSearchPageWithPinData.tsx")},[]),(0,B.jsx)(L.h,{children:(0,B.jsx)(e1,{pinKey:e})})}var e3=t(520803);let e6=(void 0!==p||(p=t(579174)).hash&&"0f7b98a1f02dbf8528df0452aa26efd4"!==p.hash&&console.error("The definition of 'RelatedProductsPageQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),p),e4=(void 0!==g||(g=t(271128)).hash&&"91d05676e413b7b47653c2f8fa609093"!==g.hash&&console.error("The definition of 'RelatedProductsPage_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),g);function e5({pinId:e,relatedProductsDataRef:a}){let t=(0,v.Z)(),n=(0,_.Z)({strategy:"Legacy",query:e6,variables:{pinId:e},useGetLegacyData:()=>{let{data:e}=(0,k.Z)(a);return e}}),i=n?.v3GetPinQuery?.__typename==="V3GetPin"?n.v3GetPinQuery.data:null,l=(0,x.Z)(e4,i);return(0,B.jsx)(m.Suspense,{fallback:(0,B.jsx)(y.xH,{accessibilityLabel:t._('Loading Pin data', 'RelatedProductsPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0}),children:l&&(0,B.jsx)(e2,{pinKey:l})})}function e9(){(0,m.useEffect)(()=>{(0,h.Z)("RelatedProductsPage","/app/www/pages/authDesktop/RelatedProductsPage.tsx")},[]);let e=(0,e3.Z)(),{pinId:a}=(0,w.Z)(e.params.id||""),{ref:t}=(0,S.Z)({name:"PinResource",options:{id:a,field_set_key:"detailed"}});return(0,B.jsx)(f.Z,{name:"RelatedProductsPage_RelatedProductsPageWrapper",children:(0,B.jsx)(m.Suspense,{fallback:(0,B.jsx)(b.Z,{}),children:(0,B.jsx)(e5,{pinId:a,relatedProductsDataRef:t})})})}},254889:function(e,a,t){t.r(a),t.d(a,{default:()=>_});var n=t(686659),i=t(667294),l=t(581722),r=t(312048),s=t(391995),o=t(4533),d=t(104999),u=t(746868),c=t(351736),p=t(24246),g=t(173874),h=t(34550),m=t(935833),y=t(736328),f=t(739405),x=t(785893);function _({alignIconLeft:e,bgColor:a,color:t,disableRedirect:_=!1,fallbackUrl:v,icon:k="chevron-left",onTouch:S,padding:w,placement:b,shouldUseFallbackUrl:P,size:F="lg",viewParameter:j,viewType:C,isVisualSearch:T}){(0,i.useEffect)(()=>{(0,n.Z)("BackButton","/app/www/routing/BackButton.tsx")},[]);let I=(0,p.Z)(),Z=(0,r.s0)(),M=(0,r.TH)(),K=(0,f.HG)(),E=(0,l.v9)(e=>e.session.isAuthenticated),L=(0,d.Z)(),D=(0,y.Z)(),R=(0,c.vs)(),{viewType:A,viewParameter:z}=(0,u.SU)(),[$,O]=C?[C,j]:[A,z],H=()=>{let e=(0,h.M0)().getItem(o.pm);M.key||"/ideas"!==v?(0,m.My)(`pinner_conversion.back_button.${String(e?.[0].pageType)}`):(0,m.My)("pinner_conversion.back_button.no_history"),(0,m.My)(`web_back_button_click.${String(b)}.is_auth_${String(E)}`),D({action:"click",item:"back-button"}),$&&L({view_type:$,view_parameter:O,element:34,event_type:102}),S&&S(),_||((!M.key||M.state&&"redirect"===M.state.referrer||P)&&v?Z(v):M.pathname.includes("/password/reset/")&&M.search&&M.search.includes("?nativeShouldDismiss=true")?Z("/login/?dismissWebview=true"):Z(-1))},U=R?c.t4:"white",B=(0,g.isBoardPage)(M)||T||"inverse"===t;return(0,x.jsx)(s.xu,{"data-test-id":"back-button",children:e?(0,x.jsx)(s.xu,{alignItems:"center",display:"flex",height:48,marginStart:"close"===k?-1:-2,width:48,children:(0,x.jsx)(s.hU,{accessibilityLabel:I._('Back', 'navigation button', 'navigation button'),bgColor:a,icon:k,iconColor:!t&&(!a||["white","lightGray","transparent"].includes(a))?"subtle":t,onClick:H,padding:"auto"!==w?w:2,size:F})}):(0,x.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:K||B||a?"":U,width:R&&!B?"fit-content":""}},rounding:"circle",children:(0,x.jsx)(s.hU,{accessibilityLabel:I._('Back', 'navigation button', 'navigation button'),bgColor:a||K?a:"transparent",icon:k,iconColor:!t&&(!a||["white","lightGray","transparent"].includes(a))?"subtle":t,onClick:H,padding:"auto"!==w?w:2,size:F})})})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/84436-a4aaad31086002ee.mjs.map