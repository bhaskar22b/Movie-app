(self.modernJsonp=self.modernJsonp||[]).push([["34940"],{917789:function(e,i,t){t.r(i),t.d(i,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardPickerList_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],type:"Pin",abstractKey:null};n.hash="76b22cc5d658befe1dc27454d3aee77f";let a=n},887802:function(e,i,t){var n;t.r(i),t.d(i,{default:()=>r});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardTitleSuggestionList_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BoardSection",kind:"LinkedField",name:"section",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:n=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:n,storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};a.hash="69ffcdea57a7778d2ebbcd41c276c0d0";let r=a},991809:function(e,i,t){t.r(i),t.d(i,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupRepinPage_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null}],type:"Pin",abstractKey:null};n.hash="60ba8f292ef82335c3d4cbce50f362d8";let a=n},104922:function(e,i,t){t.r(i),t.d(i,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MobileRepinCreateScreen_pin",selections:[{args:null,kind:"FragmentSpread",name:"RepinAddSection_pin"}],type:"Pin",abstractKey:null};n.hash="2d5f10a7f4e54a8cf9118f134bcd7386";let a=n},521906:function(e,i,t){t.r(i),t.d(i,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MobileRepinPicker_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:"images_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{args:null,kind:"FragmentSpread",name:"RepinBoardPicker_pin"},{args:null,kind:"FragmentSpread",name:"RepinSectionPicker_pin"},{args:null,kind:"FragmentSpread",name:"RepinCreateBoardButton_pin"}],type:"Pin",abstractKey:null};n.hash="fbb4180ea3919f31ccfbb4bf4b2d25ea";let a=n},34554:function(e,i,t){var n;t.r(i),t.d(i,{default:()=>r});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinAddSection_pin",selections:[n={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};a.hash="b3ec14d29962e56f80dd52e7e6d7a6d9";let r=a},361817:function(e,i,t){var n;t.r(i),t.d(i,{default:()=>r});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinBoardPicker_pin",selections:[n={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[n],storageKey:null},{args:null,kind:"FragmentSpread",name:"BoardPickerList_pin"},{args:null,kind:"FragmentSpread",name:"BoardTitleSuggestionList_pin"},{args:null,kind:"FragmentSpread",name:"useClientTrackingParams_pin"}],type:"Pin",abstractKey:null};a.hash="475036dcb56a51d3552313200b8c9d45";let r=a},59986:function(e,i,t){var n;t.r(i),t.d(i,{default:()=>r});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinCreateBoardButton_pin",selections:[n={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[n],storageKey:null}],type:"Pin",abstractKey:null};a.hash="1612c2df94f42990b3d4f6ccede72a70";let r=a},976529:function(e,i,t){var n,a,r,o,l,s,d;t.r(i),t.d(i,{default:()=>u});let c=(n=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],a=[{kind:"Variable",name:"pin",variableName:"pinId"}],o={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d=[r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"RepinPageQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"RepinPage_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"RepinPageQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},o,{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:"images_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},l,{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},s,o,l],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]},{alias:null,args:null,concreteType:"BoardSection",kind:"LinkedField",name:"section",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null},s],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:d,storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:d,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:d,storageKey:null}],storageKey:null},s],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"c2dfef88dd2d19e87739d4a01cad7d8a4598189c33dbda3a2859c0731bd12bea",metadata:{},name:"RepinPageQuery",operationKind:"query",text:null}});c.hash="76093586a269ca0330e25a57bd33f665";let u=c},763536:function(e,i,t){t.r(i),t.d(i,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinPage_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"MobileRepinPicker_pin"},{args:null,kind:"FragmentSpread",name:"MobileRepinCreateScreen_pin"}],type:"Pin",abstractKey:null};n.hash="334d0ce72c30565b62e52dd00bf86623";let a=n},112402:function(e,i,t){var n;t.r(i),t.d(i,{default:()=>r});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinSectionPicker_pin",selections:[n={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[n],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],type:"Pin",abstractKey:null};a.hash="f0b2fbadfba92480a2077999a000a308";let r=a},609464:function(e,i,t){var n,a,r,o,l;t.r(i),t.d(i,{default:()=>d});let s={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],kind:"Fragment",metadata:null,name:"useFetchBoardTitleSuggestionsQuery",selections:[{alias:null,args:a=[{kind:"Variable",name:"pin",variableName:"pinId"}],concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[o={alias:null,args:null,concreteType:"BoardTitleSuggestions",kind:"LinkedField",name:"boardTitleSuggestions",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null},l={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"useFetchBoardTitleSuggestionsQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[o,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null},l],storageKey:null}]},params:{id:"dfccee15ebd4af4563083cc11670f30e6390ba0f2d1317da3d908269f01eadba",metadata:{},name:"useFetchBoardTitleSuggestionsQuery",operationKind:"query",text:null}};s.hash="a8967078f1de7ce3a263a224d0d0e710";let d=s},583845:function(e,i,t){t.d(i,{Rq:()=>n,Vf:()=>a,jd:()=>r,oy:()=>o});let n=e=>"ios"===e&&(window.devicePixelRatio||1)*window.screen.height==2436,a=28,r=e=>window.innerHeight>=748&&n(e),o=()=>"undefined"!=typeof window&&!!window.navigator&&(/iPad/.test(navigator.platform)||"MacIntel"===navigator.platform&&"ontouchend"in document&&Math.min(window.screen.width,window.screen.height)>=700)},446885:function(e,i,t){t.d(i,{Z:()=>h});var n=t(686659),a=t(667294),r=t(391995),o=t(759271),l=t(351736),s=t(609252),d=t(178315),c=t(774838),u=t(40763),p=t(785893);function h({children:e,footerConfig:i,headerConfig:t,height:h,hideOnScroll:g,hideOnScrollState:{isHidden:_,updateHiddenState:m},isFooterHidden:f,noPadding:y,paddingX:b,paddingY:x=d.og,type:v,zIndex:P,isStoryPin:S}){let w,k;(0,a.useEffect)(()=>{(0,n.Z)("FixedContent","/app/packages/layout/FixedContent.tsx")},[]);let{headerLimitedOverflow:j,ignoreObstructions:I,zIndexForGestaltBug:T}=t||{},{appUpsellFooterConfig:B,footerInLego:Z,navFooterConfig:A}=i||{},R=!!B,F="header"===v?"top":"bottom",z=(0,l.vs)(),{isRTL:C}=(0,c.B)(),{mWebCloseupRedesignEnabled:E}=(0,o.Z)(),L=(0,a.useRef)(null),K=(0,a.useRef)(null);(0,a.useEffect)(()=>{try{if(!I){let e=L.current;K.current=j&&e&&Array.isArray(e.children)?e.children[0]:e,K.current instanceof HTMLElement&&s.Z.addObstruction(F,K.current)}}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}return()=>{!I&&K.current instanceof HTMLElement&&s.Z.removeObstruction(F,K.current)}},[I,j,F,z]);let O="top"===F?"relative":"fixed",M=y?0:x,H=(h??d.R$)+(t?.overrideTop||0),D=g||A?{transition:Z||E?"transform 300ms ease-in-out, opacity 300ms ease-in-out":"transform 200ms linear",..._||f?{transform:`translateY(${"top"===F?-H:H}px)`,opacity:Z||E?0:1}:Object.freeze({})}:{},N=2*!("relative"!==O||t?.noGutter),$=N?-N:0,W=z?l.k7:"rgba(255,255,255,.95)";z&&("header"===v?w=-1:k=-1);let Y=Z?R?void 0:h??d.R$:"100%",q=Z?d.KJ:void 0,G=t?.isTranslucent&&W||z?W:"var(--sema-color-background-default)",U=t?.isTransparentBackground&&1?"var(--sema-color-background-transparent)":G,V=(0,a.useMemo)(()=>({height:"footer"===v&&E?`calc(${Y} + env(safe-area-inset-bottom))`:Y,...E&&"footer"===v?{paddingBottom:`calc(env(safe-area-inset-bottom) + ${4*(M||0)}px)`}:Object.freeze({})}),[E,Y,v,M]),J=(0,u.Z)({skipExpActivation:!0});return(0,p.jsx)(r.xu,{ref:L,bottom:"footer"===v,dangerouslySetInlineStyle:{__style:{top:w,bottomStyle:k,...!P||T?{zIndex:T||1}:Object.freeze({}),...j?{background:"transparent",overflow:"hidden",paddingBottom:d.UB,marginBottom:-d.UB,pointerEvents:"none"}:Object.freeze({}),...t?.hasBorder?{borderBottom:d.dS}:Object.freeze({}),...i?.hasTopShadow?{boxShadow:"0 -2px 4px 1px rgba(0, 0, 0, 0.08)"}:Object.freeze({}),...D}},"data-test-id":v,display:R?"flex":void 0,height:h&&!Z?h:void 0,left:!0,marginEnd:Z?"auto":$,marginStart:Z?"auto":$,onTransitionEnd:()=>{(g||A)&&K.current&&(_||f?s.Z.removeObstruction(F,K.current):s.Z.addObstruction(F,K.current))},position:O,right:!0,top:"header"===v,width:Z||"fixed"!==O?void 0:"100%",zIndex:T?void 0:P,children:(0,p.jsx)(r.xu,{alignItems:i?.alignCenter?"center":void 0,dangerouslySetInlineStyle:{__style:{backgroundColor:U,paddingLeft:C||!J||S?void 0:"8px",paddingRight:C&&J&&!S?"8px":void 0,...V,boxShadow:E&&"footer"===v?`0 10px 0 0 ${U}, ${d.KJ}`:q,marginBottom:Z&&!A?.docked?16:void 0,...j?{pointerEvents:"auto"}:Object.freeze({}),...t?.useRoundedCorners?{zIndex:5,borderTopRightRadius:17,borderTopLeftRadius:17,borderBottomRightRadius:0,borderBottomLeftRadius:0}:Object.freeze({})}},display:Z||i?.alignCenter?"flex":void 0,marginEnd:Z?"auto":void 0,marginStart:Z?"auto":void 0,paddingX:b||4*("footer"===v&&!y)+N,paddingY:M,position:"relative",rounding:Z&&!A?.docked?"pill":void 0,width:A?A.footerWidth:R?void 0:"100%",children:"function"==typeof e?e({updateHiddenState:m}):e})})}},528630:function(e,i,t){t.d(i,{Z:()=>s});var n=t(686659),a=t(667294),r=t(446885),o=t(763904),l=t(785893);function s({alignCenter:e,appUpsellFooterConfig:i,footerInLego:t,hasTopShadow:s,navFooterConfig:d,...c}){return(0,a.useEffect)(()=>{(0,n.Z)("FixedFooter","/app/packages/layout/FixedFooter.tsx")},[]),(0,l.jsx)(o.Z,{appUpsellFooterConfig:i,hideOnScroll:c.hideOnScroll,navFooterConfig:d?.scrollConfig,children:n=>(0,l.jsx)(r.Z,{...c,footerConfig:{alignCenter:e,appUpsellFooterConfig:i,footerInLego:t,hasTopShadow:s,navFooterConfig:d},hideOnScrollState:n,type:"footer"})})}},271202:function(e,i,t){t.r(i),t.d(i,{default:()=>c});var n=t(686659),a=t(667294),r=t(391995),o=t(178315),l=t(446885),s=t(763904),d=t(785893);function c({hasBorder:e,headerLimitedOverflow:i,ignoreObstructions:t,isTranslucent:c,isTransparentBackground:u,noGutter:p,overrideTop:h,useRoundedCorners:g,zIndexForGestaltBug:_,isStoryPin:m,...f}){(0,a.useEffect)(()=>{(0,n.Z)("FixedHeader","/app/packages/layout/FixedHeader.tsx")},[]);let{noPadding:y,paddingY:b=o.og,zIndex:x}=f;return(0,d.jsx)(r.Le,{height:i?o.LV+2*(y?0:b)*4:void 0,top:h||0,zIndex:x||void 0,children:(0,d.jsx)(s.Z,{hideOnScroll:f.hideOnScroll,children:n=>(0,d.jsx)(l.Z,{...f,headerConfig:{isTranslucent:c,isTransparentBackground:u,headerLimitedOverflow:i,hasBorder:e,ignoreObstructions:t,noGutter:p,overrideTop:h,zIndexForGestaltBug:_,useRoundedCorners:g},hideOnScrollState:n,isStoryPin:m,type:"header"})})})}},763904:function(e,i,t){t.d(i,{Z:()=>o});var n=t(667294),a=t(730448);function r(e,i,t){var n;return(i="symbol"==typeof(n=function(e,i){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,i||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(i,"string"))?n:n+"")in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}class o extends n.Component{constructor(...e){super(...e),r(this,"state",{isHidden:!!this.props.appUpsellFooterConfig||!!this.props.navFooterConfig?.isDockedNavOnPlp}),r(this,"lastScrollPos",0),r(this,"updateHiddenState",e=>{this.reqAnimationId=window.requestAnimationFrame(()=>{this.setState({isHidden:e})})}),r(this,"handleScroll",(0,a.Z)(()=>{let{appUpsellFooterConfig:e,navFooterConfig:i}=this.props,{isHidden:t}=this.state,n=window.scrollY,a=n-this.lastScrollPos,r="none",{scrollHeight:o,clientHeight:l}=document.documentElement||{};Number.isNaN(o)||Number.isNaN(l)||(r=a<0?n<=Math.abs((window.scrollMinY||0)+Math.max(a,20))?"start":"none":n>=(window.scrollMaxY||o-l)-Math.max(a,20)?"end":"none");let s=55*!i?.isModal;e?a>20&&t&&n>=500?e.shouldShowAfterScroll()&&(this.updateHiddenState(!1),i?.onScroll(!1)):(a<-20&&!t||n<=s)&&(this.updateHiddenState(!0),i?.onScroll(!0)):this.props.navFooterConfig?.isDockedNavOnPlp?"start"===r&&!t||n<=s?(this.updateHiddenState(!0),i?.onScroll(!0)):(n>s||"end"===r)&&t&&(this.updateHiddenState(!1),i?.onScroll(!1)):(a<-20||"start"===r)&&t||n<=s?(this.updateHiddenState(!1),i?.onScroll(!1)):(a>20||"end"===r)&&!t&&(this.updateHiddenState(!0),i?.onScroll(!0)),this.lastScrollPos=n},30))}componentDidMount(){try{(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.addEventListener("scroll",this.handleScroll)}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}}componentWillUnmount(){(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.removeEventListener("scroll",this.handleScroll),this.reqAnimationId&&(window.cancelAnimationFrame(this.reqAnimationId),this.reqAnimationId=null)}componentDidUpdate(e){!e.hideOnScroll&&this.props.hideOnScroll||!e.navFooterConfig?.isDockedNavOnPlp&&this.props.navFooterConfig?.isDockedNavOnPlp?(this.updateHiddenState(!0),window.addEventListener("scroll",this.handleScroll)):(e.hideOnScroll&&!this.props.hideOnScroll||e.navFooterConfig?.isDockedNavOnPlp&&!this.props.navFooterConfig?.isDockedNavOnPlp)&&(this.updateHiddenState(!1),window.removeEventListener("scroll",this.handleScroll))}render(){let{children:e,navFooterConfig:i}=this.props,{isHidden:t}=this.state;return e({isHidden:!i?.forceShow&&t,updateHiddenState:this.updateHiddenState})}}},134136:function(e,i,t){t.r(i),t.d(i,{default:()=>u});var n=t(686659),a=t(667294),r=t(391995),o=t(806513),l=t(583845),s=t(873438),d=t(774838),c=t(785893);let u=({children:e,dataLayoutShiftBoundaryId:i,hasFixedHeader:t=!1,hasGutter:u=!0,height:p,showKeychainError:h=!1,useViewport:g=!1})=>{(0,a.useEffect)(()=>{(0,n.Z)("MobilePageContainer","/app/packages/layout/MobilePageContainer.tsx")},[]);let _=(0,d.B)(),m=(0,l.jd)(_.userAgent.platform)?l.Vf:0;return(0,c.jsx)(r.xu,{"data-layout-shift-boundary-id":i||"PageContainer",height:g?`calc(100vh - ${m}px)`:p,paddingX:u?o.D6:void 0,paddingY:t||h?void 0:3,children:(0,c.jsx)(s.C,{value:!!u,children:e})})}},178315:function(e,i,t){t.d(i,{KJ:()=>l,LV:()=>o,R$:()=>n,UB:()=>r,dS:()=>s,og:()=>a});let n=64,a=3,r=100,o=44,l="0px 0px 8px rgba(0, 0, 0, 0.1)",s="1px solid #efefef"},802108:function(e,i,t){t.d(i,{AS:()=>d,Ps:()=>r,Q6:()=>h,ZP:()=>c,le:()=>g,qe:()=>u,yU:()=>p});var n=t(360033),a=t(907049);let r=(e,i)=>e.length===i.length&&e.every((e,t)=>(0,a.Z)(e,i[t])),o=(e,i)=>e.length===i.length&&e.every((e,t)=>e===i[t]),l=e=>e;function s(e,i=o,t=l){return function(n){let a=[];return function(...r){let o=a.find(e=>i(e.args,t(r)));if(o)return o.result;let l=n(...r);return a.push({args:t(r),result:l}),e&&a.length>e&&a.shift(),l}}}function d(e,i=o,t=l){let n=[];return{memoize:function(a){return function(...r){let o=t(r),l=n.find(e=>i(e.args,o));if(l)return l.result;let s=a(...r);return n.push({args:o,result:s}),e&&n.length>e&&n.shift(),s}},clearCache:function(){n=[]}}}let c=s(),u=s(1),p=s(void 0,o,e=>[JSON.stringify(e)]),h=s(0,r),g=s(0,(e,i)=>e.length===i.length&&e.every((e,t)=>(0,n.ZP)(e,i[t])))},81179:function(e,i,t){function n(e,i){let t;if(e.error){let{httpStatus:n,api_error_code:a,redirectUrl:r}=e.error;(404===n||401===n&&7===a)&&(t={pathname:i?"/ideas/":"/",state:{showError:!0}}),301===n&&r&&(t={pathname:r})}return t}t.d(i,{Z:()=>n})},565649:function(e,i,t){t.d(i,{Z:()=>s});var n=t(312048),a=t(935059),r=t(173874),o=t(81179),l=t(661376);function s(e){let i=(0,n.s0)(),t=(0,n.TH)(),{isAuth:s}=(0,a.Z)(),d=!s&&(0,r.isCloseupPage)(t),c=(0,l.Z)(e),u=(0,o.Z)(c,d);return u&&i(u.pathname,{replace:!0,state:u.state}),c}},919203:function(e,i,t){t.d(i,{Z:()=>l});var n=t(686659),a=t(667294),r=t(391995),o=t(785893);function l({text:e}){return(0,a.useEffect)(()=>{(0,n.Z)("AccessibilityHiddenHeading","/app/www/Header/AccessibilityHiddenHeading.tsx")},[]),(0,o.jsx)(r.xu,{display:"visuallyHidden",children:(0,o.jsx)(r.qd,{accessibilityLevel:1,children:e})})}},592656:function(e,i,t){t.d(i,{Z:()=>p});var n=t(686659),a=t(667294),r=t(391995),o=t(24246),l=t(271202),s=t(134136),d=t(669692),c=t(254889),u=t(785893);function p(e){(0,a.useEffect)(()=>{(0,n.Z)("BoardSectionCreate","/app/www/boardSection/BoardSectionCreate.tsx")},[]);let i=(0,o.Z)(),{backButtonIcon:t,errorMessage:p,name:h,onNextButtonTouch:g,onNameChange:_,selectedPinIds:m=[],useRoundedCorners:f}=e,y=m.length>0?130:64;return(0,u.jsxs)(s.default,{hasFixedHeader:!0,children:[(0,u.jsxs)(l.default,{height:y,paddingY:3,useRoundedCorners:f,children:[(0,u.jsxs)(r.kC,{alignItems:"center",justifyContent:"between",children:[(0,u.jsx)(c.default,{color:"default",icon:t||"close",padding:3,size:"sm"}),(0,u.jsx)(r.qd,{accessibilityLevel:1,size:"300",children:i._('Add section', 'for add board section page', 'for add board section page')}),(0,u.jsx)(r.xu,{"data-test-id":"create-section-button",children:(0,u.jsx)(r.zx,{accessibilityLabel:i._('Add', 'boardSectionCreate.Add.Button.Text', 'Add button accessibility label for board section create page'),color:"primary",disabled:""===h.trim(),onClick:g,size:"lg",text:i._('Next', 'Next button for board section create page', 'Next button for board section create page')})})]}),m&&(0,u.jsx)(d.Z,{selectedPinIds:m})]}),(0,u.jsx)(r.xu,{"data-test-id":"addSectionName",paddingX:2,paddingY:3,children:(0,u.jsx)(r.nv,{errorMessage:p||"",id:"section-name-input",label:i._('Name', 'boardSectionCreate.TextField.Name.Label', 'TextField label to Name on BoardSectionCreate'),onChange:e=>_(e.event),size:"lg",value:h})})]})}},289817:function(e,i,t){t.d(i,{Z:()=>m});var n=t(686659),a=t(667294),r=t(581722),o=t(391995),l=t(935059),s=t(24246),d=t(661376),c=t(809802),u=t(158502),p=t(214119),h=t(828890),g=t(453799),_=t(785893);function m({excludeBoardId:e,hideSectionPickerList:i,onRepin:t}){var m;(0,a.useEffect)(()=>{(0,n.Z)("RepinBoard","/app/www/boardSection/RepinBoard.tsx")},[]);let f=(0,s.Z)(),y=(0,l.Z)(),b=(m=y.isAuth?y.username:"",(0,d.Z)({name:"BoardsResource",options:u.O.options({username:m,boardOrder:"custom",filterStories:!0,mixPublicSecret:!0})}),(0,r.v9)(e=>(0,p.Z)(e)||[])),[x,v]=(0,a.useState)(null);return b.length>0&&(x&&!i?(0,_.jsx)(g.Z,{boardId:x?.id,repin:(e,i)=>{x&&t(x,i)},showSectionRep:!0}):(0,_.jsxs)(o.xu,{"data-test-id":"board-picker-row-container",children:[(0,_.jsx)(o.xu,{marginTop:3,children:(0,_.jsx)(o.xe,{children:f._('All boards', 'title for board picker all boards section', 'title for board picker all boards section')})}),(0,_.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:`${c.T}px`}},paddingY:3,children:b.filter(i=>i.id!==e).map(e=>(0,_.jsx)(h.Z,{boardId:e.id,onBoardSelected:n=>((e,n)=>{if(!i&&e&&n)return void v(n);t(n)})(n,e)},e.id))})]}))}},642942:function(e,i,t){t.d(i,{Wx:()=>T,ZP:()=>Z});var n=t(686659),a=t(667294),r=t(581722),o=t(312048),l=t(391995),s=t(924591),d=t(24246),c=t(528630),u=t(271202),p=t(134136),h=t(577356),g=t(809802),_=t(289817),m=t(669692),f=t(310758),y=t(782677),b=t(27399),x=t(660322),v=t(407775);let P=e=>i=>{let{source:t,target:n,pinIds:a}=e;if(i({type:"PINS_MOVE",payload:e}),t.boardlessPins||n.boardId!==t.boardId){let e={board_id:n.boardId,pin_ids:a,section_id:n.sectionId};return b.Z.create("BulkEditResource",e).callUpdate()}if(n.sectionId){let e={section_id:n.sectionId,pins:a},t="BoardSectionEditResource";return b.Z.create(t,e).callUpdate().then(n=>{let a=(0,y.Fv)(n.resource_response.data,v.Z[t]);return i((0,x.XM)(t,e,n,a)),n})}let r={section_id:t.sectionId,pins:a};return b.Z.create("BoardSectionPinsResource",r).callDelete()};var S=t(577348),w=t(254889),k=t(453799),j=t(785893);function I(e,i,t){return e?t._('Got it! Hang tight while we move all those Pins...', 'Toast message for bulk pins move.', 'Toast message for bulk pins move.'):i?t._('Saved to section!', ' - ', ' -- '):t._('Saved to board!', ' - ', ' -- ')}function T({onAddNewSection:e,useIconWithBackground:i}){(0,a.useEffect)(()=>{(0,n.Z)("RepinSection","/app/www/boardSection/RepinSection.tsx")},[]);let t=(0,d.Z)();return(0,j.jsx)(c.Z,{alignCenter:i,height:i?g.y:g.T,children:(0,j.jsx)(f.Z,{onTouch:e,pressState:"none",children:(0,j.jsxs)(l.xu,{alignItems:"center","data-test-id":"addSectionButton",display:"flex",padding:+!i,children:[i?(0,j.jsx)(l.xu,{color:"secondary",dangerouslySetInlineStyle:{__style:{padding:"14px"}},rounding:200,children:(0,j.jsx)(l.JO,{accessibilityLabel:t._('Create board button', 'RepinSection.CreateBoard.Button', 'accessibility label for create board button'),color:"default",icon:"plus",size:20})}):(0,j.jsx)(l.JO,{accessibilityLabel:t._('Add section button', ' - ', ' -- '),color:"error",icon:"circle-plus",size:38}),i?(0,j.jsx)(l.xu,{marginStart:2,children:(0,j.jsx)(l.xv,{size:"400",weight:"bold",children:t._('Add section', 'Add new section to Pin to', 'Add new section to Pin to')})}):(0,j.jsx)(l.xu,{marginStart:3,children:(0,j.jsx)(l.xv,{weight:"bold",children:t._('Add section', 'Add new section to Pin to', 'Add new section to Pin to')})})]})})})}class B extends a.PureComponent{constructor(...e){var i,t,n;super(...e),i="onRepinToBoard",t=e=>{e.section_count?this.props.onRepinToBoardWithSections(e):this.props.repinToOtherBoard(e.id,this.props.i18n)},(i="symbol"==typeof(n=function(e,i){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,i||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(i,"string"))?n:n+"")in this?Object.defineProperty(this,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[i]=t}render(){let{boardId:e,boardSectionId:i,orginalBoardId:t,onAddNewSection:n,repin:a,hideBoardPickerRow:r,selectedPinIds:o,isCollaborative:s}=this.props,d=t===e;return(0,j.jsxs)(p.default,{hasFixedHeader:!0,children:[(0,j.jsxs)(u.default,{hasBorder:!0,height:140,children:[(0,j.jsxs)(l.kC,{alignItems:"center",justifyContent:"start",children:[(0,j.jsx)(l.xu,{column:2,children:(0,j.jsx)(w.default,{})}),(0,j.jsx)(l.xu,{column:8,children:(0,j.jsx)(l.qd,{accessibilityLevel:1,align:"center",size:"300",children:this.props.i18n._('Choose section', 'title for section selection in repin flow', 'title for section selection in repin flow')})}),(0,j.jsx)(l.xu,{column:2})]}),(0,j.jsx)(m.Z,{selectedPinIds:o})]}),e&&(0,j.jsx)(k.Z,{boardId:e,hideBoardPickerRow:d&&r,originalBoardId:t,repin:a,sectionId:i}),d&&(0,j.jsxs)(l.xu,{children:[!s&&(0,j.jsx)(_.Z,{excludeBoardId:e,hideSectionPickerList:!0,onRepin:this.onRepinToBoard}),(0,j.jsx)(T,{onAddNewSection:n})]})]})}}let Z=function(e){let{inSelectAll:i,pinIds:t,orginalBoardId:n,boardSectionId:a,onRefreshBoardSection:l,url:c}=e,{showToast:u}=(0,h.dI)(),p=(0,d.Z)(),g=(0,o.s0)(),_=(0,r.I0)(),m=async(e,r,o)=>{let d=r&&r.id,p={boardId:n,sectionId:a},h={boardId:e,sectionId:d},m=i?(0,S.Z)({source:p,target:h,excludePinIds:t}):P({source:p,target:h,pinIds:t});n!==e?(await _(m),g(c,{})):(await _(m),l&&await l()),u(({hideToast:e})=>(0,j.jsx)(s.Z,{onHide:e,text:I(i,d,o)}))},f=async(e,r)=>{let o={boardId:n,sectionId:a},l={boardId:e,sectionId:void 0};u(({hideToast:e})=>(0,j.jsx)(s.Z,{onHide:e,text:I(i,void 0,r)})),await _(i?(0,S.Z)({source:o,target:l,excludePinIds:t}):P({source:o,target:l,pinIds:t})),g(-2)};return(0,j.jsx)(B,{...e,i18n:p,repin:m,repinToOtherBoard:f})}},669692:function(e,i,t){t.d(i,{Z:()=>d});var n=t(686659),a=t(667294),r=t(391995),o=t(24246),l=t(228612),s=t(785893);function d({selectedPinIds:e}){(0,a.useEffect)(()=>{(0,n.Z)("SelectedPinsPreview","/app/www/boardSection/SelectedPinsPreview.tsx")},[]);let i=(0,o.Z)(),t=(0,a.useRef)(null),d=(0,l.JC)(),c=(e||[]).map(e=>d[e]).filter(Boolean);(0,a.useEffect)(()=>{let e=t.current;e&&(e.scrollLeft=e.scrollWidth-e.offsetWidth)},[c]);let u=c.map((e,t)=>{let{description:n,images:a}=e,o=a?.["236x"];return(0,s.jsx)(r.xu,{marginEnd:1,children:(0,s.jsx)(r.zd,{height:65,rounding:200,wash:!0,width:50,children:o?.url&&(0,s.jsx)(r.Ee,{alt:!!n?.trim()&&n?.trim()||i._('Selected Pin', 'SelectedPinsPreview.image.accessibilityLabel', 'Accessibility label for Pin image without description'),color:e.dominant_color??"",fit:"contain",naturalHeight:o?.height??1,naturalWidth:o?.width??1,src:o.url})})},t)});return(0,s.jsx)(r.xu,{ref:t,display:"flex",marginTop:2,overflow:"scroll",children:u})}},809802:function(e,i,t){t.d(i,{T:()=>n,y:()=>a});let n=70,a=80},26499:function(e,i,t){t.d(i,{Bb:()=>f,Bx:()=>d,F4:()=>s,Qj:()=>c,_6:()=>m,gv:()=>l,hg:()=>u,is:()=>g,jP:()=>_,lt:()=>o,oM:()=>p,wI:()=>h});var n=t(37321),a=t(646108),r=t(341687);let o=e=>e._('Log in to continue', 'limitedLogin.modalHeader.default', 'Default title on mobile web limited login modal'),l=({firstName:e,i18n:i})=>e?(i._('{{ name }} invited you to join their board', 'limitedLogin.modalHeader.groupBoardCollab', 'Mobile Modal prompting users to join a friends({{ name }}) board')).replace("{{ name }}",e):i._('Your friends invited you to join their board', 'limitedLogin.modalHeader.groupBoardCollab', 'Mobile Modal prompting users to join a friends board'),s=e=>{let i=(0,r.Z)(e.search).board_url;if(i){let e=(0,a.Z)(i),t=(0,n.Z)({accept_invite:!0,seamless:!0});return e.includes("?")?`${e}&${t}`:`${e}?${t}`}return e.pathname},d=e=>e._('Log in to save this Pin', 'limitedLogin.modalHeader.repin', 'Title on mobile web limited login modal to prompt users to login after they clicked save button.'),c=e=>{let i=e.pathname;if(i.startsWith("/pin/")){let e=i.split("/");if(e.length>2)return`/${e[1]}/${e[2]}/repin/`}return i},u=e=>e._('Log in to send this Pin', 'limitedLogin.modalHeader.send', 'Title on mobile web limited login modal to prompt users to login after they clicked send button.'),p=e=>e._('Log in to edit this Pin', 'limitedLogin.modalHeader.editPin', 'Title on mobile web limited login modal to prompt users to login after they clicked edit button.'),h=e=>{let i=e.pathname;if(i.startsWith("/pin/")){let e=i.split("/");if(e.length>2)return`/${e[1]}/${e[2]}/edit/`}return i},g=e=>e._('Log in to create a Pin or board', 'limitedLogin.modalHeader.create', 'Title on mobile web limited login modal to prompt users to login to create a Pin or board.'),_=e=>e._('Log in to hide this Pin', 'limitedLogin.modalHeader.hidePin', 'Title on mobile web limited login modal to prompt users to login after they clicked hide Pin button.'),m=e=>e._('Log in to share the profile', 'limitedLogin.modalHeader.shareProfile', 'Title on mobile web limited login modal to prompt users to login after they clicked share button on profile page.'),f=e=>e._('Log in to create a board', 'limitedLogin.modalHeader.createBoard', 'Title on mobile web limited login modal to prompt users to login to create a board.')},454985:function(e,i,t){t.d(i,{Z:()=>d});var n=t(686659),a=t(667294),r=t(24246),o=t(26499),l=t(36776),s=t(785893);function d({children:e,callbackFunction:i,modalHeader:t,nextLocation:d}){(0,a.useEffect)(()=>{(0,n.Z)("WithLimitedLogin","/app/www/login/duplo/LimitedLogin/WithLimitedLogin.tsx")},[]);let c=(0,r.Z)(),{viewer:u,loginForMore:p,limitedLoginModalSubheader:h,limitedLoginModalNextLocation:g}=(0,l.m)(),_="LIMITED_LOGIN"===u.type;return(0,s.jsx)("div",{onClickCapture:e=>{_&&(i&&i(),e&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()),p?.setVisible(!0),h?.setText(t||(0,o.lt)(c)),d&&g?.setRoute(d))},children:e})}},741423:function(e,i,t){t.d(i,{Z:()=>s});var n=t(667294),a=t(581722),r=t(577356),o=t(38359),l=t(956701);function s(){let e=(0,a.I0)(),{showToast:i,showOneToast:t}=(0,r.dI)(),s=(0,a.oR)(),d=(0,n.useCallback)((t,n)=>{n||e((0,l.a5)()),i(t)},[e,i]);return{showToast:i,showOneToast:t,showRepinConfirmation:(i,t)=>{t||e((0,l.WF)()),setTimeout(()=>{s.getState().session.isShowingRepinConfettiAnimation?setTimeout(()=>{d(i,t)},o.wJ):d(i,t)},o.Tt)}}}},652436:function(e,i,t){t.d(i,{ZP:()=>iI,vY:()=>ij});var n,a,r,o,l,s,d,c,u,p,h,g=t(686659),_=t(667294),m=t(581722),f=t(167912),y=t(312048),b=t(172045),x=t(391995),v=t(104999),P=t(375217),S=t(465784),w=t(289935),k=t(935059),j=t(183e3),I=t(680295),T=t(24246),B=t(501010),Z=t(890678),A=t(565649),R=t(739405),F=t(504727),z=t(214119),C=t(157498);let E=(void 0!==n||(n=t(609464)).hash&&"a8967078f1de7ce3a263a224d0d0e710"!==n.hash&&console.error("The definition of 'useFetchBoardTitleSuggestionsQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n),L=e=>{let{v3GetPinQuery:i}=(0,f.useLazyLoadQuery)(E,{pinId:e});if(i?.error?.message)throw i?.error;return i?.data?.boardTitleSuggestions?.map(({title:e})=>e).filter(Boolean)||[]};var K=t(647636),O=t(924591),M=t(577356),H=t(592656),D=t(741423),N=t(987072),$=t(862564),W=t(322360),Y=t(500912),q=t(785893);let G=(void 0!==a||(a=t(34554)).hash&&"b3ec14d29962e56f80dd52e7e6d7a6d9"!==a.hash&&console.error("The definition of 'RepinAddSection_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);function U({createSectionAndRepin:e,errorMessage:i,i18n:t,pin:n,setErrorMessage:a,useRoundedCorners:r}){let[o,l]=(0,_.useState)("");return(0,q.jsx)(H.Z,{backButtonIcon:"chevron-left",errorMessage:i,name:o,onNameChange:e=>{a(""),l(e.target.value)},onNextButtonTouch:()=>{e(o,t)},selectedPinIds:[n.entityId],useRoundedCorners:r})}function V(e){(0,_.useEffect)(()=>{(0,g.Z)("RepinAddSection","/app/www/save/duplo/RepinAddSection.tsx")},[]);let{boardId:i,isEditingPin:t,onSuccess:n,pinKey:a,pinBoardId:r,pinSectionId:o,trackingParams:l,useRoundedCorners:s}=e,d=(0,j.Z)(G,a),c=(0,m.I0)(),u=(0,y.s0)(),p=(0,T.Z)(),{showToast:h}=(0,M.dI)(),f=(0,v.Z)(),b=(0,Y.n)(),{checkExperiment:x}=(0,B.Z)(),P=(0,K.cO)(),[S,w]=(0,_.useState)(""),{showRepinConfirmation:k}=(0,D.Z)(),I=e=>u(e);return(0,q.jsx)(U,{createSectionAndRepin:e=>{let a=e=>w(e.message_detail||e.message);c((0,N.Z)(i,[],e,f)).then(e=>{h(({hideToast:e})=>(0,q.jsx)(O.Z,{onHide:e,text:p._('Section added!', ' - ', ' -- ')}));let s=e.resource_response.data;c((0,W.w)({checkExperiment:x,i18n:p,logContextEvent:f,pinId:d.entityId,boardId:i,onSuccess:t?void 0:()=>{P("Save",{pin_id:d.entityId}),n()},showRepinConfirmation:k,section:s,trackingParams:{clientTrackingParams:l,pinnedToBoardId:d.pinnedToBoard?d.pinnedToBoard.entityId:""},historyPush:I,savePinId:b?.save??(()=>{})})).then(()=>{d&&r&&c((0,$.q)({pinId:d.entityId,boardId:r,boardSectionId:o,clientTrackingParams:l})).then(()=>d.pinnedToBoard?u(d.pinnedToBoard.url??"",{replace:!0}):void 0)}).catch(a)}).catch(a)},errorMessage:S,i18n:p,pin:d,setErrorMessage:w,useRoundedCorners:s})}var J=t(520803);function Q(){let e=(0,y.TH)(),{params:{boardId:i,id:t}}=(0,J.Z)(),{search:n}=e,a=new URLSearchParams(n),r=!!a.get("isEditingPin"),o=a.get("pinBoardId")??"";return{boardId:i,pinId:t,isEditingPin:r,pinBoardId:o,pinSectionId:a.get("pinSectionId")??"",originalPinId:a.get("originalPinId")??"",isFromToast:!!a.get("isFromToast")}}let X=(void 0!==r||(r=t(104922)).hash&&"2d5f10a7f4e54a8cf9118f134bcd7386"!==r.hash&&console.error("The definition of 'MobileRepinCreateScreen_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);function ee({pinKey:e,trackingParams:i,useRoundedCorners:t}){(0,_.useEffect)(()=>{(0,g.Z)("MobileRepinCreateScreen","/app/www/save/MobileRepinCreateScreen.tsx")},[]);let n=(0,j.Z)(X,e),a=(0,y.s0)(),{boardId:r,isEditingPin:o,pinBoardId:l,pinSectionId:s}=Q();return r?(0,q.jsx)(V,{boardId:r,isEditingPin:o,onSuccess:()=>{a(-3)},pinBoardId:l,pinKey:n,pinSectionId:s,trackingParams:i,useRoundedCorners:t}):null}var ei=t(216975),et=t(583845),en=t(271202),ea=t(134136),er=t(642942),eo=t(919203),el=t(250704);function es(e,i){return!!(e&&e.placement_id&&e.experience_id===i)}var ed=t(26499),ec=t(454985),eu=t(39722),ep=t(802108);let eh="cubic-bezier(0.66, 0.025, 0.33, 0.975)",eg=(0,ep.qe)((e,i,t,n,a)=>{let r=e,o=i,l=0,s=0,d="",c=Math.floor(i/3);if("shrinkToPin"===t&&(l="24px",s=1,r=Math.floor(3*c/2),o=c),"pinToGrid"===t&&n&&a){let e=n.getBoundingClientRect(),i=a.getBoundingClientRect(),t=i.x+i.width/2-(e.x+e.width/2),u=i.y+i.height/2-(e.y+e.height/2);d=`translate(${t}px, ${u}px)`,l="24px 0px 0px 24px",s=1,r=c,o=c}return{borderRadius:l,height:r,opacity:s,overflow:"hidden",width:o,WebkitTransformOrigin:"center center",transformOrigin:"center center",WebkitTransform:d,transform:d,WebkitTransition:`all .42s ${eh}`,transition:`all .42s ${eh}`}}),e_=(0,ep.qe)(e=>({opacity:+!!e,WebkitTransition:`opacity .42s ${eh}`,transition:`opacity .42s ${eh}`})),em=(0,ep.qe)(e=>({opacity:+!e,WebkitTransition:`all .25s ${eh}`,transition:`all .25s ${eh}`,zIndex:3}));function ef({completeExperience:e,pinDominantColor:i,pinImageHeight:t,pinImageWidth:n,pinImageUrl:a}){let r,o,l,s;(0,_.useEffect)(()=>{(0,g.Z)("BoardCreateEdu","/app/www/nux/BoardCreateEdu.tsx")},[]);let d=(0,T.Z)(),[c,u]=(0,_.useState)("visible"),[p,h]=(0,_.useState)("none"),m=window.innerWidth,f=Math.floor(m/3),y=Math.floor(m/6);(0,_.useEffect)(()=>{a&&"none"===p&&(r=setTimeout(()=>{h("shrinkToPin")},85)),a&&"shrinkToPin"===p&&(o=setTimeout(()=>{h("pinToGrid")},2e3)),"pinToGrid"===p&&"visible"===c&&(l=setTimeout(()=>{u("hidden")},2e3)),"hidden"===c&&(s=setTimeout(()=>{u("none"),e()},300))}),(0,_.useEffect)(()=>()=>{clearTimeout(r),clearTimeout(o),clearTimeout(l),clearTimeout(s)},[]);let b=(0,_.useRef)(null),v=(0,_.useRef)(null);return(0,q.jsxs)(x.xu,{alignItems:"center",bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:em("hidden"===c)},direction:"column",display:"none"===c?"none":"flex",justifyContent:"center",left:!0,position:"fixed",right:!0,top:!0,children:[(0,q.jsxs)(x.xu,{alignItems:"center",display:"flex",height:m/2,justifyContent:"center",marginBottom:8,position:"relative",width:"100%",children:[(0,q.jsx)(x.xu,{dangerouslySetInlineStyle:{__style:e_("pinToGrid"===p)},position:"absolute",children:(0,q.jsx)(x.zd,{height:f,rounding:600,width:f+y+1,children:(0,q.jsxs)(x.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,q.jsx)(x.xu,{ref:v,color:"transparent",height:f,width:f}),(0,q.jsxs)(x.kC,{alignItems:"stretch",direction:"column",justifyContent:"between",children:[(0,q.jsx)(x.xu,{color:"secondary",height:y,width:y}),(0,q.jsx)(x.xu,{color:"secondary",height:y,width:y})]})]})})}),(0,q.jsx)(x.xu,{ref:b,dangerouslySetInlineStyle:{__style:eg(t/n*m,m,p,b.current,v.current)},position:"absolute",children:(0,q.jsx)(x.Ee,{alt:d._('Pin image', 'Pin image on repin page', 'Pin image on repin page'),color:i,fit:"cover",naturalHeight:t,naturalWidth:n,src:a})})]}),(0,q.jsx)(x.xu,{marginBottom:8,marginTop:8,paddingX:12,children:(0,q.jsx)(x.qd,{align:"center",size:"600",children:d._('Keep your ideas organized by creating a board', 'boardPicker.edu.heading', 'board create education shown before user create their first board')})})]})}var ey=t(603909),eb=t(63959),ex=t(178315);function ev(e,i,t){var n;return(i="symbol"==typeof(n=function(e,i){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,i||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(i,"string"))?n:n+"")in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}let eP=["#0074e8","#0FA573","#B469EB","#F13535","#E2780D"],eS=(e,i)=>Math.random()*((e||1)-(i||0))+(i||0),ew=e=>Math.PI/180*e;class ek extends _.PureComponent{constructor(...e){super(...e),ev(this,"animationTimer",null),ev(this,"canvasRemovalTimer",null),ev(this,"childrenContainerRef",(0,_.createRef)()),ev(this,"containerRef",(0,_.createRef)()),ev(this,"buildCanvas",()=>{if(!this.containerRef.current)return null;let e=window.innerWidth,{height:i,top:t}=this.containerRef.current.getBoundingClientRect(),n=document.createElement("canvas");return n.style.position="absolute",n.style.left="0px",n.style.top=`${t-(e-i)/2}px`,n.style.pointerEvents="none",n.style.width=`${e}px`,n.style.height=`${e}px`,n.width=e,n.height=e,n}),ev(this,"explode",()=>{let e=this.buildCanvas();if(!e)return;let i=this.containerRef.current,t=this.childrenContainerRef.current,n=e.getContext("2d");i?.insertBefore(e,t);let a=Array.from(Array(120)).map(()=>({x:e.width/2,y:e.height/2,radius:Math.round(eS(10,30)),color:eP[Math.floor(Math.random()*eP.length)],degree:Number(eS(0,360).toFixed(1)),speed:Math.round(eS(0,25)),friction:.9,opacity:Number(eS(0,.5).toFixed(1)),yVel:0,gravity:.04})),r=(e,i,t,n)=>{window.requestAnimationFrame(()=>r(e,i,t,n)),i.clearRect(0,0,t,n),e.forEach(e=>{e.x+=e.speed*Math.cos(ew(e.degree)),e.y+=e.speed*Math.sin(ew(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(i.beginPath(),i.globalAlpha=e.opacity,i.fillStyle=e.color,i.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),i.fill())})};n&&r(a,n,e.width,e.height),this.canvasRemovalTimer=setTimeout(()=>{i?.removeChild(e)},(this.props.delay||0)+1e3)})}componentDidUpdate(e){let{delay:i,startAnimation:t}=this.props,{startAnimation:n}=e;t&&n!==t&&(this.animationTimer=setTimeout(this.explode,i))}componentWillUnmount(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}render(){return(0,q.jsx)(x.xu,{ref:this.containerRef,children:(0,q.jsx)(x.xu,{ref:this.childrenContainerRef,children:this.props.children})})}}function ej(e,i,t){var n;return(i="symbol"==typeof(n=function(e,i){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,i||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(i,"string"))?n:n+"")in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}ev(ek,"defaultProps",{delay:0});let eI=(e,i,t)=>{let n=[],a=i.current?.getBoundingClientRect(),r=t.current?.getBoundingClientRect();if(a&&r){let e={x:r.left-a.left,y:r.top-a.top},i={x:r.width/a.width,y:r.height/a.height};n.push(`translate(${e.x}px, ${e.y}px)`),n.push(`scale(${i.x}, ${i.y})`)}return{WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?n.join(" "):"none",transform:e?n.join(" "):"none",WebkitTransition:"all .5s ease-in-out",transition:"all .5s ease-in-out",borderRadius:e?"8px 0px 0px 0px":"8px",overflow:"hidden",marginBottom:24}};class eT extends _.PureComponent{constructor(...e){super(...e),ej(this,"state",{startAnimation:!1,animationStyles:null}),ej(this,"dismissTimer",null),ej(this,"pinRef",(0,_.createRef)()),ej(this,"pinDestinationRef",(0,_.createRef)()),ej(this,"handleAnimationAndCompletion",()=>{let{onComplete:e,savePin:i,selectedBoardName:t}=this.props;if(!t)return;let n=this.startAnimation();Promise.all([n,i(t)]).then(i=>{let[,n]=i;e(n,t)}).catch(e=>{n.then(()=>{e?.onError?.()})})}),ej(this,"startAnimation",()=>new Promise(e=>{let i=eI(!0,this.pinRef,this.pinDestinationRef);this.setState({startAnimation:!0,animationStyles:i},()=>{this.dismissTimer=setTimeout(()=>{e()},2600)})}))}componentWillUnmount(){this.dismissTimer&&clearTimeout(this.dismissTimer)}componentDidUpdate(){let{selectedBoardName:e}=this.props,{startAnimation:i}=this.state;e&&!i&&this.handleAnimationAndCompletion()}render(){let{pinDominantColor:e,pinImageUrl:i,selectedBoardName:t}=this.props,{startAnimation:n,animationStyles:a}=this.state;return(0,q.jsxs)(_.Fragment,{children:[(0,q.jsx)(x.Le,{top:ex.R$,zIndex:new x.Ry(3),children:(0,q.jsx)(x.xu,{alignItems:"center",color:n?"transparent":"default",display:"flex",justifyContent:"center",children:(0,q.jsx)(x.xu,{ref:this.pinRef,dangerouslySetInlineStyle:{__style:n&&a?a:eI(!1,this.pinRef,this.pinDestinationRef)},height:84,position:"relative",width:84,children:(0,q.jsx)(x.Ee,{alt:this.props.i18n._('Pin image', 'Pin image on repin page', 'Pin image on repin page'),color:e,fit:"cover",naturalHeight:84,naturalWidth:84,src:i})})})}),(0,q.jsx)(x.xu,{bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{pointerEvents:"none",opacity:+!!n,WebkitTransition:"opacity .4s ease-in-out",transition:"opacity .4s ease-in-out",zIndex:2}},left:!0,position:"fixed",right:!0,top:!0,children:(0,q.jsxs)(x.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",children:[(0,q.jsx)(ek,{delay:1200,startAnimation:n,children:(0,q.jsx)(x.zd,{rounding:200,width:148,children:(0,q.jsx)(x.kC,{alignItems:"stretch",justifyContent:"start",wrap:!0,children:Array.from([,,,,]).map((e,i)=>{let t=i<=1,n=i%2,a=0===i?this.pinDestinationRef:null;return(0,q.jsx)(x.xu,{ref:a,color:0===i?"transparent":"secondary",height:72,marginBottom:+!!t,marginEnd:+!n,width:72},i)})})})}),(0,q.jsx)(x.xu,{dangerouslySetInlineStyle:{__style:{opacity:+!!n,WebkitTransform:n?"translateY(0)":"translateY(20%)",transform:n?"translateY(0)":"translateY(20%)",WebkitTransition:"all .25s ease-in-out .5s",transition:"all .25s ease-in-out .5s",textAlign:"center",marginTop:"50px"}},paddingX:4,children:(0,q.jsx)(x.qd,{children:(0,ei.nk)(this.props.i18n._('You saved your first Pin to {{ selectedBoardName }}!', 'First repin confirmation message', 'First repin confirmation message'),{selectedBoardName:t})})})]})})]})}}let eB=function(e){let i=(0,T.Z)();return(0,q.jsx)(eT,{...e,i18n:i})};var eZ=t(210730),eA=t(914253),eR=t(254889),eF=t(131076),ez=t(64471),eC=t(335335),eE=t(27399),eL=t(236269),eK=t(233597),eO=t(660322),eM=t(893957),eH=t(200619),eD=t(601871),eN=t(2061),e$=t(120100),eW=t(160587),eY=t(779686),eq=t(679602),eG=t(137568),eU=t(72034),eV=t(438274),eJ=t(828890);function eQ({pinId:e,handleSelected:i,surfaceOriginViewParameter:t}){(0,_.useEffect)(()=>{(0,g.Z)("ProfilePickerRow","/app/www/save/duplo/ProfilePickerRow.tsx")},[]);let n=(0,T.Z)(),a=(0,v.Z)();return(0,_.useEffect)(()=>{a({view_parameter:3990,event_type:13,view_type:21,aux_data:{board_picker_surface_origin:t,pin_id:e}})},[]),(0,q.jsx)(x.iP,{onTap:()=>{i(!1,null)},rounding:200,children:(0,q.jsxs)(x.xu,{alignItems:"center",column:12,"data-test-id":"board-picker-row",display:"flex",marginBottom:4,rounding:200,children:[(0,q.jsx)(x.xu,{alignItems:"center",color:"secondary",display:"flex",flex:"none",height:48,justifyContent:"center",rounding:200,width:48,children:(0,q.jsx)(x.JO,{accessibilityLabel:n._('Profile', 'save.ProfilePickerRow.IconAccessibilityLabel', 'Accessibility label for icon on option to save Pin to profile'),color:"default",icon:"clock-history",size:22})}),(0,q.jsx)(x.xu,{direction:"column",display:"flex",justifyContent:"center",marginStart:2,overflow:"hidden",width:"100%",children:(0,q.jsx)(x.xv,{lineClamp:1,size:"400",weight:"bold",children:n._('Profile', 'save.ProfilePickerRow', 'Option to save Pin to profile')})})]})})}var eX=t(422578);function e0(){let e=(0,eX.useRelayEnvironment)();return(0,_.useCallback)(i=>{e&&(0,eX.commitLocalUpdate)(e,e=>{e.get(i)?.invalidateRecord()})},[e])}let e2=e=>e.map(e=>({board_title_id:String(e.id),board_title_kind:JSON.parse(e.recommendation_reason??"{}").reason,board_title:String(e.name),board_title_score:JSON.parse(e.recommendation_reason??"{}").score})),e1=e=>"profile"===e?3990:"topChoices"===e?3988:3989;var e3=t(468491);let e9=(void 0!==o||(o=t(917789)).hash&&"76b22cc5d658befe1dc27454d3aee77f"!==o.hash&&console.error("The definition of 'BoardPickerList_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o),e6=(e,i,t)=>({field_set_key:"detailed",id:e,preserve_component_state:i,...t?{orbac_subject_id:t}:Object.freeze({})});function e8({boards:e,boardsShortlist:i=[],closeModal:t,dismissFlyout:n,navigate:a,isEditingPin:r,isFromToast:o,logContextEvent:l,onSelect:s,originalPinId:d,pinKey:c,pinBoardId:u,saveToProfileEnabled:p,surfaceOriginViewParameter:h,trackingParams:f}){(0,_.useEffect)(()=>{(0,g.Z)("BoardPickerList","/app/www/save/duplo/BoardPickerList.tsx")},[]);let b=(0,T.Z)(),v=(0,y.TH)(),P=(0,j.Z)(e9,c),S=e0(),w=(0,m.I0)(),I=(0,e$.Z)(),Z=(0,Y.n)(),A=(0,eu.m)(),R=(0,K.cO)(),F=v.state&&v.state.isOneTapSave,{checkExperiment:z}=(0,B.Z)(),{showRepinConfirmation:E,showToast:L}=(0,D.Z)(),M=e=>a(e),H=i.map(e=>e.id);p&&H.unshift("PROFILE_PINS");let N=(0,eH.Z)(),$=(0,k.Z)(),G=(0,C.LO)(),U=(0,eD.lJ)($,N),{logStat:V}=(0,eN.Yg)(),J=p&&z("mweb_curation_board_picker_reorder_profile_option").anyEnabled;(0,eM.Z)(()=>{H&&l({event_type:13,clientTrackingParams:f.clientTrackingParams,component:7,element:1001,view_type:3,aux_data:{pin_id:P.entityId,suggested_boards:H}})}),(0,_.useEffect)(()=>{l({view_parameter:3988,event_type:13,view_type:21,aux_data:{board_picker_surface_origin:h,pin_id:P.entityId,board_picker_suggested_boards:JSON.stringify(e2(i))}})},[i]);let Q=e=>w((0,eW.Br)(e)),X=I({fn:async(e,c,p)=>{if(e&&c)s(c,p);else try{if(!r){let e=!c?.id,t=await (({boardId:e,i18n:t,isQuickSave:r,isBoardlessSave:o})=>{n(),V("main_pin_repin");let s=JSON.stringify(e2(i));return w((0,W.w)({checkExperiment:z,i18n:t,isQuickSave:r,logContextEvent:l,pinId:P.entityId,boardId:e,onSuccess:()=>{R("Save",{pin_id:P.entityId,is_promoted:P.isPromoted}),a(-1),(o||r)&&(0,e3.Z)({dispatch:w,viewerUser:G})},originalPinId:d,showRepinConfirmation:E,trackingParams:f,historyPush:M,suggestedBoardIds:H,boardPickerSuggestedBoards:s,savePinId:(e,i)=>(A?.save(e),Z?.save(e,i))}))})({boardId:c?.id,i18n:b,isQuickSave:e,isBoardlessSave:"profile"===p});if(t){let e=t?.id;if(F){let i;i={boardId:c?.id,localPinId:e,pinId:P.entityId,nodeId:P.__id},w((0,eG.a)({...i}))}else P?.entityId&&w((0,eU.Ur)({id:P.entityId,nodeId:P.__id,boardId:c.id,title:c.name??"",url:c.url??"",localPinId:e}))}}if(r){let e=c?.id,i={board_id:e,id:P.entityId,...U?{orbac_subject_id:U}:Object.freeze({})},n=u!==e;eE.Z.create("PinResource",i).callUpdate().then(t=>{let r;if(n&&e&&u){let i,t,n;i={selectedPinIds:[P.entityId],source:{boardId:u,sectionId:void 0},target:{boardId:e,sectionId:void 0}},w((0,eq.S)(i)),Q({boardId:e,sectionId:void 0,increment:1}),Q({boardId:u,sectionId:void 0,increment:-1}),$.isAuth&&$.id&&!u&&(t=$.id,n=P.entityId,w((0,eY.EX)({feedId:t,feedType:eV.Z.BOARDLESS_PINS,itemIds:[n],itemType:"pin"})))}w((0,eK.b)("PinResource",{options:i})),r=P.entityId,w((0,eO.jB)("PinResource",e6(r,!0,U))),S(P.__id),w((0,eO.Sr)("PinResource",e6(t.resource_response.data.id,!1,U),t)),a(-1)}),o&&t()}}catch(e){L(({hideToast:i})=>(0,q.jsx)(O.Z,{duration:5e3,onHide:i,text:(0,eL.Z)(e,"message")||b._('Sorry! Something went wrong on our end.', 'error during repin', 'error during repin')}))}},modalHeader:(0,ed.Bx)(b)}),ee=(0,q.jsx)(eQ,{handleSelected:(e,i)=>X(e,{...i,gridIndex:0},"profile"),pinId:P.entityId,surfaceOriginViewParameter:h});return(0,q.jsxs)(x.kC,{direction:"column",gap:4,children:[(0,q.jsxs)(x.xu,{children:[p&&!J&&ee,i.length>0&&(0,q.jsx)(x.xu,{marginBottom:4,marginTop:2,children:(0,q.jsx)(x.qd,{accessibilityLevel:3,size:"300",children:(0,q.jsx)(x.xv,{inline:!0,children:b._('Top choices', 'boardPicker.header.topChoices', 'Header of a list of user\'s boards')})})}),i.map((e,i)=>(0,q.jsx)(eJ.Z,{boardId:e.id,onBoardSelected:t=>X(t,{...e,gridIndex:i},"topChoices"),showSingleBoardRep:!0},e.id))]}),(0,q.jsxs)(x.xu,{"data-test-id":"all-boards-list",children:[(0,q.jsx)(x.xu,{marginBottom:4,children:(0,q.jsx)(x.qd,{accessibilityLevel:3,size:"300",children:(0,q.jsx)(x.xv,{inline:!0,children:b._('All boards', 'RepinFlow.BoardPickerList.AllBoards', 'Board picker list all boards title')})})}),e.map((e,i)=>(0,q.jsx)(eJ.Z,{boardId:e.id,onBoardSelected:t=>X(t,{...e,gridIndex:i},"allBoards"),showSingleBoardRep:!0},e.id)),J&&ee]})]})}var e5=t(310758);let e4=()=>((0,_.useEffect)(()=>{(0,g.Z)("EmptyBoardRep","/app/www/save/duplo/EmptyBoardRep.tsx")},[]),(0,q.jsx)(x.xu,{color:"secondary",display:"inlineBlock",height:60,minWidth:60,overflow:"hidden",position:"relative",rounding:400,children:(0,q.jsxs)(_.Fragment,{children:[(0,q.jsx)(x.xu,{color:"default",dangerouslySetInlineStyle:{__style:{left:"50%"}},height:"100%",position:"absolute",width:1}),(0,q.jsx)(x.xu,{color:"default",dangerouslySetInlineStyle:{__style:{top:"50%"}},height:1,position:"absolute",right:!0,width:"50%"})]})}));var e7=t(33285),ie=t(427475);let ii=(void 0!==l||(l=t(887802)).hash&&"69ffcdea57a7778d2ebbcd41c276c0d0"!==l.hash&&console.error("The definition of 'BoardTitleSuggestionList_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l);function it({isEditingPin:e,isFirstBoard:i,isFromToast:t,navigate:n,onFirstBoardCreate:a,originalPinId:r,pinBoardId:o,pinKey:l,pinSectionId:s,surfaceOriginViewParameter:d,titleSuggestions:c,clientTrackingParams:u}){(0,_.useEffect)(()=>{(0,g.Z)("BoardTitleSuggestionList","/app/www/save/duplo/BoardTitleSuggestionList.tsx")},[]);let p=(0,v.Z)(),h=(0,ie.Z)(),f=(0,T.Z)(),y=(0,e$.Z)(),{showRepinConfirmation:b}=(0,D.Z)(),P=(0,m.I0)(),S=(0,j.Z)(ii,l),w=S.entityId,k=(0,e7.A)({hasRichMetadata:!!S.richMetadata,hasRichMetadataProducts:!!S.richMetadata?.products,hasRichMetadataArticle:!!S.richMetadata?.article,hasRichMetadataRecipe:!!S.richMetadata?.recipe}),I=(0,Y.n)(),Z=(0,eu.m)(),A=(0,eA.gC)(),R=(0,el.Z)(u,S.trackingParams),F=e=>n(e),{checkExperiment:z}=(0,B.Z)();(0,_.useEffect)(()=>{p({view_parameter:3992,component:13282,event_type:13,view_type:21,aux_data:{board_picker_surface_origin:d,pin_id:w,board_title_suggestions:c}})},[]);let C=async()=>{await void P((0,$.q)({pinId:w,boardId:o||"",boardSectionId:s,clientTrackingParams:R}));let e=S.pinnedToBoard?.url;S.section?n(`${e??""}${S.section.slug??""}/`??"",{replace:!0}):n(e??"",{replace:!0})},E=y({fn:(o,l,s)=>{p({view_parameter:3992,component:13282,element:23,event_type:101,view_type:91,aux_data:{board_picker_surface_origin:d,pin_id:w,board_title_suggestions:c}}),(({allSuggestions:e,handleCreateBoard:i,index:t,isFBC:n,logContextEvent:a,pinViewParameter:r})=>{i(),a({aux_data:{board_title_list:JSON.stringify(e),is_fbc:n.toString(),selected_board_title_index:t},component:7,element:23,event_type:102,view_parameter:r,view_type:3})})({allSuggestions:s,handleCreateBoard:()=>{i?a(l):h({boardCreateOptions:{name:l,initial_pin_client_tracking_params:[u],privacy:"public"}}).then(i=>{let{url:a="",id:o}=i||{};P((0,W.w)({checkExperiment:z,i18n:f,logContextEvent:p,originalPinId:r,pinId:w,boardId:o,trackingParams:{clientTrackingParams:R,pinnedToBoardId:o},historyPush:F,savePinId:(e,i)=>(Z?.save(e),I?.save(e,i))})).then(()=>{e?t?n(-1):C():n(-1);let{href:i,text:r}=(0,eF.Z)(a,l,f),{duration:s,text:d,thumbnail:c}=(0,ey.Z)({boardId:o,getReduxBoard:A,pinId:w,viewType:3});b(({hideToast:e})=>(0,q.jsx)(eb.Z,{duration:s,href:i,onHide:e,text:d||r,thumbnail:c}))})})},index:o,isFBC:i,logContextEvent:p,pinViewParameter:k})},modalHeader:(0,ed.Bb)(f)});return c?c.map((e,i,t)=>(0,q.jsx)(x.xu,{children:(0,q.jsx)(e5.Z,{dataTestId:"board-suggestion-row-button",onTouch:()=>E(i,e,t),pressState:"none",rounding:200,children:(0,q.jsxs)(x.xu,{alignItems:"center",display:"flex",paddingY:2,rounding:200,children:[(0,q.jsx)(e4,{}),(0,q.jsx)(x.xu,{column:10,marginStart:3,children:(0,q.jsx)(x.qd,{size:"400",children:e})})]})},i)},i)):null}let ia=(void 0!==s||(s=t(361817)).hash&&"475036dcb56a51d3552313200b8c9d45"!==s.hash&&console.error("The definition of 'RepinBoardPicker_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s);function ir({allBoards:e,saveToProfileEnabled:i,boardsShortlist:t,closeModal:n,dismissFlyout:a,navigate:r,isEditingPin:o,isFromToast:l,onSelect:s,originalPinId:d,pin:c,pinBoardId:u,pinSectionId:p,trackingParams:h}){let g=(0,v.Z)();return(0,q.jsx)(_.Fragment,{children:(0,q.jsx)(e8,{boards:e,boardsShortlist:t,closeModal:n,dismissFlyout:a,isEditingPin:o,isFromToast:l,logContextEvent:g,navigate:r,onSelect:s,originalPinId:d,pinBoardId:u,pinKey:c,pinSectionId:p,saveToProfileEnabled:i,trackingParams:h})})}function io({allBoards:e,boardsShortlist:i,closeModal:t,saveToProfileEnabled:n,dismissFlyout:a,navigate:r,isEditingPin:o,isFirstRepinExperience:l,isFromToast:s,onFirstBoardCreate:d,originalPinId:c,onSelect:u,pin:p,pinBoardId:h,pinSectionId:g,trackingParams:_,titleSuggestions:m}){let f=(0,T.Z)(),y=l||0===e.length&&!n,b=(0,v.Z)(),P=()=>(0,q.jsx)(it,{clientTrackingParams:_.clientTrackingParams,isEditingPin:o,isFirstBoard:y,isFromToast:s,navigate:r,onFirstBoardCreate:d,originalPinId:c,pinBoardId:h,pinKey:p,pinSectionId:g,titleSuggestions:m});return y?(0,q.jsxs)(x.xu,{paddingX:1,children:[(0,q.jsx)(x.xu,{marginBottom:4,children:(0,q.jsx)(x.xv,{children:f._('Tap to create your first board', 'CTA for board title suggestions', 'Explain to user that tapping on suggestion creates a board')})}),P()]}):(0,q.jsxs)(x.xu,{marginBottom:4,children:[(0,q.jsx)(e8,{boards:e,boardsShortlist:i,closeModal:t,dismissFlyout:a,isEditingPin:o,isFromToast:s,logContextEvent:b,navigate:r,onSelect:u,originalPinId:c,pinBoardId:h,pinKey:p,pinSectionId:g,saveToProfileEnabled:n,trackingParams:_}),m?(0,q.jsxs)(x.xu,{children:[(0,q.jsx)(x.xu,{paddingY:1,children:(0,q.jsx)(eC.Z,{children:(0,q.jsx)(x.iz,{})})}),(0,q.jsx)(x.xu,{paddingY:4,children:(0,q.jsx)(x.xv,{children:f._('Or tap to create a new board', 'boardPicker.suggestedBoardName.title', 'Title for repin page suggested board name section')})}),P()]}):(0,q.jsx)(x.xu,{paddingY:6,children:(0,q.jsx)(x.xH,{accessibilityLabel:f._('Loading repin page content', ' - ', ' -- '),show:!0})})]})}function il({allBoards:e,boardsShortlist:i,closeModal:t,saveToProfileEnabled:n,dismissFlyout:a,navigate:r,isEditingPin:o,isFetchingBoards:l,isFirstRepinExperience:s,isFromToast:d,onFirstBoardCreate:c,onSelect:u,originalPinId:p,pinKey:h,pinBoardId:m,pinDescription:f,pinSectionId:y,surfaceOriginViewParameter:b,saveSessionId:P}){(0,_.useEffect)(()=>{(0,g.Z)("RepinBoardPicker","/app/www/save/duplo/RepinBoardPicker.tsx")},[]);let S=(0,j.Z)(ia,h),w=L(S.entityId),k=(0,T.Z)(),I=(0,v.Z)(),B={clientTrackingParams:(0,ez.Z)({pinKey:S}),pinnedToBoardId:S.pinnedToBoard?S.pinnedToBoard.entityId:""},Z=(e,t)=>{I({event_type:101,component:13282,clientTrackingParams:B.clientTrackingParams,object_id_str:e.id,view_type:91,view_parameter:e1(t),aux_data:{board_id:e.id,board_component:e1(t),board_picker_surface_origin:b,board_picker_suggested_boards:JSON.stringify(e2(i)),board_title_suggestions:w,board_index:e.gridIndex,is_profile_save:"profile"===t,pin_id:S.entityId,save_session_id:P}}),u(e,t)};return 0===e.length&&l?(0,q.jsx)(x.xu,{paddingY:2,children:(0,q.jsx)(x.xH,{accessibilityLabel:k._('Loading repin page content', ' - ', ' -- '),show:!0})}):e.length>=10?(0,q.jsx)(ir,{allBoards:e,boardsShortlist:i,closeModal:t,dismissFlyout:a,isEditingPin:o,isFromToast:d,navigate:r,onSelect:Z,originalPinId:p,pin:S,pinBoardId:m,pinDescription:f,pinSectionId:y,saveToProfileEnabled:n,trackingParams:B}):(0,q.jsx)(io,{allBoards:e,boardsShortlist:i,closeModal:t,dismissFlyout:a,isEditingPin:o,isFirstRepinExperience:s,isFromToast:d,navigate:r,onFirstBoardCreate:c,onSelect:Z,originalPinId:p,pin:S,pinBoardId:m,pinDescription:f,pinSectionId:y,saveToProfileEnabled:n,titleSuggestions:w,trackingParams:B})}var is=t(528630),id=t(680391);let ic=(void 0!==d||(d=t(59986)).hash&&"1612c2df94f42990b3d4f6ccede72a70"!==d.hash&&console.error("The definition of 'RepinCreateBoardButton_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),d);function iu({isEditingPin:e,isFirstBoardCreateActive:i,pinKey:t,pinBoardId:n,pinDescription:a,pinSectionId:r,trackingParams:o,onTouch:l,useIconWithBackground:s}){(0,_.useEffect)(()=>{(0,g.Z)("RepinCreateBoardButton","/app/www/save/duplo/RepinCreateBoardButton.tsx")},[]);let d=(0,T.Z)(),c=(0,j.Z)(ic,t),u=(0,id.Z)({href:{pathname:`/board/create/${c.entityId}/`,state:{isFirstBoardCreateActive:i,pinnedToBoardId:c.pinnedToBoard?c.pinnedToBoard.entityId:"",pinDescription:a,trackingParams:o,isEditingPin:e,pinBoardId:n,pinSectionId:r}}});return(0,q.jsx)(is.Z,{hasTopShadow:s,height:s?void 0:70,children:(0,q.jsx)(x.iP,{onTap:({event:e})=>{l?.(),u({event:e})},children:(0,q.jsxs)(x.xu,{alignItems:"center","data-test-id":"repinCreateBoardButton",display:"flex",paddingX:+!!s,paddingY:+!s,children:[s?(0,q.jsx)(x.xu,{color:"secondary",dangerouslySetInlineStyle:{__style:{padding:"14px"}},rounding:200,children:(0,q.jsx)(x.JO,{accessibilityLabel:d._('Create board button', ' - ', ' -- '),color:"default",icon:"plus",size:20})}):(0,q.jsx)(x.JO,{accessibilityLabel:d._('Create board button', ' - ', ' -- '),color:"error",icon:"circle-plus",size:38}),(0,q.jsx)(x.xu,{marginStart:s?2:3,children:(0,q.jsx)(x.xv,{weight:"bold",children:d._('Create board', 'Create new board to Pin to', 'Create new board to Pin to')})})]})})})}var ip=t(672569),ih=t(453799);let ig=(void 0!==c||(c=t(112402)).hash&&"f0b2fbadfba92480a2077999a000a308"!==c.hash&&console.error("The definition of 'RepinSectionPicker_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),c),i_=(e,i,t)=>({field_set_key:"detailed",id:e,preserve_component_state:i,...t?{orbac_subject_id:t}:Object.freeze({})});function im({boardId:e,navigate:i,location:{search:t},showSectionRep:n,pinKey:a,onSuccess:r,trackingParams:o,dismissFlyout:l,boardViewParameterType:s,surfaceOriginViewParameter:d}){(0,_.useEffect)(()=>{(0,g.Z)("RepinSectionPicker","/app/www/save/duplo/RepinSectionPicker.tsx")},[]);let c=(0,m.I0)(),u=(0,T.Z)(),p=(0,j.Z)(ig,a),h=e0(),f=new URLSearchParams(t),y=f.get("isEditingPin"),b=f.get("pinBoardId")??"",x=f.get("pinSectionId")??"",P=(0,el.Z)(o,p.trackingParams),S=(0,v.Z)(),w=(0,Y.n)(),{checkExperiment:I}=(0,B.Z)(),Z=e=>i(e),A=(0,eH.Z)(),R=(0,k.Z)(),F=(0,eD.lJ)(R,A),z=(0,K.cO)(),{showRepinConfirmation:C}=(0,D.Z)();(0,_.useEffect)(()=>{S({event_type:13,clientTrackingParams:P,component:13282,object_id_str:e,view_type:275,aux_data:{board_id:e,board_picker_surface_origin:d,board_title_suggestions:[],board_index:0,is_profile_save:!1,pin_id:p.entityId,board_component:s}})});let E=e=>c((0,eW.Br)(e)),L=async(t,n)=>{if(n&&S({event_type:101,clientTrackingParams:P,component:13282,element:36,object_id_str:t,view_type:91,view_parameter:3133,aux_data:{board_id:t,board_picker_surface_origin:d,board_title_suggestions:[],board_index:0,is_profile_save:!1,pin_id:p.entityId,section_id:n?.id??"",board_component:s}}),y||await void(l(),c((0,W.w)({checkExperiment:I,i18n:u,logContextEvent:S,pinId:p.entityId,boardId:e,onSuccess:y?void 0:()=>{z("Save",{pin_id:p.entityId,is_promoted:p.isPromoted}),r()},showRepinConfirmation:C,section:n,trackingParams:{clientTrackingParams:P,pinnedToBoardId:p.pinnedToBoard?p.pinnedToBoard.entityId:""},historyPush:Z,savePinId:w?.save??(()=>{})})).then(()=>{n&&c((0,ip.Z)(n.id??""))})),y){let e=n?.id,a={board_id:t,board_section_id:e,id:p.entityId,...F?{orbac_subject_id:F}:Object.freeze({})},r=b!==t,o=x!==e;eE.Z.create("PinResource",a).callUpdate().then(n=>{let l;if(r||o){let i,n,a;i={selectedPinIds:[p.entityId],source:{boardId:b,sectionId:x||null},target:{boardId:t,sectionId:e}},c((0,eq.S)(i)),E({boardId:t,sectionId:e,increment:1}),E({boardId:b,sectionId:x,increment:-1}),R.isAuth&&R.id&&!b&&(n=R.id,a=p.entityId,c((0,eY.EX)({feedId:n,feedType:eV.Z.BOARDLESS_PINS,itemIds:[a],itemType:"pin"})))}c((0,eK.b)("PinResource",{options:a})),l=p.entityId,c((0,eO.jB)("PinResource",i_(l,!0,F))),h(p.__id),c((0,eO.Sr)("PinResource",i_(n.resource_response.data.id,!1,F),n)),i(-2)})}};return(0,q.jsx)(ih.Z,{boardId:e,repin:L,showSectionRep:n})}let iy=(void 0!==u||(u=t(521906)).hash&&"fbb4180ea3919f31ccfbb4bf4b2d25ea"!==u.hash&&console.error("The definition of 'MobileRepinPicker_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),u);function ib({children:e}){let i=(0,m.v9)(({session:e})=>72+((0,et.Rq)(e.userAgentPlatform)?et.Vf:0));return(0,q.jsx)(x.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:i}},children:e})}function ix({allBoards:e,saveToProfileEnabled:i,boardsShortlist:t,isFetchingBoards:n,pinKey:a,pinDescription:r,titleSuggestions:o,trackingParams:l,warningAnchor:s,saveSessionId:d}){(0,_.useEffect)(()=>{(0,g.Z)("MobileRepinPicker","/app/www/save/MobileRepinPicker.tsx")},[]);let c=(0,j.Z)(iy,a),u=(0,T.Z)(),p=(0,y.TH)(),h=(0,y.s0)(),{boardId:f,pinId:b,isEditingPin:S,pinBoardId:w,pinSectionId:k,originalPinId:I,isFromToast:Z}=Q(),A=(0,v.Z)(),R=(0,m.I0)(),F=(0,m.v9)(({experiences:e})=>e),z=F[1000112],C=F[1000153],{showToast:E,showRepinConfirmation:L}=(0,D.Z)(),M=(0,eA.gC)(),H=(0,K.cO)(),N=(0,P.be)(),$=(e,i)=>R(N(e,i)),G=(0,eu.m)(),U=(0,Y.n)(),{checkExperiment:V}=(0,B.Z)(),[J,X]=(0,_.useState)(!1),[ee,et]=(0,_.useState)("allBoards"),[ep,eh]=(0,_.useState)(void 0),[eg,e_]=(0,_.useState)(!1),em=(0,ie.Z)(),ex=()=>!!es(C,501032)||!n&&0===e.length&&!i,ev=()=>es(C,501021),eP=()=>{A({view_type:21,view_parameter:87,component:7,element:f?34:75,event_type:102})},eS=r.trim(),{pinnedToBoard:ew}=c,ek=ew?(0,ei.nk)(u._('Psst! You already saved this Pin to {{ board_name }}', 'Toast for already having repinned pin', 'Toast for already having repinned pin'),{board_name:ew.name}).join(" "):null,{dominantColor:ej}=c,eI=c.images_236x,eT=eI?eI.url:"",ez=u._('Save Pin to', 'RepinPage.Section.Header.Title', 'title for section selection in repin flow'),eC=new x.Ry(2),eE=u._('Create board', 'Title for first board create', 'Title for first board create. NOTE: we are testing using "collections" in place of "boards" for new users'),eL=u._('Save to board', 'boardPicker.header', 'Title for repin page'),eK=f?ez:0!==e.length||n||i?eL:eE;return(0,q.jsxs)(ea.default,{hasFixedHeader:!0,children:[(0,q.jsx)(eo.Z,{text:eK}),(0,q.jsx)(en.default,{useRoundedCorners:!0,zIndex:eC,children:(0,q.jsxs)(x.kC,{alignItems:"center",height:40,justifyContent:"start",children:[(0,q.jsx)(x.xu,{column:2,children:(0,q.jsx)(eR.default,{alignIconLeft:!0,color:"default",icon:f?"chevron-left":"close",onTouch:eP,size:"sm"})}),(0,q.jsx)(x.xu,{column:8,children:(0,q.jsx)(x.xu,{"data-test-id":"repin-page-title",children:(0,q.jsx)(x.qd,{accessibilityLevel:2,align:"center",size:"300",children:(0,q.jsx)(x.xv,{inline:!0,weight:"bold",children:eK})})})}),(0,q.jsx)(x.xu,{column:2})]})}),c.images_236x&&(ex()?(0,q.jsx)(eB,{onComplete:(e,i)=>{let{boardId:t,boardUrl:n}=e,{href:a,text:r}=(0,eF.Z)(n,i,u),{duration:o,text:l,thumbnail:s}=(0,ey.Z)({boardId:t,getReduxBoard:M,isFBC:!0,pinId:b,viewType:21});h(-1),L(({hideToast:e})=>(0,q.jsx)(eb.Z,{duration:o,href:a,onHide:e,text:l||r,thumbnail:s})),z&&z.placement_id&&503459===z.experience_id&&$(z.placement_id,z.experience_id),C&&es(C,501032)&&$(C.placement_id,C.experience_id),H("Save",{pin_id:c.entityId,is_promoted:c.isPromoted})},pinDominantColor:ej??"",pinImageUrl:eT??"",savePin:e=>{let i=(0,el.Z)((p.state||{}).trackingParams),t=(0,el.Z)(l,c.trackingParams);return em({boardCreateOptions:{name:e,initial_pin_client_tracking_params:[i],privacy:"public"},deprecatedSchemaForNormalization:eZ.IY}).then(e=>{let{url:i="",id:n}=e||{};return b&&R((0,W.w)({checkExperiment:V,i18n:u,logContextEvent:A,originalPinId:I,pinId:b,boardId:n,trackingParams:{clientTrackingParams:t,pinnedToBoardId:n},historyPush:e=>h(e),savePinId:(e,i)=>(G?.save(e),U?.save(e,i))})),{boardId:n,boardUrl:i}},e=>{throw{onError:()=>{h(-1),E(({hideToast:i})=>(0,q.jsx)(O.Z,{duration:5e3,onHide:i,text:e.message||u._('Sorry! Something went wrong on our end.', 'error creating board', 'error creating board')}))}}})},selectedBoardName:ep}):null),(0,q.jsx)(ib,{children:f?(0,q.jsx)(im,{boardId:f,boardViewParameterType:e1(ee),dismissFlyout:()=>e_(!0),location:p,navigate:h,onSuccess:()=>{h(-2)},pinKey:c,showSectionRep:!0,surfaceOriginViewParameter:153,trackingParams:l}):(0,q.jsx)(il,{allBoards:e,boardsShortlist:t,closeModal:eP,dismissFlyout:()=>e_(!0),isEditingPin:S,isFetchingBoards:n,isFirstRepinExperience:ex(),isFromToast:Z,navigate:h,onFirstBoardCreate:e=>{ex()||h(`/board/create/${c.entityId}/${e}/`,{state:{trackingParams:l,from:p.state?.from}}),eh(e)},onSelect:(e,i)=>{et(i),S?h(`/pin/${c.entityId}/repin/${e.id}/?isEditingPin=true&pinBoardId=${w}&pinSectionId=${k}`,{state:{trackingParams:l,from:p.state?.from}}):h(`/pin/${c.entityId}/repin/${e.id}/`,{state:{trackingParams:l,from:p.state?.from}})},originalPinId:I,pinBoardId:w,pinDescription:eS,pinKey:c,pinSectionId:k,saveSessionId:d,saveToProfileEnabled:i,surfaceOriginViewParameter:153})}),f?(0,q.jsx)(er.Wx,{onAddNewSection:()=>{f&&(A({view_type:91,view_parameter:3132,component:13282,element:10306,event_type:101,aux_data:{board_picker_surface_origin:153,board_title_suggestions:o||[],pin_id:c.entityId,board_component:3132,board_picker_suggested_boards:JSON.stringify(e2(t))}}),S?h(`/pin/${c.entityId}/repin/${f}/add/?isEditingPin=true&pinBoardId=${w}&pinSectionId=${k}`,{state:{from:p.state?.from}}):h(`/pin/${c.entityId}/repin/${f}/add/`,{state:{from:p.state?.from}}))},useIconWithBackground:!0}):(0,q.jsx)(ec.Z,{modalHeader:(0,ed.Bb)(u),nextLocation:`/board/create/${c.entityId}/`,children:(0,q.jsx)(iu,{isEditingPin:S,isFirstBoardCreateActive:ex(),onTouch:()=>{A({view_type:91,view_parameter:87,component:13282,element:249,event_type:101,aux_data:{board_picker_surface_origin:153,board_title_suggestions:o||[],pin_id:c.entityId,board_component:87,board_picker_suggested_boards:JSON.stringify(e2(t))}})},pinBoardId:w,pinDescription:eS,pinKey:c,pinSectionId:k,trackingParams:l,useIconWithBackground:!0})}),eI&&ev()&&(0,q.jsx)(ef,{completeExperience:()=>{C&&ev()&&$(C.placement_id,C.experience_id)},pinDominantColor:ej??"",pinImageHeight:eI.height??1,pinImageUrl:eT??"",pinImageWidth:eI.width??1}),s&&!eg&&c.pinnedToBoard&&!J&&ek&&(0,q.jsx)(x.J2,{anchor:s,idealDirection:"down",onDismiss:()=>X(!0),shouldFocus:!1,children:(0,q.jsx)(x.xu,{padding:3,children:(0,q.jsx)(x.xv,{weight:"bold",children:(0,q.jsx)("span",{children:ek})})})})]})}var iv=t(794074);function iP(e,i,t){var n;return(i="symbol"==typeof(n=function(e,i){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,i||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(i,"string"))?n:n+"")in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}let iS=(void 0!==p||(p=t(763536)).hash&&"334d0ce72c30565b62e52dd00bf86623"!==p.hash&&console.error("The definition of 'RepinPage_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),p),iw=(void 0!==h||(h=t(976529)).hash&&"76093586a269ca0330e25a57bd33f665"!==h.hash&&console.error("The definition of 'RepinPageQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),h);class ik extends _.PureComponent{constructor(...e){super(...e),iP(this,"state",{pinDescription:(this.props.pin.description||"").trim(),trackingParams:(this.props.location.state||{}).trackingParams||"",warningAnchor:void 0,windowInnerHeight:"undefined"!=typeof window?window.innerHeight:0,saveSessionId:(0,b.Z)()}),iP(this,"onResize",()=>{this.setState({windowInnerHeight:window.innerHeight})})}componentDidMount(){let{logContextEvent:e,repinExperience:i,triggerExperimentsForPlacement:t,viewExperience:n,pin:a}=this.props,{saveSessionId:r}=this.state;e({view_type:21,event_type:13,aux_data:{board_picker_surface_origin:153,pin_id:a.entityId,save_session_id:r}}),t(1000153),i&&n(1000153,i.experience_id),window.addEventListener("resize",this.onResize)}componentWillUnmount(){window.removeEventListener("resize",this.onResize)}render(){let e=(0,iv.Z)(),i=(0,q.jsx)(ix,{allBoards:this.props.allBoards,boardsShortlist:this.props.boardsShortlist,isFetchingBoards:this.props.isFetchingBoards,pinDescription:this.state.pinDescription,pinKey:this.props.pin,saveSessionId:this.state.saveSessionId,saveToProfileEnabled:this.props.saveToProfileEnabled,titleSuggestions:this.props.titleSuggestions,trackingParams:this.state.trackingParams,warningAnchor:this.state.warningAnchor}),t=(0,q.jsx)(ee,{pinKey:this.props.pin,trackingParams:this.state.trackingParams,useRoundedCorners:!0});return(0,q.jsx)(S.ZP,{accessibilityModalLabel:this.props.i18n._('Repin page', 'RepinPage.MobileModal.AccessibilityLabel', 'Accessibility label on repin page'),closeOnOutsideClick:!1,isOpen:!0,onDismiss:()=>{},type:"repinPage",children:(0,q.jsx)(x.xu,{height:this.state.windowInnerHeight-w.i_,paddingX:2,paddingY:0,children:e?(0,q.jsxs)(y.Z5,{children:[(0,q.jsx)(y.AW,{element:t,path:"/:boardId/add"}),(0,q.jsx)(y.AW,{element:i,path:"/:boardId"}),(0,q.jsx)(y.AW,{element:i,path:"/"})]}):(0,q.jsxs)(y.Z5,{children:[(0,q.jsx)(y.AW,{element:t,path:"/pin/:id/repin/:boardId/add/"}),(0,q.jsx)(y.AW,{element:i,path:"/pin/:id/repin/:boardId/"}),(0,q.jsx)(y.AW,{element:i,path:"/pin/:id/repin/"})]})})})}}function ij(){return(0,_.useEffect)(()=>{(0,g.Z)("RepinPage","/app/www/pages/duplo/RepinPage.tsx")},[]),(0,q.jsx)(iI,{})}function iI({shouldFetchPinFromGraphQL:e}){(0,_.useEffect)(()=>{(0,g.Z)("RepinPage","/app/www/pages/duplo/RepinPage.tsx")},[]);let i=(0,y.s0)(),t=(0,y.TH)(),n=(0,J.Z)(),a=n.params.id??"",r=(0,T.Z)(),o=(0,v.Z)(),l=(0,P.be)(),s=(0,P.Ig)(),d=(0,C.LO)(),{isAuth:c}=(0,k.Z)(),u=(0,R.HG)(),p=((e,i)=>{let t={field_set_key:"repin"},n=(0,I.Z)({strategy:i?"GraphQL":"Legacy",query:iw,variables:{pinId:e},useGetLegacyData:({pinId:e})=>{let{data:i}=(0,A.Z)({name:"PinResource",options:{...t,id:e}});return i}}),a=n?.v3GetPinQuery?.__typename==="V3GetPin"?n.v3GetPinQuery?.data:null;return(0,j.Z)(iS,a)})(a,e),{isFetching:h,allBoards:f,boardsShortlist:b}=(e=>{let i=(0,m.v9)(e=>e.session.userId),{isFetching:t,data:n}=(0,A.Z)({name:"BoardPickerBoardsResource",options:{pin_id:e,field_set_key:"profile_grid_item",shortlist_length:2,shortlist_suggestions:3,user_id:i}}),a=n?.all_boards||[];return{isFetching:t,allBoards:(0,m.v9)(e=>(0,z.Z)({...e,boards:a})||[]),boardsShortlist:n?.boards_shortlist||[]}})(a),{checkExperiment:x}=(0,B.Z)(),S=L(a);(0,Z.Z)({name:"UserResource",options:{user_id:d?.id,field_set_key:"quicksave"}});let w=(0,m.I0)(),E=(0,m.v9)(({experiences:e})=>e),{showEnabledSaveBehavior:K}=(0,F.ZP)(d?.id||"");return!c||u?(0,q.jsx)(y.Fg,{replace:!0,to:`/pin/${a}/`}):p?(0,q.jsx)(ik,{allBoards:f,boardsShortlist:b,checkExperiment:x,completeExperience:(e,i)=>w(l(e,i)),i18n:r,isFetchingBoards:h,location:t,logContextEvent:o,match:n,navigate:i,pin:p,pinId:a,repinExperience:E[1000153],saveToProfileEnabled:K,titleSuggestions:S,triggerExperimentsForPlacement:e=>w((0,P.kd)(e)),viewExperience:(e,i)=>w(s(e,i))}):null}},908808:function(e,i,t){function n(e,i){return{type:"SECTION_ADDED",payload:{boardId:e,section:i}}}function a(e,i){return{type:"SECTION_DELETED",payload:{boardId:e,sectionId:i}}}t.d(i,{HG:()=>a,OQ:()=>r,hd:()=>n});let r=(e,i)=>({type:"BOARD_SECTION_EDIT",payload:i})},987072:function(e,i,t){t.d(i,{Z:()=>c});var n=t(782677),a=t(27399),r=t(660322),o=t(908808),l=t(779686),s=t(407775),d=t(438274);let c=(e,i,t,c)=>u=>{let p={board_id:e,initial_pins:i,name:t},h="BoardSectionResource";return a.Z.create(h,p).callCreate().then(t=>{let a=t.resource_response.data,g=(0,n.Fv)(a,s.Z[h]);return c({event_type:7100,object_id_str:a.id}),u((0,r.XM)(h,p,t,g)),u((0,o.hd)(e,a)),u((0,l.vX)({feedId:e,feedType:d.Z.BOARD_SECTIONS,itemIds:[a.id],itemType:"boardsection"})),i.length&&u({type:"PINS_MOVE",payload:{source:{boardId:e},target:{boardId:e,sectionId:a.id},pinIds:i}}),t})}},577348:function(e,i,t){t.d(i,{Z:()=>a});var n=t(27399);let a=e=>i=>{i({type:"PINS_MOVE_ALL",payload:e});let{source:t,target:a,excludePinIds:r}=e,o={board_id:t.boardId,new_board_id:a.boardId,pin_ids:r,old_section_id:t.sectionId,new_section_id:a.sectionId};return n.Z.create("BulkEditSelectAllResource",o).callUpdate()}},672569:function(e,i,t){t.d(i,{Z:()=>r});var n=t(27399),a=t(908808);let r=e=>i=>n.Z.create("BoardSectionResource",{section_id:e}).callGet().then(t=>{let n=t.resource_response.data||{id:"",title:""};return i((0,a.OQ)(e,n)),t})},137568:function(e,i,t){t.d(i,{a:()=>n,k:()=>a});let n=e=>({type:"ONE_TAP_SAVE",payload:e}),a=e=>({type:"ONE_TAP_UNSAVE",payload:e})},214119:function(e,i,t){t.d(i,{Z:()=>n});let n=(0,t(442279).createSelector)(({users:e,boards:i,session:t})=>{let n=e[t.userId]||null;return Object.keys(i).reduce((e,t)=>{let a=i[t];return!a.archived_by_me_at&&(a.owner?.id===n?.id||a.collaborating_users&&a.collaborating_users.map(({id:e})=>e).includes(n?.id))&&a.cover_images?e.concat([a]):e},[])},e=>e.sort((e,i)=>e?.name?.localeCompare(i?.name??"")??0))},254889:function(e,i,t){t.r(i),t.d(i,{default:()=>b});var n=t(686659),a=t(667294),r=t(581722),o=t(312048),l=t(391995),s=t(4533),d=t(104999),c=t(746868),u=t(351736),p=t(24246),h=t(173874),g=t(34550),_=t(935833),m=t(736328),f=t(739405),y=t(785893);function b({alignIconLeft:e,bgColor:i,color:t,disableRedirect:b=!1,fallbackUrl:x,icon:v="chevron-left",onTouch:P,padding:S,placement:w,shouldUseFallbackUrl:k,size:j="lg",viewParameter:I,viewType:T,isVisualSearch:B}){(0,a.useEffect)(()=>{(0,n.Z)("BackButton","/app/www/routing/BackButton.tsx")},[]);let Z=(0,p.Z)(),A=(0,o.s0)(),R=(0,o.TH)(),F=(0,f.HG)(),z=(0,r.v9)(e=>e.session.isAuthenticated),C=(0,d.Z)(),E=(0,m.Z)(),L=(0,u.vs)(),{viewType:K,viewParameter:O}=(0,c.SU)(),[M,H]=T?[T,I]:[K,O],D=()=>{let e=(0,g.M0)().getItem(s.pm);R.key||"/ideas"!==x?(0,_.My)(`pinner_conversion.back_button.${String(e?.[0].pageType)}`):(0,_.My)("pinner_conversion.back_button.no_history"),(0,_.My)(`web_back_button_click.${String(w)}.is_auth_${String(z)}`),E({action:"click",item:"back-button"}),M&&C({view_type:M,view_parameter:H,element:34,event_type:102}),P&&P(),b||((!R.key||R.state&&"redirect"===R.state.referrer||k)&&x?A(x):R.pathname.includes("/password/reset/")&&R.search&&R.search.includes("?nativeShouldDismiss=true")?A("/login/?dismissWebview=true"):A(-1))},N=L?u.t4:"white",$=(0,h.isBoardPage)(R)||B||"inverse"===t;return(0,y.jsx)(l.xu,{"data-test-id":"back-button",children:e?(0,y.jsx)(l.xu,{alignItems:"center",display:"flex",height:48,marginStart:"close"===v?-1:-2,width:48,children:(0,y.jsx)(l.hU,{accessibilityLabel:Z._('Back', 'navigation button', 'navigation button'),bgColor:i,icon:v,iconColor:!t&&(!i||["white","lightGray","transparent"].includes(i))?"subtle":t,onClick:D,padding:"auto"!==S?S:2,size:j})}):(0,y.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:F||$||i?"":N,width:L&&!$?"fit-content":""}},rounding:"circle",children:(0,y.jsx)(l.hU,{accessibilityLabel:Z._('Back', 'navigation button', 'navigation button'),bgColor:i||F?i:"transparent",icon:v,iconColor:!t&&(!i||["white","lightGray","transparent"].includes(i))?"subtle":t,onClick:D,padding:"auto"!==S?S:2,size:j})})})}},828890:function(e,i,t){t.d(i,{Z:()=>p});var n=t(686659),a=t(667294),r=t(581722),o=t(391995),l=t(24246),s=t(216975),d=t(120100),c=t(842715),u=t(785893);function p({boardId:e,onBoardSelected:i,noArrowIcon:t,showSingleBoardRep:p}){(0,a.useEffect)(()=>{(0,n.Z)("BoardPickerRow","/app/www/save/duplo/BoardPickerRow.tsx")},[]);let h=(0,l.Z)(),g=(0,r.v9)(({boards:e})=>e)[e],_=g?.section_count,m=!!_&&_>0,f=(0,d.Z)(),y=g?.name??"this board";return(0,u.jsx)(o.iP,{accessibilityLabel:(0,s.Wc)(`${h._('Select {{ boardName }}', 'board.picker.row.select.board', 'Accessibility label for select board button')}`,{boardName:y}),onTap:f({fn:()=>i(m)}),rounding:200,tapStyle:"compress",children:(0,u.jsx)(c.Z,{boardId:e,noArrowIcon:t,showSingleBoardRep:p})})}},842715:function(e,i,t){t.d(i,{Z:()=>h});var n=t(686659),a=t(667294),r=t(581722),o=t(391995),l=t(319226),s=t(24246),d=t(216975),c=t(380938),u=t(662911),p=t(785893);function h({boardId:e,navigateToBoard:i,noArrowIcon:t,showCollaborators:h,showSingleBoardRep:g,shouldShowPinAndSectionCount:_}){(0,a.useEffect)(()=>{(0,n.Z)("BoardRow","/app/www/save/duplo/BoardRow.tsx")},[]);let m=(0,s.Z)(),f=(0,r.v9)(({boards:e})=>e)[e];if(!f)return null;let y=(f.collaborating_users||[]).map(e=>({name:e.username??"",src:"https://s.pinimg.com/images/user/default_75.png"===e.image_medium_url?"":e.image_medium_url??""})),b=new o.Ry(0),x=f.pin_count,v=f.section_count,P=(0,p.jsx)(a.Fragment,{children:(0,p.jsx)(o.xu,{"data-test-id":v?"boardWithSection":"boardWithoutSection",children:(0,p.jsxs)(o.xu,{alignItems:"center",column:12,"data-test-id":"board-picker-row",display:"flex",marginBottom:4*!!g,rounding:200,children:[(0,p.jsx)(o.xu,{paddingY:2*!g,children:g?(0,p.jsx)(o.xu,{height:48,overflow:"hidden",width:48,children:(0,p.jsx)(o.zd,{height:"100%",rounding:200,width:"100%",children:(0,p.jsx)(o.Ee,{alt:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:f.image_cover_url||" "})})}):(0,p.jsx)(o.xu,{height:60,overflow:"hidden",rounding:400,width:60,children:(0,p.jsx)(u.default,{boardKey:{type:"Legacy",data:f},fullSize:!0,hideSecretBoardIcon:!0,type:"thumbnail",viewType:void 0})})}),(0,p.jsxs)(o.kC,{alignItems:"center",flex:"grow",justifyContent:"between",children:[(0,p.jsxs)(o.xu,{direction:"column",display:"flex",justifyContent:"center",marginStart:g?2:4,overflow:g?"hidden":"auto",width:"100%",children:[(0,p.jsx)(o.xv,{lineClamp:g?1:void 0,size:"400",weight:"bold",children:f.name}),_&&(0,p.jsxs)(o.kC,{children:[(0,p.jsx)(o.xv,{inline:!0,children:!!x&&(0,d.nk)(m.ngettext('{{ PinCount }} Pin', '{{ PinCount }} Pins', x ?? 0, 'BoardRow.pinCount', 'Number of Pins on board or section, pinCount: number of Pins'),{PinCount:x})}),!!x&&!!v&&(0,p.jsx)(c.Z,{}),(0,p.jsx)(o.xv,{inline:!0,children:!!v&&(0,d.nk)(m.ngettext('{{ sectionCount }} section', '{{ sectionCount }} sections', v ?? 0, 'BoardRow.sectionCount', 'Number of sections on board, sectionCount: number of sections'),{sectionCount:v})})]})]}),(0,p.jsxs)(o.kC,{alignItems:g?"center":"start",justifyContent:"start",children:["secret"===f.privacy&&(0,p.jsx)(o.xu,{marginStart:g?3:1,children:(0,p.jsx)(o.JO,{accessibilityLabel:m._('secret board icon', ' - ', ' -- '),color:g?"default":"subtle",icon:"lock"})}),f.is_collaborative&&(g||h)&&y.length>0?(0,p.jsx)(o.xu,{zIndex:b,children:(0,p.jsx)(l.HE,{collaborators:y,size:1===y.length?"sm":"xs"})}):f.is_collaborative&&(0,p.jsx)(o.xu,{marginStart:1,children:(0,p.jsx)(o.JO,{accessibilityLabel:m._('group board icon', ' - ', ' -- '),icon:"people"})}),!t&&!!f.section_count&&(0,p.jsx)(o.xu,{"data-test-id":"boardSectionPicker",marginStart:3*!!g,children:(0,p.jsx)(o.JO,{accessibilityLabel:m._('board section board picker icon', ' - ', ' -- '),color:g?"default":"subtle",icon:"chevron-right"})})]})]})]})})});return i&&f.url?(0,p.jsx)(o.Tg,{href:f.url,rounding:200,tapStyle:"compress",children:P}):P}},453799:function(e,i,t){t.d(i,{Z:()=>m});var n=t(686659),a=t(667294),r=t(581722),o=t(312048),l=t(391995),s=t(24246),d=t(565649),c=t(914253),u=t(828890),p=t(216975),h=t(310758),g=t(785893);function _({onSectionSelected:e,sectionId:i,showSectionRep:t}){(0,a.useEffect)(()=>{(0,n.Z)("SectionPickerRow","/app/www/save/duplo/SectionPickerRow.tsx")},[]);let o=(0,r.v9)(({boardsections:e})=>e[i]),d=(0,s.Z)(),c=o&&o.preview_pins?.[0]&&o.preview_pins[0].image_medium_url,u=o?.title??"";return(0,g.jsx)(h.Z,{onTouch:e,pressState:"none",rounding:200,children:(0,g.jsxs)(l.xu,{alignItems:"center",column:12,"data-test-id":"sectionPickerRow",display:"flex",marginBottom:4*!!t,rounding:200,children:[t&&(0,g.jsx)(l.xu,{height:48,width:51,children:(0,g.jsx)(l.zd,{height:"100%",rounding:200,width:"100%",children:c&&(0,g.jsx)(l.Ee,{alt:(0,p.Wc)(d._('{{ boardSectionName }} thumbnail', 'SectionPickerRow.boardImage.accessibilityLabel.text', 'Additional text explaining board image thumbnail. boardSectionName:Title of the board section for a11y text'),{boardSectionName:u}),color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:c})})}),!t&&(0,g.jsx)(l.xu,{column:1,paddingY:2}),(0,g.jsx)(l.xu,{column:11,display:"flex",flex:"grow",justifyContent:"between",paddingY:2,children:t?(0,g.jsx)(l.xu,{marginStart:2,overflow:"hidden",width:"100%",children:(0,g.jsx)(l.xv,{lineClamp:1,size:"400",weight:"bold",children:o?.title})}):(0,g.jsx)(l.xu,{marginStart:2,children:(0,g.jsx)(l.xv,{weight:"bold",children:o?.title})})})]})})}function m({boardId:e,originalBoardId:i,sectionId:t,repin:p,hideBoardPickerRow:h,showSectionRep:m}){(0,a.useEffect)(()=>{(0,n.Z)("SectionPickerList","/app/www/save/duplo/SectionPickerList.tsx")},[]);let f=(0,s.Z)(),{isFetching:y,boardSections:b,filteredBoardSections:x}=((e,i)=>{let{isFetching:t}=(0,d.Z)({name:"BoardSectionsRepinResource",options:{board_id:e}}),n=(0,r.v9)(({feeds:i})=>(i[`board-sections:${e}`]||[]).reduce((e,i)=>{if("boardsection"===i.type){let t={type:"boardsection",id:i.id};e.push(t)}return e},[])),a=(0,r.v9)(t=>n.map(e=>e.id).reduce((n,a)=>{let r=t.boardsections[a??""];return a!==i&&r&&n.push({board:{id:e},id:r.id,title:r.title,type:"boardsection",slug:r.slug}),n},[]));return{isFetching:t,boardSections:n,filteredBoardSections:a}})(e,t),v=(0,o.s0)(),P=(0,c.gC)()(i||"");return(0,g.jsxs)(l.xu,{children:[b.length>0&&(0,g.jsxs)(l.xu,{paddingY:3*!m,children:[m&&(0,g.jsx)(l.xu,{paddingY:2,children:(0,g.jsx)(l.xu,{marginBottom:2,children:(0,g.jsx)(l.qd,{accessibilityLevel:3,size:"300",children:(0,g.jsx)(l.xv,{inline:!0,children:f._('Board', 'RepinFlow.SectionPickerList.Board', 'Section picker board title')})})})}),!h&&(0,g.jsx)(u.Z,{boardId:e,noArrowIcon:!0,onBoardSelected:()=>p(e,void 0,f),showSingleBoardRep:m},e),m&&(0,g.jsx)(l.xu,{paddingY:4,children:(0,g.jsx)(l.qd,{accessibilityLevel:3,size:"300",children:(0,g.jsx)(l.xv,{inline:!0,children:f._('Section', 'RepinFlow.SectionPickerList.Section', 'Section picker all sections title')})})}),x.map(t=>(0,g.jsx)(_,{onSectionSelected:()=>{p(e,t,f),i&&v(P?.url??"")},sectionId:t.id??"",showSectionRep:m},t.id))]}),(0,g.jsx)(l.xH,{accessibilityLabel:f._('Loading board section for repin flow', ' - ', ' -- '),show:y})]})}},468491:function(e,i,t){t.d(i,{Z:()=>a});var n=t(660322);function a({dispatch:e,viewerUser:i}){let{id:t}=i||{};t&&e((0,n.jB)("BoardlessPinsResource",{field_set_key:"mobile",userId:t}))}},91734:function(e,i,t){t.d(i,{Z:()=>b});var n,a=t(686659),r=t(667294),o=t(312048),l=t(774838),s=t(739405);t(167912);var d=t(382780),c=t(947504),u=t(183e3),p=t(68876),h=t(785893);let g=(void 0!==n||(n=t(991809)).hash&&"60ba8f292ef82335c3d4cbce50f362d8"!==n.hash&&console.error("The definition of 'CloseupRepinPage_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function _({pinKey:e}){(0,r.useEffect)(()=>{(0,a.Z)("CloseupRepinPage","/app/www/pages/authDesktop/CloseupRepinPage.tsx")},[]);let i=(0,u.Z)(g,e);return i?(0,h.jsx)(p.Z,{type:"authDesktop",children:i.isEligibleForPdp?(0,h.jsx)(c.Z,{showRepin:!0}):(0,h.jsx)(d.ZP,{showRepin:!0})}):null}var m=t(652436),f=t(228612),y=t(305375);let b=function(){(0,r.useEffect)(()=>{(0,a.Z)("InternalRepinPage","/app/www/pages/InternalRepinPage.tsx")},[]);let{id:e}=(0,y.Z)(),i=(0,s.ZP)(),{isAuthenticated:t}=(0,l.B)(),n=(0,f.S6)(),d=e?n(e):null;return t?"desktop"===i?(0,h.jsx)(_,{pinKey:null!=d?{type:"Legacy",data:d}:null}):(0,h.jsx)(m.ZP,{shouldFetchPinFromGraphQL:!0}):(0,h.jsx)(o.Fg,{replace:!0,to:`/pin/${e??""}/`})}},162309:function(e,i,t){(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||[]).push(["www/pin/[id]/repin",function(){return t(91734).Z}])}},function(e){e.O(0,["10123","17958","1891","19629","22145","23125","25418","3199","36010","39366","39453","39477","42293","42480","42844","44045","46302","46683","48297","51428","53894","82301","82876","87353","90005","96986","98396"],function(){return e(e.s=162309)}),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/pin/[id]/repin-783ce61fc1c44335.mjs.map