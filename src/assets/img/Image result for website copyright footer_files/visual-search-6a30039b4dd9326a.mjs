(self.modernJsonp=self.modernJsonp||[]).push([["91533"],{151219:function(e,t,a){var i,l,n;a.r(t),a.d(t,{default:()=>s});let o={fragment:{argumentDefinitions:i=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],kind:"Fragment",metadata:null,name:"MobileFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:l=[{kind:"Variable",name:"pin",variableName:"pinId"}],concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MobileFlashlightPageFetchData_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"MobileFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:l,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[n,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:"images_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"736x")'},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"dcbf1529b14d47d6fd0659c0860a03a65f7a3c425922eb411256255dbf4fa525",metadata:{},name:"MobileFlashlightPageFetchDataPinQuery",operationKind:"query",text:null}};o.hash="a0953a7ea15ce447a2452bbeca8586ba";let s=o},302609:function(e,t,a){a.r(t),a.d(t,{default:()=>l});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MobileFlashlightPageFetchData_pin",selections:[{args:null,kind:"FragmentSpread",name:"MobileFlashlightPage_pin"}],type:"Pin",abstractKey:null};i.hash="df8cf9d2521b1a82156cc4ecd7b04884";let l=i},875516:function(e,t,a){a.r(t),a.d(t,{default:()=>l});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MobileFlashlightPage_pin",selections:[{alias:"images_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"736x")'},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};i.hash="863a38d55a102845ddf9a34a56b3efed";let l=i},40571:function(e,t,a){a.d(t,{Z:()=>l});var i=a(785893);let l=(0,i.jsx)("svg",{fill:"none",height:"5",viewBox:"0 0 37 5",width:"37",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("rect",{fill:"#E9E9E9",height:"5",rx:"2.5",width:"37"})})},835531:function(e,t,a){a.d(t,{Z:()=>s});var i=a(686659),l=a(667294),n=a(232079),o=a(785893);function s({alt:e,children:t,color:a,elementTiming:s,fetchPriority:r,isActive:c=!1,naturalHeight:d,naturalWidth:u,onLoad:h,src:p,fit:g="none",srcSet:m,...f}){(0,l.useEffect)(()=>{(0,i.Z)("ImageWithPerfTiming","/app/packages/pwt-logger/ImageWithPerfTiming.tsx")},[]);let _=(0,l.useRef)(null),y=(0,l.useRef)(null);return(0,l.useEffect)(()=>{if(p!==_.current||c&&c!==y.current){_.current=p??null;let e=document.querySelector(`img[src="${p}"]`)||null;e?.complete&&h()}y.current=c},[p,h,c]),(0,o.jsx)(n.Z,{...f,alt:e,color:a,elementTiming:s,fetchPriority:r,fit:g,naturalHeight:d,naturalWidth:u,onLoad:h,src:p,srcSet:m,children:t})}},70625:function(e,t,a){a.d(t,{Z:()=>i});let i=(0,a(667294).createContext)("undefined"!=typeof window?window:null)},415927:function(e,t,a){a.d(t,{Z:()=>l});var i=a(667294);let l=()=>{let e=(0,i.useRef)(!1);return(0,i.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}},471310:function(e,t,a){a.d(t,{Z:()=>c});var i=a(686659),l=a(667294),n=a(391995),o=a(230201),s=a(24246),r=a(785893);function c({auxData:e,enabled:t,onPull:a,refreshing:c,viewParameter:d}){(0,l.useEffect)(()=>{(0,i.Z)("PullToRefresh","/app/www/Homefeed/PullMenu/PullToRefresh.tsx")},[]);let u=(0,s.Z)(),{logContextEvent:h}=(0,o.u)(),p=4079===d,{position:g,startYRefCurrent:m,pullDistance:f}=function({enabled:e,onSelect:t,refreshing:a}){let i=(0,l.useRef)(null),[n,o]=(0,l.useState)(0),[s,r]=(0,l.useState)(!1),c=a?0:n/250,d=c>0,u=()=>{r(!1),o(0)};return(0,l.useEffect)(()=>{if(e){let e=e=>{window.scrollY<=0&&!a&&(i.current=e.touches[0].clientY)},l=e=>{if(i.current){let t=(e.touches[0].clientY-i.current)*.5;t>0&&(o(t),e.preventDefault())}},s=()=>{i.current&&(r(!0),t({pullDistance:n,position:c,resetState:u}),i.current=null)};return window.addEventListener("touchstart",e),window.addEventListener("touchmove",l,{passive:!1}),window.addEventListener("touchend",s),()=>{window.removeEventListener("touchstart",e),window.removeEventListener("touchmove",l),window.removeEventListener("touchend",s)}}},[e,t,n,a,c]),{pullDistance:n,hasStartPulling:d,position:c,startYRefCurrent:i.current,PULL_MENU_DISTANCE:250,isExecuted:s}}({enabled:t,onSelect:t=>{let{pullDistance:i,resetState:l}=t;i>=120&&(h({view_type:1,event_type:158,view_parameter:p?4079:92,aux_data:p?e:{}}),a()),l()},refreshing:c}),_=Math.min(g,1),y=u._('Pull to refresh', 'Pull down on grid to refresh items', 'Pull down on grid to refresh items');return(0,r.jsx)(n.xu,{children:t&&(0,r.jsx)(n.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{opacity:_,transition:null===m?"all .3s ease-out":void 0}},display:"flex",height:120*g,justifyContent:"center",children:(0,r.jsx)(n.JO,{accessibilityLabel:y,icon:m&&f<120?"circle-arrow-down":"circle-arrow-up",size:40})})})}},989045:function(e,t,a){a.d(t,{Z:()=>r});var i=a(686659),l=a(667294),n=a(391995),o=a(739405),s=a(785893);let r=()=>{(0,l.useEffect)(()=>{(0,i.Z)("InitialFeedFetch","/app/www/InitialFeedFetch.tsx")},[]);let e=(0,o.HG)();return(0,s.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:e?{paddingTop:"0px",paddingBottom:"0px",marginTop:"0px",marginBottom:"0px"}:{paddingTop:"4px",paddingBottom:"4px",marginTop:"-4px",marginBottom:"-4px"}},"data-test-id":"initial-feed-fetch"})}},589247:function(e,t,a){a.d(t,{Z:()=>c});var i=a(686659),l=a(667294),n=a(935059),o=a(739405),s=a(153040),r=a(785893);let c=({children:e})=>{(0,l.useEffect)(()=>{(0,i.Z)("UnauthContextMenuControllerWrapper","/app/www/UnauthContextMenuControllerWrapper.tsx")},[]);let t=(0,o.HG)();return!(0,n.Z)().isAuth&&t?(0,r.jsx)(s.x,{children:e}):e}},962906:function(e,t,a){a.d(t,{DL:()=>u,ZP:()=>g,bh:()=>h,rv:()=>p});var i=a(686659),l=a(667294),n=a(391995),o=a(351736),s=a(935059),r=a(501010),c=a(254889),d=a(785893);let u=20,h=3,p=2;function g({handleBackClick:e,viewParameter:t,viewType:a}){(0,l.useEffect)(()=>{(0,i.Z)("MobileVisualSearchBackButton","/app/www/VisualSearch/mobile/MobileVisualSearchBackButton.tsx")},[]);let{checkExperiment:u}=(0,r.Z)(),g=(0,o.vs)(),{isAuth:m}=(0,s.Z)(),f=m&&u("mweb_onebar_hybrid_search",{dangerouslySkipActivation:!0}).anyEnabled;return(0,d.jsx)(n.xu,{"data-test-id":"cancelButton",left:!0,margin:p,position:"fixed",right:!0,top:!0,width:"fit-content",children:(0,d.jsx)(c.default,{bgColor:f?"default":"transparent",color:g||f?"default":"inverse",disableRedirect:!0,icon:"close",isVisualSearch:!0,onTouch:e,padding:h,size:"lg",viewParameter:t,viewType:a})})}},304961:function(e,t,a){a.d(t,{AK:()=>d,R$:()=>n,S2:()=>c,Z3:()=>u,_z:()=>r,pV:()=>l,xZ:()=>o,zg:()=>s});var i=a(962906);let l=.6,n=.4,o=50,s=.1,r=i.DL+4*i.bh*2+4*i.rv*2,c=4,d=4.25,u=2.5},979172:function(e,t,a){a.d(t,{Z:()=>d});var i=a(686659),l=a(667294),n=a(391995),o=a(774838),s=a(530786),r=a(40763),c=a(785893);function d({children:e,isImagePinForUnauthOnTablet:t}){(0,l.useEffect)(()=>{(0,i.Z)("ClickthroughOverlay","/app/www/closeup/duplo/ClickthroughOverlay.tsx")},[]);let{isAuthenticated:a}=(0,o.B)(),d=(0,r.Z)({skipExpActivation:!0});return(0,c.jsxs)(n.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{cursor:"pointer",width:t?"40vw":void 0}},display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!t||void 0,top:!0,zIndex:a?void 0:s.eu,children:[(0,c.jsx)(n.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"#000",borderRadius:d?void 0:"6px 6px 0 0",WebkitTransition:"opacity .04s linear",transition:"opacity .04s linear"}},left:!0,opacity:40,position:"absolute",right:!0,top:!0}),e]})}},284009:function(e,t,a){a.d(t,{Z:()=>P});var i=a(686659),l=a(667294),n=a(391995),o=a(759271),s=a(24246),r=a(433069),c=a(835531),d=a(23641),u=a(774838),h=a(730448),p=a(739405),g=a(893957),m=a(979172),f=a(328154),_=a(40763),y=a(407678),x=a(411657),b=a(767415),w=a(354139),v=a(177433),S=a(484807),j=a(785893);let P=e=>{(0,l.useEffect)(()=>{(0,i.Z)("CloseupImage","/app/www/closeup/duplo/CloseupImage.tsx")},[]);let t=(0,s.Z)(),{alt:a,clickthroughOverlayOptions:P,color:k,isFlashlightPage:T,naturalHeight:C,naturalWidth:Z,placeholder:F,pwtElementTimingId:E,setShowClickthroughOverlay:A,showSpinner:I,src:M,stickyFooter:D,isEligibleForPdp:L}=e,z=(0,r.b)(),R=(0,v.Zv)(),H=(0,u.Ts)(),O=!z,{isAuthenticated:K}=(0,u.B)(),N=(0,p.ZP)(),V=(0,l.useRef)(null),B=(0,_.Z)({skipExpActivation:!0}),W=(0,l.useRef)(!1),{mWebCloseupRedesignEnabled:$}=(0,o.Z)(),[U,G]=(0,l.useState)(!O||!!M&&!!F&&F===M),q=(0,l.useRef)(""),Y=()=>{(0,d.Nx)("PinPageMainImageRendered"),z&&(0,b.LY)("earlyHydrationDebug.pwtConstraint.pinPageMainImageRendered",performance.now(),{tags:(0,w.M3)({handlerId:R,requestContext:H})}),W.current||((0,b.nP)("mweb.closeup.closeup_image.load"),W.current=!0)};(0,l.useEffect)(()=>{let e=new Image;e.onload=()=>G(!0),e.src=M},[]);let J=(0,l.useRef)((0,x.u)()?.setHasScrolledPastMainContent);(0,l.useEffect)(()=>{let e=(0,h.Z)(()=>{if(V.current){let t=window.scrollY>V.current.offsetTop+V.current.offsetHeight;J.current?.(t),t&&window.removeEventListener("scroll",e)}},10);window.addEventListener("scroll",e)},[]),(0,g.Z)(()=>{M||(0,b.nP)("mweb.closeup.closeup_image.no_image_url"),(0===C||0===Z)&&(0,b.nP)("mweb.closeup.closeup_image.invalid_dimensions")});let Q=!T&&"tablet"===N,X=O?(0,j.jsx)(c.Z,{alt:a,color:k,elementTiming:E,naturalHeight:C,naturalWidth:Z,onLoad:Y,src:F}):null,ee=y.Hg;return(T||"phone"===N||B)&&(ee="100%"),(0,j.jsx)(S.Z,{metricName:"CloseupImage",children:(0,j.jsxs)(n.xu,{ref:V,"data-test-id":"pin-closeup-image",maxHeight:"100%",maxWidth:"tablet"===N?y.g6:void 0,minHeight:"auto",overflow:D?void 0:"hidden",position:"relative",rounding:600*(!T&&"phone"!==N),width:ee,children:[!K&&P&&(0,j.jsx)(m.Z,{isImagePinForUnauthOnTablet:!1,children:(0,j.jsx)(f.Z,{inviterFirstName:q.current,isEligibleForPdp:L,setShowClickthroughOverlay:A})}),X&&(Q?(0,j.jsx)(n.xu,{overflow:"hidden",rounding:600,children:X}):X),(0,j.jsx)(n.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:+!!U,transition:U&&"desktop"!==N?"opacity .5s ease-in-out":void 0,backgroundColor:k}},left:!0,overflow:Q?"hidden":void 0,position:O?"absolute":"relative",right:!0,rounding:Q?600:500,top:!0,children:O?(0,j.jsx)(n.Ee,{alt:a,fetchPriority:$?"high":void 0,naturalHeight:C,naturalWidth:Z,role:$?"img":void 0,src:M}):(0,j.jsx)(c.Z,{alt:a,color:k,elementTiming:E,fetchPriority:"high",naturalHeight:C,naturalWidth:Z,onLoad:Y,src:M})}),I&&(0,j.jsx)(n.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:+!U,transition:U?"opacity .5s ease-in-out":void 0}},display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:!U&&(0,j.jsx)(n.kC,{alignItems:"center",justifyContent:"start",children:(0,j.jsx)(n.xH,{accessibilityLabel:t._('Loading image', 'Loading higher resolution image', 'Loading higher resolution image'),show:!0})})}),D]})})}},328154:function(e,t,a){a.d(t,{Z:()=>m});var i=a(686659),l=a(667294),n=a(391995),o=a(24246),s=a(501010),r=a(923298),c=a(935833),d=a(736328),u=a(473687),h=a(413211),p=a(739405),g=a(785893);function m({setShowClickthroughOverlay:e,isEligibleForPdp:t,isEligibleForDesktopSocialInviteOverlay:a,inviterFirstName:m}){(0,l.useEffect)(()=>{(0,i.Z)("UnauthClickthroughOverlayContent","/app/www/closeup/duplo/unauth/UnauthClickthroughOverlayContent.tsx")},[]);let f=(0,o.Z)(),_=(0,d.Z)(),y=(0,r.Z)(),x=(0,l.useRef)(null),b="desktop"===(0,p.ZP)(),w=m&&a,v=w&&(f._('Sign up to join {{ name }} on Pinterest', 'pin.closeup.wash.desktop.shareNotification', 'Clickthrough overlay for desktop users that a sender ({{ name }}) shared a Pin to them, name: username')).replace("{{ name }}",m),S=f._('Click to make the most out of this idea with a free account', 'web.unauth.plp.clickable_wash.header', 'Copy shown on hover to sign up for an account'),j=f._('Tap to make the most out of this idea with a free account', 'mweb.unauth.plp.clickable_wash.header', 'Pin clickable wash header text'),P=(0,u.Z)(),{checkExperiment:k}=(0,s.Z)();return(0,g.jsx)(n.iP,{onMouseEnter:()=>{w&&(0,c.My)("dweb.main_pin.social.wash.view"),(0,c.My)("dweb.pin.wash.view")},onMouseLeave:()=>{w?_({action:"dismiss",item:"main-pin-social-wash"}):_({action:"dismiss",item:"main-pin-wash"})},onTap:({event:e})=>{b&&(e.preventDefault(),_({action:"click",item:"pin-image"}),a&&m&&_({action:"click",item:"main-pin-social-wash"}),_({action:"click",item:"main-pin-image-signup-modal"}),k("migration_upsell_manager_redux").anyEnabled||k("migration_upsell_manager_redux_dweb").anyEnabled||k("migration_upsell_manager_redux_mweb").anyEnabled||k("migration_upsell_manager_redux_dweb_global").anyEnabled||k("migration_upsell_manager_redux_mweb_global").anyEnabled?P((0,h.QA)()):y({reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"click_closeup",desktopOptions:{modalType:"signup",modalOptions:{source:"defaultSource",container:"pinWash"}}}),t&&_({action:"click",item:"pdp-pin-image"}))},children:(0,g.jsxs)(n.xu,{zIndex:new n.Ry(2),children:[(0,g.jsx)(n.xu,{ref:x,alignItems:"center",bottom:!0,"data-test-id":"main-pin-hover-overlay",direction:"column",display:"flex",height:"100%",justifyContent:a?"center":void 0,left:!0,position:"absolute",right:!0,top:!0,width:"100%",children:(0,g.jsx)(n.xu,{alignItems:"center",direction:"column",display:"flex",maxWidth:240,paddingY:10,children:(0,g.jsx)(n.xu,{marginTop:8,children:(0,g.jsx)(n.qd,{align:"center",color:"light",size:w?"600":"400",children:b?v||S:j})})})}),!b&&(0,g.jsx)(n.xu,{marginEnd:4,marginTop:4,position:"absolute",right:!0,top:!0,children:(0,g.jsx)(n.hU,{accessibilityLabel:f._('Close pin clickable wash', 'mweb.unauth.plp.clickable_wash.close_button', 'Close button'),icon:"close",iconColor:"inverse",onClick:({event:t})=>{t.stopPropagation(),e&&(e(!1),_({action:"dismiss",item:"main-pin-hover-overlay"}))},size:"md"})})]})})}},596663:function(e,t,a){a.d(t,{G9:()=>o,SY:()=>r,kk:()=>n,mb:()=>c,s:()=>s});var i=a(806513),l=a(684570);let n=({isDesktop:e})=>{let t=(0,l.Z)({isDesktop:e});return t?-t:0},o=-2,s=({trafficSource:e,deviceType:t,experimentalGutter:a})=>{let l=a??4*i.jC;return"desktop"===t?l:"board"===e?4:void 0},r=({deviceType:e,customMWebColumnWidth:t,experimentalColumnWidth:a})=>{let l=a??i.yF;return"desktop"===e?l:t||200},c=({gutterWidth:e,itemWidth:t,className:a,minColumns:l=i.yc,maxColumns:n=i.g5})=>{let o=t+e;return Array.from({length:n+1-l},(e,t)=>t+l).map(t=>({minWidth:t===l?0:t*o,maxWidth:t===n?null:(t+1)*o-1,styles:`
      .${a} {
        max-width: ${t*o-e}px;
      }
      `})).map(({minWidth:e,maxWidth:t,styles:a})=>`
    @media (min-width: ${e}px) ${t?`and (max-width: ${t}px)`:""} {
      ${a}
    }
  `).join("")}},407678:function(e,t,a){a.d(t,{$K:()=>o,Hg:()=>l,g6:()=>n,w6:()=>i});let i=(e,t)=>Array.from({length:t-e},(t,a)=>a+e),l=508,n=600;function o(e){return null!=e}},759302:function(e,t,a){a.d(t,{Z:()=>m});var i=a(686659),l=a(667294),n=a(391995),o=a(806513),s=a(59111),r=a(739405),c=a(838751),d=a(785893);let u="PinGridSkeletonLoader__tall",h="PinGridSkeletonLoader__short",p=({size:e})=>(0,d.jsx)(n.xu,{padding:1,children:(0,d.jsx)("div",{className:"tall"===e?u:h})}),g=({children:e})=>(0,d.jsx)(n.kC,{direction:"column",gap:{row:0,column:2},children:e}),m=({partialViewportWidth:e})=>{(0,l.useEffect)(()=>{(0,i.Z)("PinGridSkeletonLoader","/app/www/loader/PinGridSkeletonLoader.tsx")},[]);let t="desktop"===(0,r.ZP)(),a=t?o.yF:o.tG;return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(s.Z,{unsafeCSS:[{name:u,height:250},{name:h,height:150}].map(({name:e,height:t})=>(0,c.Z)({name:e,width:a,height:t})).join("")}),(0,d.jsx)(n.xu,{"data-test-id":"pin-grid-skeleton-loader",marginEnd:o.qG,marginStart:o.qG,children:t?(0,d.jsxs)(n.kC,{direction:"row",gap:{row:o.jC,column:0},children:[(0,d.jsx)(g,{children:(0,d.jsx)(p,{size:"tall"})}),(0,d.jsx)(g,{children:(0,d.jsx)(p,{size:"short"})}),(0,d.jsx)(g,{children:(0,d.jsx)(p,{size:"tall"})}),!e&&(0,d.jsx)(g,{children:(0,d.jsx)(p,{size:"short"})})]}):(0,d.jsxs)(n.kC,{direction:"row",justifyContent:"center",overflow:"hidden",children:[(0,d.jsxs)(g,{children:[(0,d.jsx)(p,{size:"tall"}),(0,d.jsx)(p,{size:"short"}),(0,d.jsx)(p,{size:"tall"})]}),(0,d.jsxs)(g,{children:[(0,d.jsx)(p,{size:"short"}),(0,d.jsx)(p,{size:"tall"}),(0,d.jsx)(p,{size:"short"}),(0,d.jsx)(p,{size:"tall"})]})]})})]})}},838751:function(e,t,a){a.d(t,{Z:()=>i});let i=({name:e,width:t,height:a})=>{let i=`${t}${"number"==typeof t?"px":""}`,l=`${a}${"number"==typeof a?"px":""}`,n="number"==typeof t?t:236;return`
.${e} {
  -webkit-animation-duration: 1s;
  -webkit-animation-fill-mode: forwards;
  -webkit-animation-iteration-count: infinite;
  -webkit-animation-name: ${e}_placeHolderShimmer;
  -webkit-animation-timing-function: linear;
  border-radius: 16px;
  background: #f6f7f9;
  background-image: linear-gradient(to right, #f6f7f9 0%, #e9ebee 20%, #f6f7f9 40%, #f6f7f9 100%);
  background-repeat: no-repeat;
  background-size: ${n} ${l};
  width: ${i};
  height: ${l};
}

@keyframes ${e}_placeHolderShimmer{
  0% {
      background-position: -${n}px 0;
  }
  100% {
      background-position: ${n}px 0;
  }
}
`}},847499:function(e,t,a){a.d(t,{By:()=>d,IT:()=>c,N6:()=>l,br:()=>n,jq:()=>s,lU:()=>r,tq:()=>o});var i=a(47755);let l=(e,t)=>({type:"UPDATE_CURRENT_SEARCH",payload:{query:e,scope:t}}),n=(e,t)=>({type:"UPDATE_RECENT_SEARCHES",payload:{query:e,scope:t}}),o=e=>({type:"UPDATE_RECENT_SEARCHES_BATCH",payload:{data:e}}),s=(e,t,a)=>({type:"UPDATE_TYPEAHEAD_CACHE",payload:{items:e,term:t,recent_queries_tags:a}}),r=(e,t,a)=>l=>{(0,i.Z)({url:"/v3/search/recent/",method:"DELETE",data:{vertical:e||void 0}}).then(t,a),l("PERSONAL"===e?{type:"CLEAR_RECENT_PERSONAL_SEARCHES"}:{type:"CLEAR_RECENT_SEARCHES"})},c=(e,t,a,l,n)=>o=>{a||(0,i.Z)({url:"/v3/search/recent/",method:"DELETE",data:{query:e,vertical:t||void 0}}).then(l,n),o("PERSONAL"===t?{type:"CLEAR_RECENT_PERSONAL_SEARCH",payload:{query:e}}:{type:"CLEAR_RECENT_SEARCH",payload:{query:e}})},d=e=>t=>{t({type:"RELOAD_VISUAL_SEARCH_ANNOTATIONS",payload:{pinId:e}})}},219043:function(e,t,a){a.d(t,{Z:()=>h});var i=a(686659),l=a(667294),n=a(391995),o=a(146178),s=a(609252),r=a(936367),c=a(986475),d=a(640200),u=a(785893);function h({oneBarModules:e,showIndicator:t,setProductFiltersModalIsOpen:a,showProductFilters:h=!1}){(0,l.useEffect)(()=>{(0,i.Z)("OneBar","/app/www/search/OneBar.tsx")},[]);let p=(0,l.useRef)(null),g=(0,l.useRef)(null),m=(0,l.useRef)(null),[f,_]=(0,l.useState)(0),y=e.map(e=>(0,c.Z)(d.Z,!0)(e));!function({pillsRef:e,oneBarModules:t,latestSelectedGuideX:a,setLatestSelectedGuideX:i}){(0,l.useEffect)(()=>{if(0!==a)return;let l=t.findIndex(e=>e.display?.isSelected);if(-1===l)return;let n=e.current;if(!n)return;let{children:o,clientWidth:s}=n,r=Array.from(o).slice(0,l+1).reduce((e,t)=>e+t.offsetWidth,0);r>s&&i(r)},[a,t,e,i])}({pillsRef:m,oneBarModules:y,latestSelectedGuideX:f,setLatestSelectedGuideX:_}),(0,l.useEffect)(()=>{setTimeout(()=>{g.current?.scrollTo({top:0,left:f,behavior:"smooth"})},1e3)},[f]);let x=new r.ZP;return(0,l.useEffect)(()=>{let e=p.current;return e&&s.Z.addObstruction("top",e),()=>{e&&s.Z.removeObstruction("top",e)}}),(0,u.jsx)(n.xu,{ref:p,color:"default","data-root-margin":"search-one-bar",height:54,overflow:"hidden",children:(0,u.jsx)(n.xu,{ref:g,"data-test-id":"mweb-onebar-search",height:64,overflow:"auto",children:(0,u.jsx)(n.kC,{ref:m,gap:1,maxWidth:"100%",children:y.map((e,i)=>(0,u.jsx)(o.Z,{hasProductFiltersApplied:t,impressionsFramework:x,index:i,module:e,oneBarModulesKey:null,onFilterButtonClick:()=>{h&&a?.(!0)},setLatestSelectedGuideX:_,showMWebProductFilters:h},`OneBarModule-${e.id||""}`))})})})}},859602:function(e,t,a){a.d(t,{Nu:()=>n,q:()=>l,r:()=>o,z5:()=>i});let i=["board_shop_tool_module","shop_tab_upsell","story_pins_search_upsell","structured_search_bubble","user_style_story_v2","search_story_separator","search_story_landing_page_header"],l="checklist_education_feed_card",n=["#CFFFCA","#D7EDFF","#DAD4FF","#DAFFF6","#FFE2EB","#FFE4C1","#FFFD92"],o={"#d7edff":"blueStrong","#002966":"blueStrong","#cfffca":"greenStrong","#ffe0e0":"redStrong","#800000":"redStrong","#dafff6":"blueWeak","#fffd92":"greenWeak","#c3f9c2":"greenWeak","#005f3e":"greenWeak","#ffe4c1":"orangeWeak","#842000":"orangeWeak","#ffe2eb":"redWeak","#e9e4ff":"purpleWeak","#400387":"purpleWeak","#dad4ff":"purpleWeak","#efefef":"base"}},3455:function(e,t,a){a.d(t,{Z:()=>eB});var i,l,n,o=a(686659),s=a(667294),r=a(935059),c=a(739405),d=a(143293);a(167912);var u=a(391995),h=a(183e3),p=a(680295),g=a(24246),m=a(661376),f=a(854897),_=a(228612),y=a(581722),x=a(312048),b=a(28031),w=a(400962),v=a(59111),S=a(134136),j=a(501010),P=a(112658),k=a(116980),T=a(341687),C=a(893957),Z=a(128608),F=a(473156),E=a(619784),A=a(958306),I=a(603284),M=a(919203),D=a(847499),L=a(104999),z=a(360033),R=a(40571),H=a(609252),O=a(774838),K=a(564377),N=a(935833),V=a(736328),B=a(211129),W=a(785893);function $(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let U={baseStyles:{transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",transformOrigin:"bottom",touchAction:"none"}};class G extends s.Component{constructor(...e){super(...e),$(this,"state",{currentDistanceFromTop:this.props.maxDistanceFromTop?this.props.maxDistanceFromTop:-1,headerHeight:this.props.headerHeight||0,isAtTop:!1,scrollDirection:0,shouldAnimate:!1,startY:0,canScrollOnChildren:!1}),$(this,"onTouchStart",e=>{let{clientY:t}=e.touches[0];this.setState({startY:t,shouldAnimate:!1,scrollDirection:0})}),$(this,"onTouchMove",e=>{let{clientY:t}=e.touches[0],{startY:a,currentDistanceFromTop:i}=this.state,{canMoveModal:l,maxDistanceFromTop:n}=this.props,o=t-a;l&&void 0!==n&&(o>0&&i>=0&&i<n&&window.scrollY<=0||o<0&&i<=n&&i>=0)&&this.setModalPosition(t)}),$(this,"onTouchEnd",()=>{let{entryPoint:e,minDistanceFromTop:t,canMoveModal:a}=this.props;this.props.shouldSnapToEnds&&2===this.state.scrollDirection?(this.header&&H.Z.removeObstruction("top",this.header),this.setState({canScrollOnChildren:!1,currentDistanceFromTop:this.props.maxDistanceFromTop,shouldAnimate:!0,isAtTop:!1}),e&&(0,N.My)(`mweb.${e}.snap_to_bottom`)):this.props.shouldSnapToEnds&&1===this.state.scrollDirection&&(this.state.isAtTop?this.setState({currentDistanceFromTop:0,shouldAnimate:!0}):this.setState({canScrollOnChildren:!!a,currentDistanceFromTop:t||0,shouldAnimate:!0,isAtTop:!0}),this.header&&H.Z.addObstruction("top",this.header),e&&(0,N.My)(`mweb.${e}.sliding_modal.snap_to_top`))}),$(this,"handleHandleMove",e=>{let{clientY:t}=e.touches[0],{canMoveModal:a,maxDistanceFromTop:i,minDistanceFromTop:l}=this.props,{startY:n,currentDistanceFromTop:o}=this.state;a&&o<=(l||0)&&t-n>0&&(e.stopPropagation(),this.setState({canScrollOnChildren:!1,currentDistanceFromTop:i,isAtTop:!1,scrollDirection:0,shouldAnimate:!0,startY:0}))}),$(this,"handleHeaderTouch",()=>{let{maxDistanceFromTop:e,minDistanceFromTop:t,entryPoint:a,canMoveModal:i}=this.props,{currentDistanceFromTop:l,scrollDirection:n}=this.state;0===n&&(l===e?(this.setState({canScrollOnChildren:!!i,currentDistanceFromTop:t||0,shouldAnimate:!0,isAtTop:!0}),(0,N.My)(`mweb.${a}.sliding_modal.header_touch.snap_to_top`)):e&&(this.setState({canScrollOnChildren:!1,currentDistanceFromTop:e,shouldAnimate:!0,isAtTop:!1}),(0,N.My)(`mweb.${a}.sliding_modal.header_touch.snap_to_bottom`)))}),$(this,"handleCloseIconTouch",e=>{let{currentDistanceFromTop:t}=this.state,{onDismiss:a,logContextEvent:i,maxDistanceFromTop:l,viewParameter:n,viewType:o}=this.props;e.stopPropagation(),a&&(i({aux_data:{commerce_data:JSON.stringify({snapped_top:0===t})},element:75,event_type:102,view_parameter:n,view_type:o}),this.setState({currentDistanceFromTop:l,startY:0,scrollDirection:0},()=>a(e)))}),$(this,"getModalStyles",()=>{let{shouldSnapToEnds:e}=this.props,{currentDistanceFromTop:t,shouldAnimate:a,canScrollOnChildren:i}=this.state,{baseStyles:l}=U;return{...l,animation:"modalReveal 0.3s ease-out both",position:i?"absolute":"fixed",top:t>-1?t:void 0,bottom:0,width:"100vw",...e&&a?{transitionDuration:"500ms",transitionProperty:"transform, opacity, top"}:Object.freeze({})}}),$(this,"setModalPosition",e=>{let{startY:t,currentDistanceFromTop:a}=this.state,{maxDistanceFromTop:i,snapToEndThreshold:l,entryPoint:n}=this.props;if(i){let o=e-t,s=Math.floor("CloseupShop"===n||"CloseUpMainPinDrawer"===n?Math.max(0,a+o):Math.min(i,Math.max(0,a+o))),r=0;if(void 0!==l&&l>=0){let e=Math.floor(l*i),t=Math.floor((1-l)*i);o<0?r=s>t?2:1:o>0&&(r=s>e?2:1)}this.setState({startY:e,currentDistanceFromTop:s,scrollDirection:r})}})}componentDidMount(){let{isOpen:e}=this.props;e&&H.Z.pause()}componentDidUpdate(e,t){let{domainFilters:a,priceFilters:i,cropSource:l,isOpen:n,logContextEvent:o,maxDistanceFromTop:s,setHasDraggedDrawerToFullScreen:r,minDistanceFromTop:c,entryPoint:d,onSheetFullyExpanded:u,onSheetFullyClosed:h}=this.props,{currentDistanceFromTop:p,isAtTop:g}=this.state;n&&!e.isOpen?H.Z.pause():!n&&e.isOpen&&H.Z.resume(),"CloseUpMainPinDrawer"===d&&s<e.maxDistanceFromTop&&p>s&&this.handleHeaderTouch(),t.currentDistanceFromTop!==(e.minDistanceFromTop||0)&&p===(c||0)&&r&&r(!0),t.isAtTop!==g&&(g?u():h()),a&&i&&(!(0,z.ZP)(a,e.domainFilters)||!(0,z.ZP)(i,e.priceFilters))&&o({event_type:13,view_parameter:"related_products"===(0,B.Z)(l)?3455:3456,view_type:72,element:11735})}componentWillUnmount(){let{isOpen:e}=this.props;this.header&&H.Z.removeObstruction("top",this.header),e&&H.Z.resume()}render(){let{children:e,headerChildren:t,heading:a,isAuth:i,isInHSObjLevelOneBarExp:l,isOpen:n,isRTL:o,mobileAccessibilityCloseIconLabel:s,mobileHideCloseIcon:r,noDivider:c,showHandle:d}=this.props,{headerHeight:h,canScrollOnChildren:p}=this.state,g=p||!i||l?"0":"32px 32px 0 0";return n?(0,W.jsx)(K.Z,{children:(0,W.jsx)(u.xu,{"aria-label":a,role:"dialog",children:(0,W.jsx)(u.xu,{color:"default",dangerouslySetInlineStyle:{__style:{...this.getModalStyles(),borderRadius:g}},"data-test-id":"sliding-modal-events-handler",onTouchEnd:this.onTouchEnd,onTouchMove:this.onTouchMove,onTouchStart:this.onTouchStart,children:(0,W.jsxs)(u.iP,{accessibilityLabel:this.props.i18n._('View all search results', 'SlidingModal.Header.a11yLabel', 'Accessibility label for header of search results in flashlight'),onTap:this.handleHeaderTouch,children:[(0,W.jsxs)(u.Le,{top:h||0,children:[d&&(0,W.jsx)(u.xu,{color:"default",dangerouslySetInlineStyle:{__style:{padding:"8px 0 24px 0",borderRadius:g}},"data-test-id":"slidingModalHandle",display:"flex",justifyContent:"center",onTouchMove:this.handleHandleMove,children:R.Z}),l&&(0,W.jsxs)(u.xu,{alignItems:"center",color:"default",display:this.state.isAtTop?"flex":"none",height:60,justifyContent:"center",opacity:100*!!this.state.isAtTop,position:"relative",children:[(0,W.jsx)(u.xu,{alignItems:"center",display:"flex",left:!0,marginStart:2,padding:3,position:"absolute",children:(0,W.jsx)(u.JO,{accessibilityLabel:this.props.i18n._('Close sliding modal', 'slidingModal.hybridSearch.closeModal', 'Accessibility label for close icon on top of slider modal'),color:"default",icon:"chevron-down",size:"20"})}),(0,W.jsx)(u.kC,{alignItems:"stretch",flex:"grow",justifyContent:"center",children:(0,W.jsx)(u.xe,{size:"300",weight:"bold",children:this.props.i18n._('More like this', 'slidingModal.hybridSearch.moreLikeThis', 'top of slider modal to show similar pins with hybrid search')})})]}),!r&&(0,W.jsxs)(u.xu,{ref:e=>{this.header=e},color:"default",rounding:200,children:[(0,W.jsxs)(u.kC,{alignItems:"center",flex:"grow",justifyContent:"start",children:[(0,W.jsx)(u.kC,{alignItems:"center",justifyContent:"start",children:(0,W.jsx)(u.hU,{accessibilityLabel:s||"Close visual search results",dataTestId:"close-visual-search-results",icon:"chevron-left",iconColor:"subtle",onClick:({event:e})=>this.handleCloseIconTouch(e),padding:5,size:"lg"})}),(0,W.jsx)(u.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:function({filterIconShown:e,isRTL:t}){let a=t?"marginRight":"marginLeft",i=t?"marginLeft":"marginRight";return e?{[a]:38,[i]:50,marginTop:15,marginBottom:15}:{[a]:-10,[i]:50,marginTop:15,marginBottom:15}}({isRTL:o})},"data-test-id":"slidingModalHeader",display:"flex",flex:"grow",justifyContent:"center",children:(0,W.jsx)(u.qd,{accessibilityLevel:2,align:"center",size:"400",children:a})})]}),t||null,!c&&(0,W.jsx)(u.iz,{})]})]}),(0,W.jsx)(u.xu,{overflow:p?"auto":"visible",children:e})]})})})}):null}}function q(e){(0,s.useEffect)(()=>{(0,o.Z)("SlidingModal","/app/www/SlidingModal.tsx")},[]);let t=(0,g.Z)(),a=(0,L.Z)(),{isRTL:i}=(0,O.B)(),l=(0,V.Z)(),{isAuth:n}=(0,r.Z)(),{checkExperiment:c}=(0,j.Z)(),d=n&&c("mweb_onebar_hybrid_search",{dangerouslySkipActivation:!0}).anyEnabled;return(0,W.jsx)(G,{...e,i18n:t,isAuth:n,isInHSObjLevelOneBarExp:d,isRTL:i,logContextEvent:a,trackInteraction:l})}var Y=a(304961),J=a(806513),Q=a(285676),X=a(658337),ee=a(645479),et=a(838855),ea=a(230201),ei=a(922931);function el(){let[e,t]=(0,s.useState)(0),[a,i]=(0,s.useState)(0),[l,n]=(0,s.useState)(!1),[o,r]=(0,s.useState)(!1),[c,d]=(0,s.useState)(void 0);function u(){r(!1),n(!1),d(void 0)}function h(e,t){"vertical"!==t&&e.stopPropagation()}return{onCarouselTouchStart:function(e){let{clientX:a,clientY:l}=e.touches[0];t(a),i(l),u()},onCarouselTouchMove:function(t){let{clientX:i,clientY:s}=t.touches[0],u=Math.abs(i-e);Math.abs(s-a)>10&&n(!0),u>10&&r(!0),o&&l?d(e=>e||"vertical"):o?d(e=>e||"horizontal"):l?d(e=>e||"vertical"):d(void 0),h(t,c)},onCarouselTouchEnd:function(e){h(e,c),u()}}}function en({data:e,pinId:t,surfaceType:a,viewParameter:i,viewType:l}){(0,s.useEffect)(()=>{(0,o.Z)("MobileVisualSearchCarousel","/app/www/VisualSearch/mobile/Feed/MobileVisualSearchCarousel.tsx")},[]);let n=(0,c.Wb)(),r=(0,g.Z)(),{logContextEvent:d}=(0,ea.u)(),{width:h}=(0,b.Z)()||{},{onCarouselTouchStart:p,onCarouselTouchMove:m,onCarouselTouchEnd:f}=el(),_=(e?.results||[]).find(e=>"story"===e.type),{url:y=`/pin/${t}`,text:x=""}=_?.action||{},w=r._('Shop similar', 'mobileFlashlight.productUpsellTitle', 'Shop similar products from the image.');function v(){d({component:14339,element:179,event_type:102,view_parameter:i,view_type:l})}return _&&"stl"!==a?(0,W.jsxs)(u.xu,{children:[(0,W.jsxs)(u.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginBottom:2,paddingX:Y.S2,children:[(0,W.jsx)(u.Tg,{href:y,onTap:({event:e})=>{e.stopPropagation(),v()},tapStyle:"compress",children:(0,W.jsx)(u.qd,{accessibilityLevel:2,size:"400",children:w})}),(0,W.jsx)(u.I_,{accessibilityLabel:x||r._('See more', 'headerModule.headerModuleActionButton.iconButton', 'An right arrow icon button to show more similar pins to the user in a new page'),bgColor:"transparent",dataTestId:"product-upsell-action-button",href:y,icon:"chevron-right",iconColor:"default",onClick:v,size:"sm"})]}),(0,W.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{touchAction:"pan-x",overflowY:"hidden"}},onTouchEnd:f,onTouchMove:m,onTouchStart:p,children:(0,W.jsx)(ei.default,{component:14339,contentVisibleItemCountOverride:n?Y.AK:Y.Z3,disableHeader:!0,story:_,storyKey:_?{type:"Legacy",data:_}:null,surface:"ShoppingDynamicHeightGrid",view:l,viewParameter:i,width:h})})]}):null}var eo=a(433100),es=a(986475),er=a(640200),ec=a(148),ed=a(219043);function eu({auxData:e}){(0,s.useEffect)(()=>{(0,o.Z)("MobileVisualSearchOneBar","/app/www/VisualSearch/mobile/Feed/MobileVisualSearchOneBar.tsx")},[]);let{onCarouselTouchStart:t,onCarouselTouchMove:a,onCarouselTouchEnd:i}=el(),l=e?.metadata?.one_bar_modules,n=(0,es.Z)(er.Z,!0)(l);return n&&n.length>0?(0,W.jsx)(ec.v,{children:(0,W.jsx)(eo.f,{children:(0,W.jsx)(u.xu,{marginBottom:4,onTouchEnd:i,onTouchMove:a,onTouchStart:t,paddingX:2,children:(0,W.jsx)(u.iP,{onTap:({event:e})=>e.stopPropagation(),children:(0,W.jsx)(ed.Z,{oneBarModules:n})})})})}):null}function eh({auxData:e,showPivots:t,isShopTheLookFeed:a,pinId:i,searchResourceOptions:l,surfaceType:n,viewParameter:r,viewType:c}){(0,s.useEffect)(()=>{(0,o.Z)("MobileVisualSearchFeed","/app/www/VisualSearch/mobile/Feed/MobileVisualSearchFeed.tsx")},[]);let d=(0,g.Z)(),{auxData:h,data:p,fetchMore:f,isAtEnd:_,isFetching:y,isLoaded:x}=(0,m.Z)({name:"VisualSearchFlashlightUnifiedResource",options:l}),b=(p?.results||[]).flatMap(e=>"pin"===e.type?e:[]),w=d._('Image search', 'mobileFlashlight.organicFeedTitle', 'Search results from the image.'),v=d._('Shop the look', 'mobileFlashlight.shopTheLookFeedTitle', 'Shop the look for similar products from the cropped image.');return x?(0,W.jsxs)(s.Fragment,{children:[t&&(0,W.jsx)(eu,{auxData:h}),(0,W.jsx)(en,{data:p,pinId:i,surfaceType:n,viewParameter:r,viewType:c}),(0,W.jsx)(u.xu,{"data-test-id":a?"shop-the-look-feed-title":"organic-feed-title",marginBottom:3,paddingX:Y.S2,children:(0,W.jsx)(u.qd,{accessibilityLevel:2,size:"400",children:a?v:w})}),(0,W.jsx)(u.xu,{color:"default",dangerouslySetInlineStyle:{__style:{touchAction:"pan-y"}},"data-test-id":a?"shop-the-look-feed":"organic-feed",paddingX:J.D6,children:(0,W.jsx)(et.Z,{feedItems:b,feedKey:(0,X.J)("VisualSearchFlashlightUnifiedResource",l)??"",pagination:{loadNext:f||(()=>void 0),hasNext:!_,isLoadingNext:y||!1,refetch:()=>void 0},renderFeedItem:(t,i)=>(0,W.jsx)(ee.Z,{children:(0,W.jsx)(Q.r,{auxData:e,componentType:0,pinId:t.id??"",pinKey:{type:"Legacy",data:t},slotIndex:i,trackingParams:t.tracking_params||void 0,trafficSource:a?"shop_feed":void 0,viewParameter:r,viewType:c})})})})]}):(0,W.jsx)(u.xH,{accessibilityLabel:d._('Loading visual search results', 'mobileFlashlightPage.loadingSpinner', 'Spinner for loading the visual search result'),show:!0})}function ep({isShopTheLookFeed:e,searchResourceOptions:t,viewParameter:a,viewType:i}){(0,s.useEffect)(()=>{(0,o.Z)("UnauthMobileVisualSearchFeed","/app/www/VisualSearch/mobile/Feed/UnauthMobileVisualSearchFeed.tsx")},[]);let{data:l,fetchMore:n,isAtEnd:r,isFetching:c}=(0,m.Z)(e?{name:"VisualSearchFlashlightUnifiedResource",options:t}:{name:"VisualLiveSearchResource",options:t});return(0,W.jsx)(u.xu,{color:"default",paddingX:J.D6,children:(0,W.jsx)(et.Z,{feedItems:l?.results??[],feedKey:(0,X.J)("VisualLiveSearchResource",t)??"",pagination:{loadNext:n||(()=>void 0),hasNext:!r,isLoadingNext:c||!1,refetch:()=>void 0},renderFeedItem:(e,t)=>(0,W.jsx)(ee.Z,{children:(0,W.jsx)(Q.r,{componentType:0,pinId:e.id??"",pinKey:{type:"Legacy",data:e},slotIndex:t,trackingParams:e.tracking_params,trafficSource:"flashlight",viewParameter:a,viewType:i})})})})}var eg=a(962906),em=a(407678);function ef(){return Math.min(em.g6,window.innerWidth)}function e_(e,t){return Math.floor(ef()/t*e)}var ey=a(415927),ex=a(976892),eb=a(47239),ew=a(615440),ev=a(743222),eS=a(284009);function ej({pinDominantColor:e,url:t,closeupImageWidth:a,closeupImageHeight:i}){(0,s.useEffect)(()=>{(0,o.Z)("CropperCloseupImage","/app/www/VisualSearch/mobile/CropperCloseupImage.tsx")},[]);let l=(0,g.Z)();return(0,W.jsx)(eS.Z,{alt:l._('Pin image', 'flashlight.cropper.closeupImage', 'Pin closeup image'),color:e,isFlashlightPage:!0,naturalHeight:i,naturalWidth:a,placeholder:t,pwtElementTimingId:"cropper-closeup-image",showSpinner:!1,src:t})}let eP=e=>{(0,s.useEffect)(()=>{(0,o.Z)("CropperHandle","/app/www/VisualSearch/mobile/CropperHandle.tsx")},[]);let{alt:t,src:a,top:i,left:l}=e;return(0,W.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{top:i,left:l}},height:24,position:"absolute",width:24,children:(0,W.jsx)(u.Ee,{alt:t,color:"transparent",naturalHeight:24,naturalWidth:24,src:a})})},ek={backgroundColor:"#000000",opacity:"0.4"};function eT({closeupImageUrl:e,closeupImageDims:t,cropArea:{x:a,y:i,w:l,h:n},disableBorder:r,disableHandles:c,handleBackClick:d,onTouchEnd:h,onTouchMove:p,onTouchStart:m,pinDominantColor:f,showBackButton:_,viewParameter:y}){(0,s.useEffect)(()=>{(0,o.Z)("Cropper","/app/www/VisualSearch/mobile/Cropper.tsx")},[]);let x=(0,g.Z)(),{closeupImageWidth:b,closeupImageHeight:w}=t,v=Math.floor(w*i),S=Math.floor(b*a),j=Math.floor(w*n),P=Math.floor(b*l),k=S+P,T=v+j;return(0,W.jsxs)(u.xu,{"data-test-id":"cropper-container",onTouchEnd:h,onTouchMove:p,onTouchStart:m,position:"relative",children:[(0,W.jsx)(ej,{closeupImageHeight:w,closeupImageWidth:b,pinDominantColor:f,url:e??""}),(0,W.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:ek},height:v,left:!0,position:"absolute",top:!0,width:"100%"}),(0,W.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{...ek,top:v}},height:j,left:!0,position:"absolute",width:S}),(0,W.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{...ek,top:v,left:k}},height:j,position:"absolute",right:!0}),(0,W.jsx)(u.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...ek,top:T}},left:!0,position:"absolute",width:"100%"}),!c&&(0,W.jsxs)(u.xu,{"data-test-id":"CropperHandles",children:[(0,W.jsx)(eP,{alt:x._('Top left cropper handle', 'flashlight.cropper.topLeftHandle', 'top left handle for cropping image'),left:S-9,src:ew,top:v-9}),(0,W.jsx)(eP,{alt:x._('Top right cropper handle', 'flashlight.cropper.topRightHandle', 'top right handle for cropping image'),left:k-15,src:ev,top:v-9}),(0,W.jsx)(eP,{alt:x._('Bottom left cropper handle', 'flashlight.cropper.bottomLeftHandle', 'bottom left handle for cropping image'),left:S-9,src:ex,top:T-15}),(0,W.jsx)(eP,{alt:x._('Bottom right cropper handle', 'flashlight.Cropper.BottomLeftHandle', 'bottom right handle for cropping image'),left:k-15,src:eb,top:T-15})]}),(0,W.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{top:v-2,left:S-2,border:r?void 0:"2px solid #ffffff"}},"data-test-id":"CroppedArea",height:j+4,position:"absolute",rounding:200,width:P+4}),_&&(0,W.jsx)(eg.ZP,{handleBackClick:d,viewParameter:y,viewType:427})]})}var eC=a(383903);function eZ({auxData:e,onClick:t,shouldLogDotRender:a,showNoHalo:i,style:l,viewParameter:n,x:r,y:c}){(0,s.useEffect)(()=>{(0,o.Z)("Dot","/app/www/VisualSearch/mobile/Dot.tsx")},[]);let d=(0,g.Z)(),h=(0,L.Z)();return(0,C.Z)(()=>{a&&h({aux_data:e,element:1221,event_type:120,view_parameter:n,view_type:72})}),(0,W.jsx)("div",{"aria-label":d._('Select a specific item on image', 'dot.accessibilityLabel', 'Accessibility label for <Dot /> component'),"data-test-id":"dot",onClick:t,onKeyPress:t,role:"button",style:{position:"absolute",top:c-16,left:r-16,outline:"none",...l},tabIndex:0,children:(0,W.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:i?void 0:"rgba(0, 0, 0, 0.1)",width:32,height:32,border:"none",borderRadius:32,cursor:t?"pointer":"default"}},children:(0,W.jsx)(u.xu,{alignItems:"center",color:"washLight",dangerouslySetInlineStyle:{__style:{boxShadow:"none",width:16,height:16,border:"none",borderRadius:16,top:8,left:8}},display:"flex",justifyContent:"center",padding:0,position:"absolute"})})})}var eF=a(496102);let eE="flashlightDotPop",eA=(0,eF.Ll)([`
  ${eE} {
      0% {
          opacity: 0;
          transform: scale(0);
      }

      100% {
          opacity: 1;
          transform: scale(1);
      }
  }
`,`labelReveal {
    0% {
      transform: scale(0, 1)
    }

    100% {
      transform: scale(1, 1)
    }
  }
`]);function eI({closeupImageTop:e,imageHeight:t,imageTop:a,imageWidth:i,onDotTap:l,pinId:n,pinImageSignature:r,setCropArea:c,shouldLogDotRender:d,showNoHalo:u,viewParameter:h,visualObjects:p,visualObjectToHide:g}){(0,s.useEffect)(()=>{(0,o.Z)("Dots","/app/www/VisualSearch/mobile/Dots.tsx")},[]);let m=(0,L.Z)();return(0,W.jsxs)(s.Fragment,{children:[(0,W.jsx)(v.Z,{unsafeCSS:eA}),p.map((o,s)=>{if(s===g)return null;let{x:f=0,y:_=0,w:y=0,h:x=0}=o,b={x:f,y:_,h:x,w:y},w=(0,eC.Z)({cropArea:{x:f,y:_,w:y,h:x},scaledWidth:i,scaledHeight:t}),v=Math.floor(w.x+w.w/2),S=Math.floor(w.y+a+w.h/2),j=(e=>{let t=parseFloat((.1*e).toFixed(2));return{animation:`${eE} 0.3s ease-out ${t}s both`}})(s),P={pin_id:n,image_signature:r,visual_objects:JSON.stringify([b]),commerce_data:JSON.stringify({entrypoint:"flashlight",pin_is_stela:"false"})};return(0,W.jsx)(eZ,{auxData:P,onClick:function(){m({aux_data:P,element:1221,event_type:102,view_parameter:h,view_type:72}),l({cropArea:b,cropSource:4,visualObjects:p}),c?.(b)},shouldLogDotRender:d,showNoHalo:u,style:j,viewParameter:h,x:v,y:S-e},JSON.stringify(b))})]})}function eM({closeupImageUrl:e,closeupImageDims:t,cropArea:a,handleBackClick:i,handleChangeCloseupImageTop:l,handleCropperChange:n,headerHeight:c,pinDominantColor:d,pinId:h,pinImageSignature:p,showBackButton:g,viewParameter:m,visualObjects:f,visualObjectToHide:_}){(0,s.useEffect)(()=>{(0,o.Z)("VisualSearch","/app/www/VisualSearch/mobile/VisualSearch.tsx")},[]);let y=(0,L.Z)(),{isAuth:x}=(0,r.Z)(),b=(0,s.useRef)(null),[w,v]=(0,s.useState)(0),[S,j]=(0,s.useState)(0),[P,k]=(0,s.useState)(10),[T,C]=(0,s.useState)(a),{current:Z}=(0,ey.Z)(),{x:F,y:E,w:A,h:I}=T,{closeupImageTop:M,closeupImageMinTop:D,closeupImageWidth:z,closeupImageHeight:R,minCropperWidthRatio:H,minCropperHeightRatio:O}=t,K=c||0;return(0,W.jsx)(u.kC,{justifyContent:"center",width:"100vw",children:(0,W.jsxs)(u.xu,{ref:b,dangerouslySetInlineStyle:{__style:{top:M,touchAction:"none"}},maxWidth:em.g6,overflow:"hidden",position:"fixed",width:"100%",children:[(0,W.jsx)(eT,{closeupImageDims:t,closeupImageUrl:e,cropArea:T,handleBackClick:i,onTouchEnd:()=>{[10,0].includes(P)||(y({event_type:1===P?7603:7604,view_parameter:m,view_type:72}),n({cropArea:T,cropSource:6,visualObjects:f}))},onTouchMove:e=>{let{clientX:t,clientY:a}=e.touches[0];if(v(t),j(a),10===P&&k(((e,t)=>{let a=t-M,i=e-(b.current?b.current.getBoundingClientRect().left:0),l=R*E,n=R*(E+I),o=z*F,s=z*(A+F);if(a>l+12&&a<n-12&&i>o+12&&i<s-12)return 1;if(i<=o+12&&i>=o-12&&a>=l+15&&a<=n-15)return 2;if(i<=s+12&&i>=s-12&&a>=l+15&&a<=n-15)return 3;if(i<=s-15&&i>=o+15&&a>=l-12&&a<=l+12)return 4;if(i<=s-15&&i>=o+15&&a>=n-12&&a<=n+12)return 5;if(i<=o-9+24&&i>=o-12&&a>=l-12&&a<=l+24-9)return 6;if(i<=s+12&&i>=s-15&&a>=l-12&&a<=l+24-9)return 7;else if(i<=o-9+24&&i>=o-12&&a>=n-15&&a<=n+12)return 8;else if(i<=s+12&&i>=s-15&&a>=n-15&&a<=n+12)return 9;else return 0})(t,a)),null!=H&&null!=O&&null!=D){let e=a-S,i=(t-w)/z,n=e/R,o=Math.min(F+A-H,Math.max(0,F+i)),s=A+(F-o),r=Math.min(E+I-O,Math.max(0,E+n)),c=I+(E-r),d=Math.min(1-F,Math.max(H,A+i)),u=Math.min(1-E,Math.max(O,I+n));switch(P){case 0:l(Math.floor(Math.max(D,Math.min(K,M+e))));break;case 1:C(e=>({...e,x:Math.max(0,Math.min(1-A,F+i)),y:Math.max(0,Math.min(1-I,E+n))}));break;case 2:C(e=>({...e,x:o,w:s}));break;case 3:C(e=>({...e,w:d}));break;case 4:C(e=>({...e,y:r,h:c}));break;case 5:C(e=>({...e,h:u}));break;case 6:C({x:o,w:s,y:r,h:c});break;case 7:C(e=>({...e,w:d,y:r,h:c}));break;case 8:C(e=>({...e,h:u,x:o,w:s}));break;case 9:C(e=>({...e,h:u,w:d}))}}},onTouchStart:e=>{let{clientX:t,clientY:a}=e.touches[0];v(t),j(a),k(10)},pinDominantColor:d,showBackButton:g,viewParameter:m}),!!f.length&&0!==R&&0!==z&&(0,W.jsx)(u.xu,{"data-test-id":"FlashlightDots",children:(0,W.jsx)(eI,{closeupImageTop:M,imageHeight:R,imageTop:M,imageWidth:z,onDotTap:n,pinId:h,pinImageSignature:p,setCropArea:C,shouldLogDotRender:!Z,showNoHalo:x,viewParameter:m,visualObjects:f,visualObjectToHide:_})})]})})}let eD=`
  html, body {
    overscroll-behavior: none;
  }
`,eL=(void 0!==i||(i=a(875516)).hash&&"863a38d55a102845ddf9a34a56b3efed"!==i.hash&&console.error("The definition of 'MobileFlashlightPage_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function ez({pinKey:e}){(0,s.useEffect)(()=>{(0,o.Z)("MobileFlashlightPage","/app/www/VisualSearch/mobile/MobileFlashlightPage.tsx")},[]);let t=(0,g.Z)(),a=(0,y.I0)(),i=(0,x.s0)(),{previous:l}=(0,w.ou)(),n=(0,x.TH)(),{isAuth:d}=(0,r.Z)(),{width:p}=(0,b.Z)()||{},m=(0,c.ZP)(),f=(0,h.Z)(eL,e),[_,L]=(0,s.useState)(!1),{checkExperiment:z}=(0,j.Z)(),R=d&&z("mweb_onebar_hybrid_search",{dangerouslySkipActivation:!0}).anyEnabled,H=(0,T.Z)(n.search),{cropSource:O,filters:K,hybrid_search_param:N,journey_depth:V,search_query:B,source_module_id:$,x:U,y:G,h:J,w:Q,surfaceType:X,requestParams:ee}=H,et=X||"flashlight",ea=!d&&(0,k.x9)(m)||void 0,[ei,el]=(0,s.useState)(()=>{var e,t,a;let i,l,n=function({headerHeight:e,pinImageHeight:t,pinImageWidth:a}){let i=0,l=0,n=0;return t&&a&&(i=ef(),l=e_(t,a),n=Math.min(Math.floor(Y.pV*window.innerHeight),e_(t,a))),{closeupImageWidth:i,closeupImageHeight:l,closeupImageMinTop:n-l,closeupImageTop:e||0,minCropperWidthRatio:i?Y.xZ/i:0,minCropperHeightRatio:l?Y.xZ/l:0,modalTop:n}}({headerHeight:ea,pinImageHeight:f.images_736x?.height,pinImageWidth:f.images_736x?.width}),{closeupImageHeight:o,modalTop:s}=n,r=(e=Number(J),t=Number(G),a=ea||0,i=e?Number(e):Y.R$,l=t?Number(t):Y.zg,o>0&&s>0&&(e||(i=(s-2*s*Y.zg-a)/o),t||(l=s*Y.zg/o)),{h:i,y:l});return{closeupImageDims:n,x:U?Number(U):Y.zg,w:Q?Number(Q):1-2*Y.zg,y:r.y,h:r.h}}),[en,eo]=(0,s.useState)(()=>(0,F.Z)(Number(O))||(U&&G&&J&&Q?6:5)),es={x:ei.x,y:ei.y,w:ei.w,h:ei.h},er="stl"===et&&4===en,ec=function({cropSource:e,surfaceType:t,isProductPage:a,queryEntrypoint:i}){return i||("stl"===t&&4===e?"shop_the_look_module":a?"feed_module":null)}({cropSource:en,isProductPage:!1,surfaceType:et,queryEntrypoint:H.entrypoint}),ed={pin_id:f?.entityId,crop:es,crop_source:en,is_shopping:er,entry_source:er?"shopping":"flashlight",entrypoint:ec,filters:K,hybrid_search_param:N,journey_depth:parseInt(V,10)||void 0,search_query:B,source_module_id:$},eu=(f.visualObjects??[]).filter(e=>e.isStela).map(A.Z),[em,ey]=(0,s.useState)((0,Z.Z)(eu,es)),{isCropAreaOnDotArea:ex,indexToHide:eb}=em,{closeupImageWidth:ew,modalTop:ev}=ei.closeupImageDims,eS=f?.images_736x?.url??"",ej=!p||p-Y._z<ew&&d,eP=!ej&&d,ek=d?R?0:Y._z:ea,eT=t._('Visual search', 'Visual search results', 'Visual search results'),{auxData:eC,viewType:eZ,viewParameter:eF}=function({cropSource:e,isAuth:t,isCropAreaOnDotArea:a,isProductPage:i,surfaceType:l}){let n=t||"stl"===l,o=4===e||a,s=i?"product":"stl"===l?o?"product":"organic":t&&o?"unified":"organic";return{auxData:(()=>{let e=e=>({commerce_data:JSON.stringify({is_product_only_feed:e})});return"product"===s?e(!0):"unified"===s||n?e(!1):void 0})(),viewType:"product"===s?427:72,viewParameter:"organic"===s?3050:3462}}({cropSource:en,isAuth:d,isCropAreaOnDotArea:ex,isProductPage:!1,surfaceType:et}),eE=e=>a({type:"SET_FLASHLIGHT_CROP_SOURCE",payload:{cropSource:e}});function eA(){if(0===l.length)return void i(`/pin/${f.entityId}/`,{replace:!0});i(-1)}return((0,C.Z)(()=>{eE(en)}),0===ev)?null:(0,W.jsxs)(s.Fragment,{children:[(0,W.jsx)(v.Z,{unsafeCSS:eD}),(0,W.jsx)(I.Z,{auxData:eC,viewParameter:eF,viewType:eZ,children:(0,W.jsx)(P.Z,{view:eZ,children:(0,W.jsxs)(S.default,{hasFixedHeader:!0,hasGutter:!1,children:[(0,W.jsx)(M.Z,{text:t._('Visual Search Page', 'flashlight.accessibilityhiddenheading.fullpage', 'accessibility label for flashlight page')}),(0,W.jsx)(u.xu,{color:"washDark",height:"100vh",width:"100vw"}),(0,W.jsx)(eM,{closeupImageDims:ei.closeupImageDims,closeupImageUrl:eS,cropArea:es,handleBackClick:eA,handleChangeCloseupImageTop:function(e){el(t=>({...t,closeupImageDims:{...t.closeupImageDims,closeupImageTop:e}}))},handleCropperChange:function({cropArea:e,cropSource:t,visualObjects:l}){let n;eE(t),n=f.entityId,a((0,D.By)(n)),ey((0,Z.Z)(l,e)),eo(t),el(t=>({...t,...e})),i((0,E.Z)({cropArea:e,cropSource:t,isProductPage:!1,pinId:f.entityId,requestParams:ee,surfaceType:et}),{replace:!0})},headerHeight:ea,pinDominantColor:f.dominantColor||"#efefef",pinId:f.entityId,pinImageSignature:f.imageSignature,showBackButton:ej,viewParameter:eF,visualObjects:eu,visualObjectToHide:eb}),eP&&(0,W.jsx)(eg.ZP,{handleBackClick:eA,viewParameter:eF,viewType:eZ}),(0,W.jsx)(q,{canMoveModal:!0,cropSource:en,entryPoint:"flashlight",headerHeight:ea,heading:eT,isOpen:!0,location:n,maxDistanceFromTop:ev||0,minDistanceFromTop:ek,mobileAccessibilityCloseIconLabel:t._('Close visual search results', 'close visual search results and go back to pin', 'close visual search results and go back to pin'),mobileHideCloseIcon:d,noBorder:!0,noDivider:!0,noMaskOnBackground:!0,onDismiss:eA,onSheetFullyClosed:()=>L(!1),onSheetFullyExpanded:()=>L(R),pinId:f.entityId,shouldSnapToEnds:!0,showHandle:d,snapToEndThreshold:.3,viewParameter:eF,viewType:eZ,children:d?(0,W.jsx)(eh,{auxData:eC,isShopTheLookFeed:er,pinId:f.entityId,searchResourceOptions:ed,showPivots:_,surfaceType:et,viewParameter:eF,viewType:eZ}):(0,W.jsx)(ep,{isShopTheLookFeed:er,searchResourceOptions:ed,viewParameter:eF,viewType:eZ})})]})})})]})}var eR=a(520803);let eH=(void 0!==l||(l=a(302609)).hash&&"df8cf9d2521b1a82156cc4ecd7b04884"!==l.hash&&console.error("The definition of 'MobileFlashlightPageFetchData_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l),eO=(void 0!==n||(n=a(151219)).hash&&"a0953a7ea15ce447a2452bbeca8586ba"!==n.hash&&console.error("The definition of 'MobileFlashlightPageFetchDataPinQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function eK(){let e=(0,eR.Z)(),{pinId:t}=(0,f.Z)(e.params.id||""),a=(0,p.Z)({strategy:"Legacy",query:eO,variables:{pinId:t},useGetLegacyData:({pinId:e})=>{let{data:t}=(0,m.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed",fetch_visual_search_objects:!0,is_mobile_fork:!0}}),a=(0,_.S6)()(e);return t??a}}),i=a?.v3GetPinQuery?.__typename==="V3GetPin"?a.v3GetPinQuery.data:null,l=(0,h.Z)(eH,i);return l?(0,W.jsx)(ez,{pinKey:l}):null}function eN(){(0,s.useEffect)(()=>{(0,o.Z)("MobileFlashlightPageFetchData","/app/www/VisualSearch/mobile/MobileFlashlightPageFetchData.tsx")},[]);let e=(0,g.Z)();return(0,W.jsx)(s.Suspense,{fallback:(0,W.jsx)(u.xH,{accessibilityLabel:e._('Loading Pin data', 'mobileFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0}),children:(0,W.jsx)(eK,{})})}var eV=a(728746);let eB=function(){(0,s.useEffect)(()=>{(0,o.Z)("VisualSearchPage","/app/www/pages/VisualSearchPage.tsx")},[]);let e=(0,c.HG)(),t=(0,r.Z)();return e?t.isAuth?(0,W.jsx)(d.Z,{}):(0,W.jsx)(eV.Z,{}):(0,W.jsx)(eN,{})}},154959:function(e,t,a){(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||[]).push(["www/pin/[id]/visual-search",function(){return a(3455).Z}])},976892:function(e){e.exports="https://s.pinimg.com/webapp/handle_bottom_left-4b5805a7.svg"},47239:function(e){e.exports="https://s.pinimg.com/webapp/handle_bottom_right-5d5443d0.svg"},615440:function(e){e.exports="https://s.pinimg.com/webapp/handle_top_left-194e8c4e.svg"},743222:function(e){e.exports="https://s.pinimg.com/webapp/handle_top_right-0b7d60a7.svg"}},function(e){e.O(0,["12608","17958","1891","24168","25418","36010","39366","39453","39477","42844","46683","79196","84436","87353","90002","90005","90113","96986","98396"],function(){return e(e.s=154959)}),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/pin/[id]/visual-search-6a30039b4dd9326a.mjs.map